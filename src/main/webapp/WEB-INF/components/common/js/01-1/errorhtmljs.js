var Bubble={positionRight:"R",positionLeft:"L",positionCenter:"C",positionLeftDown:"LD",positionRightLeft:"RL",positionUnknown:"U",isBubbleVisible:{},elementIds:[],setDataBack:true,hideCallback:''};Bubble.showBubble=function(event){event.data.target=event.currentTarget;Bubble.show(event.data);if(jQuery.isFunction(event.preventDefault)){event.preventDefault();}};Bubble.show=function(data){var $position=data.position;if(typeof data.setDataBack!='undefined'){Bubble.setDataBack=data.setDataBack;}
if(typeof data.hideCallback!='undefined'){Bubble.hideCallback=data.hideCallback;}
var $element=jQuery(data.target),elementId=$element.attr("id"),$bubble=jQuery("#bubble-"+elementId),$bubbleContent=jQuery("#bubbleContent-"+elementId),$bubbleArrow=jQuery("#bubbleArrow-"+elementId),$dataElement=jQuery("#"+elementId+"-data");if(Bubble.isBubbleVisible[elementId]){Bubble.isBubbleVisible[elementId]=!Bubble.isBubbleVisible[elementId];if($dataElement.size()>0){var contentData=$bubbleContent.html();$dataElement.html(contentData);$bubbleContent.html('');var arrayIndex=jQuery.inArray(elementId,Bubble.elementIds);if(arrayIndex>-1){Bubble.elementIds.splice(arrayIndex,1);}}
if(jQuery.isFunction(Bubble.hideCallback)){Bubble.hideCallback();}}else{Bubble.isBubbleVisible[elementId]=true;if($bubble.length===0){$bubble=jQuery("<span>").attr("id","bubble-"+elementId).addClass("bubble");$element.parent().append($bubble);$bubbleContent=jQuery("<span>").attr("id","bubbleContent-"+elementId).addClass("bubble-content");$bubbleArrow=jQuery("<span>").attr("id","bubbleArrow-"+elementId).addClass("bubble-arrow");$bubble.append($bubbleContent).append($bubbleArrow);}
$bubbleArrow.removeClass("bubble-arrow-right");$bubbleArrow.removeClass("bubble-arrow-left");if($dataElement.size()>0){var contentData=$dataElement.html();$bubbleContent.html(contentData);$dataElement.html('');}
else{$bubbleContent.html("No data available to display");}
if(jQuery.inArray(elementId,Bubble.elementIds)==-1){Bubble.elementIds.push(elementId);}
if($position===Bubble.positionLeft){Bubble.setLeft({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}
else if($position===Bubble.positionRight){Bubble.setRight({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}
else if($position===Bubble.positionCenter){Bubble.setCenter({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}
else if($position===Bubble.positionLeftDown){Bubble.setLeftDown({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}
else if($position===Bubble.positionRightLeft){Bubble.setRightLeft({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}
else{Bubble.setWithElementLocation({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}}
$bubble.toggle();};Bubble.hide=function(e){var elementId=e.data.elementId;if(Bubble.isBubbleVisible[elementId]){Bubble.isBubbleVisible[elementId]=!Bubble.isBubbleVisible[elementId];var $bubble=jQuery("#bubble-"+elementId),$bubbleContent=jQuery("#bubbleContent-"+elementId);if(Bubble.setDataBack){var data=$bubbleContent.html(),$dataElement=jQuery("#"+elementId+"-data");$dataElement.html(data);}
$bubbleContent.html('');var arrayIndex=jQuery.inArray(elementId,Bubble.elementIds);if(arrayIndex>-1){Bubble.elementIds.splice(arrayIndex,1);}
$bubble.toggle();}
if(jQuery.isFunction(Bubble.hideCallback)){Bubble.hideCallback();}};Bubble.forceHideAll=function(e){var bubbleCnt=Bubble.elementIds.length;for(var i=0;i<bubbleCnt;i++){var elementId=Bubble.elementIds[i];e["data"]={'elementId':elementId};Bubble.hide(e);}};Bubble.hideAll=function(e){var bubbleCnt=Bubble.elementIds.length;for(var i=0;i<bubbleCnt;i++){var elementId=Bubble.elementIds[i];if(!jQuery(e.target).closest('#'+elementId)[0]&&!jQuery(e.target).closest('#bubble-'+elementId)[0]){e["data"]={'elementId':elementId};Bubble.hide(e);}}};Bubble.setRight=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var bubbleWidth=data.$bubble.outerWidth();var right=jQuery(element).position().left-(bubbleWidth-(data.$element.outerWidth()));data.$bubbleArrow.addClass("bubble-arrow-right");data.$bubbleArrow.css({left:(bubbleWidth-32)+"px"});data.$bubble.css({top:top+"px",left:right+"px"});};Bubble.setCenter=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var center=parseInt(data.$element.outerWidth()/2);var bubbleWidth=data.$bubble.outerWidth();var left=jQuery(element).position().left+center;var bubbleCenter=left-(bubbleWidth/2);data.$bubbleArrow.css({left:(bubbleWidth/2)+"px"});data.$bubbleArrow.addClass("bubble-arrow-center")
data.$bubble.css({top:top+"px",left:bubbleCenter+"px"});};Bubble.setLeftDown=function(data){var element=data.$element.get(0);var bottom=jQuery(element).position().top+data.$element.outerHeight();var center=parseInt(data.$element.outerWidth()/2);var bubbleWidth=data.$bubble.outerWidth();var bubbleHeight=data.$bubble.outerHeight();var left=jQuery(element).position().left+center;var bubbleCenter=left-(bubbleWidth/2);data.$bubbleArrow.css({'left':Math.floor(bubbleWidth/4),'top':(bubbleHeight+11)});data.$bubbleArrow.addClass("bubble-arrow-center")
data.$bubble.css({bottom:bottom,left:bubbleCenter,top:'auto'});};Bubble.setLeft=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var bubbleWidth=data.$bubble.outerWidth();var right=jQuery(element).position().left-12;data.$bubbleArrow.css({width:bubbleWidth+"px",left:5+"px"});data.$bubble.css({top:top+"px",left:right+"px"});};Bubble.setRightLeft=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var bubbleWidth=data.$bubble.outerWidth();var right=jQuery(element).position().left-(bubbleWidth*.88);data.$bubbleArrow.css({left:(bubbleWidth*.86)});data.$bubble.css({top:top+"px",left:right+"px"});};Bubble.setWithElementLocation=function(data){var $element=data.$element.get(0);var top=$element.position().top;var left=$element.position().left;var height=$element.outerHeight();var width=$element.outerWidth();var bubbleWidth=$bubble.outerWidth();var bubbleLeft=(left+(width/2))-bubbleWidth/2;var arrowLeft=(bubbleWidth/2.5);$bubble.css({top:(top+height)+"px",left:bubbleLeft+"px"});$bubbleArrow.css("left",arrowLeft+"px");if(bubbleWidth>width){var windowWidth=jQuery(window).width();var right=windowWidth-(left+width);if(right<bubbleWidth){bubbleLeft=windowWidth-(bubbleWidth+right);$bubble.css({left:bubbleLeft+"px"});$bubbleArrow.css({left:(bubbleWidth)+"px"});$bubbleArrow.addClass("bubble-arrow-right");}
else if(bubbleLeft<bubbleWidth){bubbleLeft=left;var arrowLeft=left-4;$bubbleArrow.css({left:arrowLeft+"px"});$bubbleArrow.addClass("bubble-arrow-left");$bubble.css({left:bubbleLeft+"px"});}}};function Cookie(name){this.$name=name;var reExtraSpace=/^\s*(.*?)\s*$/;var allcookies=document.cookie;if(allcookies=="")return;var cookies=allcookies.split(';');var cookie=null;var str="";for(var i=0;i<cookies.length;i++){str=cookies[i];str=str.replace(reExtraSpace,"$1");if(str.substring(0,name.length+1)==(name+"=")){cookie=str;break;}}
if(cookie==null)return;var cookieval=cookie.substring(name.length+1);var a=cookieval.split('&');for(var i=0;i<a.length;i++)
a[i]=a[i].split('_');for(var i=0;i<a.length;i++){this[a[i][0]]=decodeURIComponent(a[i][1]);}}
Cookie.prototype.store=function(daysToLive,path,domain,secure){var cookieval="";for(var prop in this){if((prop.charAt(0)=='$')||((typeof this[prop])=='function'))
continue;if(cookieval!="")cookieval+='&';cookieval+=prop+'_'+encodeURIComponent(this[prop]);}
var cookie=this.$name+'='+cookieval;if(daysToLive||daysToLive==0){cookie+="; max-age="+(daysToLive*24*60*60);}
if(path)cookie+="; path="+path;if(domain)cookie+="; domain="+domain;if(secure)cookie+="; secure";if(daysToLive==0)cookie+="; expires=Wed, 18 Jul 2001 07:42:30 UTC"
document.cookie=cookie;}
Cookie.prototype.remove=function(path,domain,secure){for(var prop in this){if(prop.charAt(0)!='$'&&typeof this[prop]!='function')
delete this[prop];}
this.store(0,path,domain,secure);}
Cookie.prototype.enabled=function(){if(navigator.cookieEnabled!=undefined)return navigator.cookieEnabled;if(Cookie.enabled.cache!=undefined)return Cookie.enabled.cache;document.cookie="testcookie=test; max-age=10000";var cookies=document.cookie;if(cookies.indexOf("testcookie=test")==-1){return Cookie.enabled.cache=false;}
else{document.cookie="testcookie=test; max-age=0";return Cookie.enabled.cache=true;}}
function Cookie_getCookies(match)
{var cookieArray=document.cookie.split(";");var a=new Array();for(var i=0;i<cookieArray.length;i++)
{var name=new String(cookieArray[i].substring(0,cookieArray[i].indexOf("=")));name=name.trim();if(!match)
{a.push(new Cookie(name));}
else if(name.indexOf(match)>-1)
{a.push(new Cookie(name));}}
return a;}
Cookie.getCookies=Cookie_getCookies;var isSvgSupported=!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect;var exitSurvey={esLink:'',esChance:0.25,surveyCookieId:'SCES',autosuggestSurveyCookieId:'SCAES',autoSuggestEnableCookie:'enableAutoSuggest',surveyInvite:function(surveyID){var cookieID='';if(surveyID==='exitSurveyDialog'){cookieID=exitSurvey.surveyCookieId;}else if(surveyID==='autoSuggestSurveyDialog'){cookieID=exitSurvey.autosuggestSurveyCookieId;}
if(exitSurvey.getCookie(cookieID)===undefined){exitSurvey.showSurvey(surveyID,cookieID);}},checkMathRandomSurvey:function(surveyID,cookieID){jQuery("#"+surveyID).css({'display':'block'});exitSurvey.setSurveyDialogPos();jQuery("#"+surveyID).delay(2000).animate({"bottom":"+=250px"},1000,"swing",function(){exitSurvey.setCookie(cookieID,"true",180);});jQuery("#"+surveyID+".yL").click(surveyID,exitSurvey.surveyAccept);jQuery("#"+surveyID+".nL, #"+surveyID+" #closeWindow").click(surveyID,exitSurvey.surveyClose);},showSurvey:function(surveyID,cookieID){if(jQuery('#randomautoSuggestVal').length&&jQuery('#randomautoSuggestVal').val()==='true'){var mathRandom=Math.random();if(mathRandom<=exitSurvey.esChance){exitSurvey.checkMathRandomSurvey(surveyID,cookieID);}}
else{exitSurvey.checkMathRandomSurvey(surveyID,cookieID);}},setSurveyDialogPos:function(surveyID){if(jQuery('#outerWrapper').length>0){jQuery("#"+surveyID).css({'right':jQuery(window).width()-(jQuery('#outerWrapper').offset().left+jQuery('#outerWrapper').outerWidth())});}},surveyAccept:function(e){e.preventDefault();if(exitSurvey.getCookie(exitSurvey.autosuggestSurveyCookieId)!==undefined){exitSurvey.setCookie(exitSurvey.autoSuggestEnableCookie,"true",1);}
var page="http://"+window.location.hostname;var windowprops="width=900,height=600,location=no,toolbar=no,menubar=no,scrollbars=yes,resizable=yes";var PopWindow=window.open(page,"",windowprops);try{PopWindow.blur();PopWindow.focus();if(PopWindow){exitSurveyHTML=exitSurvey.gHTML();PopWindow.document.write(exitSurveyHTML);PopWindow.document.close();}
exitSurvey.surveyClose(e);}catch(err){exitSurvey.surveyClose(e);}
basicSrchAutoSugg.enableAutoSuggest();},surveyClose:function(e){if(e){e.preventDefault();}
jQuery("#"+e.data).css('display','none');},gHTML:function(){var wH="";wH+='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">';wH+="<html>";wH+="<head>";wH+="<title>Feedback</title>";wH+='<style type="text/css">';wH+="body { margin: 0; padding: 0; font-family: Arial, Verdana, helvetica, sans-serif; height: 100%; font-size: 75%; color: #5C5C5C;}";wH+=".logoHeader { height: 64px;}.logoScopusImg { width: 75px; position: absolute; padding-left: 2%; padding-top: 15px; padding-right: 14%;}";wH+=".logoScopusImg img { height: 25px;}.sBody { padding: 20px 40px;}.sInfoMsg{width:0;overflow:hidden;line-height: 14px;font-size:0;}.sSubHeading { font-size: 14px;}.sHeading { font-size: 20px;}";wH+=".sButton input { height: 30px; margin: 0; color: #5c5c5c; background: #eee; border: 1px solid #c9c9c9;}.sButton { font-size: 13px; font-weight: bold; margin: 20px 0;}";wH+=".sText { font-size: 13px;}.navigation { background-color: #026370; height: 5px;} ";wH+=".sInfoMsgContainer { background-color: #ebf7fd; background-image: url('/static/images/info.png'); background-position: 5px 4px; background-repeat: no-repeat; border: 1px solid #46c7f4; border-radius: 4px; color: #5c5c5c; margin: 10px 0; padding: 6px 5px 6px 30px;}";wH+="</style>";wH+="</head>";wH+="<body>";wH+='<div>';wH+='<div class="logoHeader" >';wH+='<div class="logoScopusImg" >';wH+='<img alt="Scopus Logo" src="../images/scopusLogoOrange.svg"/>';wH+='</div>';wH+='</div>';wH+='<div class="navigation"></div>';wH+='<div class="sBody">';wH+='<div class="sHeading">'+basic.SURVEY_POPUP_CONFIRMATION_HEADING()+' <br/><br/></div>';wH+='<div class="sInfoMsgContainer" role="alert">';wH+='<span class="sInfoMsg">'+basic.SURVEY_POPUP_CONFIRMATION_INFO_MSG()+'</span><span class="sSubHeading">'+basic.SURVEY_POPUP_CONFIRMATION_INFORMATION()+'</span> <br/><br/>'+basic.SURVEY_POPUP_CONFIRMATION_FIREFOX_INFO();wH+="</div>";wH+="</div>";wH+="</div>";wH+='<script type="text/javascript">';wH+="var intl;";wH+="function loadSurvey() {";wH+="clearInterval(intl);";wH+="window.resizeTo(900,600);";wH+='this.location="'+exitSurvey.esLink+'";';wH+="}";wH+="var lastseen = window.opener.location.hostname;";wH+="function CheckParent() {";wH+="try {";wH+="var host = window.opener.location.hostname;";wH+="if (host != lastseen){";wH+="lastseen = host;";wH+="}";wH+="return;";wH+="} catch(error){";wH+="clearInterval(intl);";wH+="moveTo(screen.width/2-450,screen.height/2-300);";wH+="this.focus();";wH+='alert("Click Ok to begin your survey");';wH+='this.location="'+exitSurvey.esLink+'";';wH+="var match = document.cookie.match('enableAutoSuggest=([^;]*)');";wH+="if (match) {";wH+="document.cookie = 'enableAutoSuggest=false; max-age=0 ; expires=Wed, 18 Jul 2001 07:42:30 UTC; path=/';";wH+="}";wH+="}";wH+="}";wH+='intl = setInterval("CheckParent()", 500);';wH+="</script>";wH+="</body>";wH+="</html>";return wH;},setCookie:function(c_name,value,expiration){var exdate=new Date();exdate.setDate(exdate.getDate()+expiration);var c_value=escape(value)+("; expires="+exdate.toUTCString()+"; path=/");document.cookie=c_name+"="+c_value;},getCookie:function(c_name){var match=document.cookie.match(c_name+'=([^;]*)');return match?match[1]:undefined;},svgSupport:function(){if(!isSvgSupported){if(typeof jQuery('.surveylogoScopusImg img').attr('src')==='undefined'){document.getElementsByTagName("img")[0].src='/static/images/ScopusWhite.png';}else{jQuery('.surveylogoScopusImg img').attr('src','/static/images/ScopusWhite.png');}
jQuery('.surveylogoScopusImg').css({'padding-top':'11px'});jQuery('.surveylogoScopusImg img').css({'height':'auto'});}},init:function(surveyID){if(surveyID==='exitSurveyDialog'){exitSurvey.esLink=jQuery('#exitSurveyLink').val();}else if(surveyID==='autoSuggestSurveyDialog'){exitSurvey.esLink=jQuery('#autoSuggestSurveyLink').val();}
exitSurvey.surveyInvite(surveyID);exitSurvey.svgSupport();}};var isSvgSupported=!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect;var loginPopoutOpened=false;var logoutPopoutOpened=false;var helpMenuPopoutOpened=false;var header={buildHelpMenuBubble:function(obj){Bubble.setRight=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var bubbleWidth=data.$bubble.outerWidth();var right=jQuery(element).position().left-(bubbleWidth-(data.$element.width()));data.$bubbleArrow.addClass("bubble-arrow-right");if(jQuery(element).attr('id')=='helpMenuLnk'){data.$bubbleArrow.css({left:(bubbleWidth-31)+"px"});data.$bubble.css({top:top+"px",left:(right+25)+"px"});}
else{data.$bubbleArrow.css({left:(bubbleWidth-32)+"px"});data.$bubble.css({top:top+"px",left:right+"px"});}};obj.click(function(e){e["data"]={position:Bubble.positionRight,setDataBack:true};if(jQuery('#bubble-helpMenuLnk').is(':visible')){Bubble.forceHideAll(e);}
else{Bubble.showBubble(e);}
e.preventDefault();});},formProfileAccessLinks:function(){jQuery('#profileAccessCnt').html(jQuery('#CARS_SETTINGS_TEMPLATE #modify-profile-group'));jQuery('#profileAccessCnt form+div').remove();jQuery('#myScopusCnt').html(jQuery('#CARS_SETTINGS_TEMPLATE #settings-app-links-top #scopusTopLinks ul'));},getSettingsTemplate:function(){var settingsTemplate=jQuery.get("../../settings/template.uri");settingsTemplate.done(function(response){jQuery('#CARS_SETTINGS_TEMPLATE').html(response);header.formProfileAccessLinks();});settingsTemplate.error();settingsTemplate.always();},getMyScopusLinkData:function(){var settingsData=jQuery.get("../../customer/settings.uri");settingsData.done(function(response){header.getSettingsTemplate();});settingsData.error();settingsData.always();},setMenuNavPos:function(){jQuery(window).scroll(function(event){var isInitFixedHeader=jQuery('#mainNav').hasClass('mainNavFxd');if(jQuery('div.cib_Container').is(':visible')){var cibPos=jQuery('div.cib_Container:visible').closest('#cib_Overlay').position().top;}
if(jQuery('span#bubble-showAllPageBubble').is(':visible')){var bubPos=jQuery('span#bubble-showAllPageBubble:visible').closest('#bubble-showAllPageBubble').position().top;}
if(jQuery(window).scrollTop()>jQuery('.mainNavSect').offset().top){if(!jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('#mainNav').addClass('mainNavFxd');}}
else{jQuery('#mainNav').removeClass('mainNavFxd');}
if(jQuery('div.cib_Container').is(':visible')){var isRefineOverlayPresent=false;for(counter=0;counter<15;counter++){if(jQuery("#overlayHeading_"+counter).is(':visible')){isRefineOverlayPresent=true;break;}}
if(!isRefineOverlayPresent){if(isInitFixedHeader&&!jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('div.cib_Container:visible').closest('#cib_Overlay').css({'top':cibPos+62});}
if(!isInitFixedHeader&&jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('div.cib_Container:visible').closest('#cib_Overlay').css({'top':cibPos-62});}}}
if(jQuery('span#bubble-showAllPageBubble').is(':visible')){if(isInitFixedHeader&&!jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('span#bubble-showAllPageBubble:visible').closest('#bubble-showAllPageBubble').css({'top':bubPos+64});}
if(!isInitFixedHeader&&jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('span#bubble-showAllPageBubble:visible').closest('#bubble-showAllPageBubble').css({'top':bubPos-64});}}});},setEllipsisUserName:function(){jQuery('#logout_username').css({'width':''});var headerWidth=jQuery('#scopusSciverseMasthead').width();var logoSectionWidth=jQuery('.logoScopusImg').outerWidth();var rightSectionTotalWidth=jQuery('.rgtDivisions').width();var getuserNameWidth=jQuery('#logout_username').width();var rightSectionWidth=rightSectionTotalWidth-getuserNameWidth;var calculatedWidth=headerWidth-logoSectionWidth-rightSectionWidth;if(getuserNameWidth>calculatedWidth){jQuery('#logout_username').css({'width':calculatedWidth}).addClass('regUserEllipsis');}
else{jQuery('#logout_username').removeClass('regUserEllipsis');}
if(!jQuery.browser.mozilla){jQuery('#logout_username').css({'margin-right':'-2px'});}
else{jQuery('#logout_username').css({'margin-right':''});}},adjustLoginPreview:function(){if(jQuery('#login_reglink').css('display')=='none'){jQuery('#login-panel.CARS_panelClass a#login_loginlink').css({'margin-left':'-12px'});}
else{jQuery('#login-panel.CARS_panelClass a#login_loginlink').css({'margin':'0'});}},productLnkSep:function(){if(jQuery('.hdrTopLnk ul li').length==2){jQuery('.prodSep').css({'display':'none'});}
else{jQuery('.prodSep').css({'display':'block'});}},svgSupport:function(){if(!isSvgSupported){if(isPreviewPage){if(typeof jQuery('.logoScopusPreviewImg img').attr('src')=='undefined'){document.getElementsByTagName("img")[0].src='../images/preview/scopuspreviewOrange.png';}else{jQuery('.logoScopusPreviewImg img').attr('src','../images/preview/scopuspreviewOrange.png');}}
else{if(typeof jQuery('.logoScopusImg img').attr('src')=='undefined'){document.getElementsByTagName("img")[0].src='../images/scopusLogoOrange.png';}else{jQuery('.logoScopusImg img').attr('src','../images/scopusLogoOrange.png');}}
jQuery('.logoScopusImg, .logoScopusPreviewImg').css({'padding-top':'15px'});if(jQuery('.modalOverlayHdr').length){jQuery('.modalOverlayHdr .logoScopusImg').css({'padding-top':'0'});}}},closeHelpPopout:function(){jQuery('#header #helpMenuLnk-data').hide();if(helpMenuPopoutOpened){jQuery('#helpMenuLnk').focus();helpMenuPopoutOpened=false;}},closeLoginPopout:function(){if(jQuery('#header #login_pop_container').hasClass('CARS_displayInline')){jQuery('#header #login_loginlink').trigger("click");header.removeLoginPopoutOuterContents();if(loginPopoutOpened){jQuery('#header #login_loginlink').focus();loginPopoutOpened=false;}}},closeLogoutPopout:function(){if(jQuery('#header #logout_pop').hasClass('CARS_displayInline')){jQuery('#header #logout_username_link').trigger("click");header.removeLogoutPopoutOuterContents();if(logoutPopoutOpened){jQuery('#header #logout_username_link').focus();logoutPopoutOpened=false;}}},removeLoginPopoutOuterContents:function(){var cnt=jQuery("#login-panel .custom-modal-top-border").contents();jQuery("#login-panel .custom-modal-arrow").replaceWith(cnt);},removeLogoutPopoutOuterContents:function(){var cnt=jQuery("#header #logout_user .custom-modal-top-border").contents();jQuery("#header #logout_user .custom-modal-arrow").replaceWith(cnt);},detectIE:function(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0){return true;}
var trident=ua.indexOf('Trident/');if(trident>0){return true;}
var edge=ua.indexOf('Edge/');if(edge>0){return true;}
return false;},addAccessibilityToLoginPopout:function(){jQuery('#login_pop_container').attr({'role':'dialog','aria-labelledby':'login_popout_heading_id'});jQuery("#header #login_pop_container_logform .CARS_groupTitle").attr({'role':'heading','aria-level':'3','id':'login_popout_heading_id','tabindex':'-1'});jQuery(".login-close-icon").on('keydown',function(e){if((e.keyCode||e.which)===9){if(e.shiftKey){jQuery('#header #login_pop_container #login_pop_container_socialform:last-child').focus();}else{jQuery('#header #login_pop_container #login_popout_heading_id').focus();}}});jQuery("#header #login_pop_container #username").on('keydown',function(event){if(event.shiftKey&&event.keyCode===9){jQuery('#header #login_pop_container #login-close-placeholder').focus();}});},addAccessibilityToLogoutPopout:function(){jQuery("#header #logout_pop .userPopoutTitle").focus();jQuery("#logout_pop .custom-logout-popout .userPopoutTitle").on('keydown',function(e){if((e.keyCode||e.which)===9){if(e.shiftKey){jQuery("#logout_pop .custom-logout-popout #login-close-placeholder").focus();}else{jQuery("#userPath>form:first-child").find("a").focus();}}});jQuery("#header .custom-logout-popout .close").on('keydown',function(e){if((e.keyCode||e.which)===9){if(e.shiftKey){}else{jQuery("#header #logout_username_link").focus();}}});},addAccessibilityToHelpPopout:function(){jQuery("#header #headerHelpLinks .helpMenuList>li:first-child>a").focus();jQuery("#header #headerHelpLinks a.close").on('keydown',function(e){if((e.keyCode||e.which)===9){if(e.shiftKey){jQuery(e.target).find("a").focus();}else{jQuery("#helpMenuLnk").focus();}}});jQuery("#header #headerHelpLinks .helpMenuList>li:first-child>a ").on('keydown',function(event){if(event.shiftKey&&event.keyCode===9){jQuery("#header #headerHelpLinks #help-close-placeholder").focus();}});},init:function(){if(jQuery('.mainNavSect').length>0){header.setMenuNavPos();}
jQuery('#helpMenuLnk').on('click',function(e){header.closeLoginPopout();header.closeLogoutPopout();jQuery('#helpMenuLnk-data').toggle();header.removeLoginPopoutOuterContents();helpMenuPopoutOpened=true;header.addAccessibilityToHelpPopout();});jQuery('body').die("click").on('click',function(e){if(!jQuery(e.target).closest('#exportTrigger')[0]){Bubble.hideAll(e);}});if(jQuery('#login_reglink').length>0){header.adjustLoginPreview();}
header.svgSupport();if(jQuery('.scopusScivalBanner').length>0){header.productLnkSep();}
jQuery('#header #helpMenu a.close').on('click',function(e){header.closeHelpPopout();});jQuery(document).on("keyup",function(e){var code=e.keyCode||e.which;if(code===27){header.closeHelpPopout();header.closeLoginPopout();header.closeLogoutPopout();}});jQuery("body").click(function(e){if(jQuery(e.target).closest("a").attr('id')!=="helpMenuLnk"&&!jQuery(e.target).parents().andSelf().is('#helpMenuLnk-data')){header.closeHelpPopout();}
if(jQuery(e.target).closest("a").attr('id')!=="login_loginlink"&&!jQuery(e.target).parents().andSelf().is('#login_pop_container')&&!jQuery(e.target).closest("a").hasClass("not-signed-in-user-link")){header.closeLoginPopout();}
if(jQuery(e.target).closest("a").attr('id')!=="logout_username_link"&&jQuery(e.target).attr('id')!=="logout_username"&&!jQuery(e.target).parents().andSelf().is('#logout_pop,#logout_text_content')){header.closeLogoutPopout();}});}};function dateFromISO8601(isoDateString){var parts=isoDateString.match(/\d+/g);var isoTime=Date.UTC(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);var isoDate=new Date(isoTime);return isoDate;}
var modalOverlay={drawOverlay:function(){jQuery("#modalOverlay-dialog").dialog({modal:true,width:567,height:352,zIndex:200000}).removeClass("displayNone");jQuery(".ui-dialog .ui-dialog-titlebar").hide();jQuery("#modalOverlay-dialog").dialog("close").dialog("open");jQuery("body").css({'overflow':'hidden'});modalOverlay.modalOverlayPos();jQuery("#modalOverlay-dialog").on("keydown",function(e){if(e.keyCode==27)
modalOverlay.remindMeLater();});},modalOverlayPos:function(){var winHeight=jQuery(window).height();var modalOverlayHeight=jQuery('.modalOverlayPopUp').height();var totalTopVal=(winHeight-modalOverlayHeight)/2;var setTopPos=totalTopVal-24;var winWidth=jQuery(window).width();var modalOverlayWidth=jQuery('#modalOverlay-dialog').parent().width();var totalLeftVal=(winWidth-modalOverlayWidth)/2;var setLeftPos=totalLeftVal;if(jQuery("#modalOverlay-dialog").parent().hasClass('ui-dialog')){jQuery("#modalOverlay-dialog").parent().css({'position':'absolute','top':setTopPos,'left':setLeftPos,'z-index':'200002'});}},setOpacityModalOverlay:function(){jQuery('#modalOverlay-dialog').parent().prev().css({'background-color':'#000000','opacity':'0.5','z-index':'200001'});},getOrCreateOverlayCookie:function(name){var overlayCookies=Cookie.getCookies(name);if(overlayCookies.length==0){overlayCookie=new Cookie(name);}else{overlayCookie=overlayCookies[0];}
return overlayCookie;},acceptOverlay:function(){modalOverlayCookie=modalOverlay.getOrCreateOverlayCookie("sc_overlay_ok");modalOverlayCookie.showOverlay=false;modalOverlayCookie.ts=jQuery("#overlayShownTime").val();modalOverlayCookie.store(365,"../../default.htm");overlayRemindCookie=modalOverlay.getOrCreateOverlayCookie("sc_overlay_remind");overlayRemindCookie.store(0,"../../default.htm");modalOverlay.overlayClose();},remindMeLater:function(){modalOverlayCookie=modalOverlay.getOrCreateOverlayCookie("sc_overlay_ok");modalOverlayCookie.showOverlay=true;modalOverlayCookie.ts=jQuery("#overlayShownTime").val();modalOverlayCookie.store(365,"../../default.htm");overlayRemindCookie=modalOverlay.getOrCreateOverlayCookie("sc_overlay_remind");overlayRemindCookie.remindLater=true;var remindMeLaterHours=jQuery("#remindMeLaterHours").val();if(parseInt(remindMeLaterHours)>0){overlayRemindCookie.store(parseInt(remindMeLaterHours)/24,"../../default.htm");}else{overlayRemindCookie.store(1,"../../default.htm");}
modalOverlay.overlayClose();},overlayClose:function(){jQuery("#modalOverlay-dialog").dialog("close");jQuery("body").css({'overflow':'inherit'});},init:function(){var messageUpdatedTimeStr=jQuery("#overlayUpdatedTime").val();var messageShownTimeStr=jQuery("#overlayShownTime").val();var modalOverlayCookies=Cookie.getCookies("sc_overlay_ok");if(modalOverlayCookies.length){showOverlay=modalOverlayCookies[0].showOverlay=="true";messageShownTimeStr=modalOverlayCookies[0].ts;}else{showOverlay=true;}
var overlayRemindCookies=Cookie.getCookies("sc_overlay_remind");if(overlayRemindCookies.length){showOverlay=false;}
if(!showOverlay&&messageUpdatedTimeStr!=""&&messageShownTimeStr!=""){var messageUpdatedTime=dateFromISO8601(messageUpdatedTimeStr);var d=dateFromISO8601(messageShownTimeStr);var messageShownTime=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),0,0,0);if(messageUpdatedTime>messageShownTime){showOverlay=true;}}
if(showOverlay){modalOverlay.drawOverlay();modalOverlay.setOpacityModalOverlay();jQuery(".modalOverlayOuterCnt a").on("click",modalOverlay.acceptOverlay);}}};jQuery(document).ready(function(){(function($){$.InFieldLabels=function(label,field,options){var base=this;base.$label=$(label);base.label=label;base.$field=$(field);base.field=field;base.$label.data("InFieldLabels",base);base.showing=true;base.init=function(){var initialSet;base.options=$.extend({},$.InFieldLabels.defaultOptions,options);setTimeout(function(){if(base.$field.val()!==""){base.$label.addClass('active');base.showing=false;}else{base.$label.removeClass('active');base.showing=true;}},200);base.$field.focus(function(){base.fadeOnFocus();}).blur(function(){base.checkForEmpty(false);}).bind('keydown.infieldlabel',function(e){base.hideOnChange(e);}).bind('paste',function(){base.removeClass('active');}).change(function(){base.checkForEmpty();}).bind('onPropertyChange',function(){base.checkForEmpty();}).bind('keyup.infieldlabel',function(){base.checkForEmpty();});if(base.options.pollDuration>0){initialSet=setInterval(function(){if(base.$field.val()!==""){base.$label.addClass('active');base.showing=false;clearInterval(initialSet);}},base.options.pollDuration);}};base.fadeOnFocus=function(){if(base.showing){base.$label.addClass('active');base.showing=false}};base.checkForEmpty=function(blur){if(base.$field.is(':focus')){base.$label.addClass('active');base.showing=false}
else if(base.$field.is()){base.$label.removeClass('active');}
else if(base.$field.val()===""){base.$label.removeClass('active');base.showing=true}
else if(base.showing){base.$label.addClass('active');}};base.prepForShow=function(){if(!base.showing){base.$label.removeClass('active');}};base.hideOnChange=function(e){if((e.keyCode===16)||(e.keyCode===9)){return;}
if(base.showing){base.$label.addClass('active');base.showing=true;}
base.$field.unbind('keydown.infieldlabel');};base.init();};$.InFieldLabels.defaultOptions={fadeOpacity:0.5,fadeDuration:300,pollDuration:0,enabledInputTypes:["text","search","tel","url","email","password","number","textarea"],className:false};$.fn.inFieldLabels=function(options){var allowed_types=options&&options.enabledInputTypes||$.InFieldLabels.defaultOptions.enabledInputTypes;return this.each(function(){var for_attr=$(this).attr('for'),field,restrict_type;if(!for_attr){return;}
field=document.getElementById(for_attr);if(!field){return;}
restrict_type=$.inArray(field.type,allowed_types);if(restrict_type===-1&&field.nodeName!=="TEXTAREA"){return;}
(new $.InFieldLabels(this,field,options));});};}(jQuery));jQuery("label").inFieldLabels();});jQuery(window).resize(function(){if(jQuery('#logout_username').length>0){}
if(jQuery("#modalOverlay-dialog").length>0){modalOverlay.modalOverlayPos();}
if(jQuery('#exitSurveyDialog').length>0){exitSurvey.setSurveyDialogPos();}});jQuery(document).ready(function(){if(typeof String.prototype.trim!=='function'){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');}}
Cookie.prototype.store=function(daysToLive,path,domain,secure){var cookieval="";for(var prop in this){if((prop.charAt(0)=='$')||((typeof this[prop])=='function'))
continue;if(cookieval!="")cookieval+='&';cookieval+=prop+'_'+encodeURIComponent(this[prop]);}
var cookie=this.$name+'='+cookieval;if(daysToLive&&daysToLive>0){var d=new Date();d.setTime(d.getTime()+daysToLive*24*60*60*1000);cookie+="; max-age="+(daysToLive*24*60*60)+"; expires="+d.toGMTString();}else if(daysToLive==0){cookie+="; max-age=0 ; expires=Wed, 18 Jul 2001 07:42:30 UTC"}else if(daysToLive<0){}
if(path)cookie+="; path="+path;if(domain)cookie+="; domain="+domain;if(secure)cookie+="; secure";document.cookie=cookie;}
header.init();if(jQuery('#modalOverlay-dialog').length>0){modalOverlay.init();}
if(jQuery('#exitSurveyDialog').length>0){exitSurvey.init('exitSurveyDialog');}
if(jQuery('#autoSuggestSurveyDialog').length>0){exitSurvey.init('autoSuggestSurveyDialog');}
var _this=this;_this.init=function(){jQuery('.toggleIcon').on("click",function(e){if(!keyPressed){_this.toggleMenu();}});};jQuery('.userOptionCnt .profileAccess').click(function(){if(!jQuery(this).hasClass("not-signed-in-user-link")){if(jQuery(this).next().hasClass('spineAccordianCollapsed')){jQuery(this).next().removeClass('spineAccordianCollapsed');jQuery(this).attr('aria-expanded','true');jQuery(this).removeClass('collapsed').addClass('expanded');}
else{jQuery(this).next().addClass('spineAccordianCollapsed');jQuery(this).attr('aria-expanded','false');jQuery(this).removeClass('expanded').addClass('collapsed');}}});_this.toggleMenu=function(){var spine=jQuery('.sidebarMenu');if(jQuery("body").hasClass("sidebarActive")){setTimeout(function(){jQuery("body").removeClass("sidebarActive");if(jQuery('#header .sidebarMenu .regLnk').find(jQuery('#header .sidebarMenu .regLnk #guestAccessPage')).length>0){jQuery('#carsLoginSpine').html(jQuery('#header .sidebarMenuHeader .user span:first-child').contents());jQuery('#header .sidebarMenuHeader .user span:first-child').empty();}
jQuery('#header .headerContainer .regLnk').html(jQuery('#header .sidebarMenu .regLnk').contents());jQuery('#header .sidebarMenu .regLnk').empty();jQuery('#header .headerContainer .regLnk').css('display','inline-block');spine.css("display","none");jQuery("#headerHamburger a").focus();});}
else{spine.css("display","inline-block");setTimeout(function(){jQuery('#header .headerContainer .regLnk').css('display','none');jQuery('#header .sidebarMenu .regLnk').html(jQuery('#header .headerContainer .regLnk').contents());jQuery('#header .headerContainer .regLnk').empty();if(jQuery('#header .sidebarMenu .regLnk').find(jQuery('#header .sidebarMenu .regLnk #guestAccessPage')).length>0){jQuery('#header .sidebarMenuHeader .user span:first-child').replaceWith(jQuery('#carsLoginSpine').contents());jQuery('#carsLoginSpine').empty();}
jQuery("body").addClass("sidebarActive");jQuery("#header .user").attr('tabindex',-1).focus();});};}
_this.init();jQuery('#header .headerContainer  #login_loginlink').on('click',function(e){header.removeLoginPopoutOuterContents();if(jQuery('#login_pop_container').hasClass('CARS_displayInline')){header.closeHelpPopout();jQuery('<div/>',{'class':'custom-modal-arrow'}).insertAfter('#header #login_maincontroller+.CARS_clear');jQuery('<div/>',{'class':'custom-modal-top-border'}).appendTo('#login-panel .custom-modal-arrow');jQuery('#header #login_pop_container').appendTo('#login-panel .custom-modal-top-border');header.addAccessibilityToLoginPopout();window.setTimeout(function(){jQuery('#header #login_pop_container #username').focus();},50);loginPopoutOpened=true;}});jQuery('#header .headerContainer  #logout_username_link').on('click',function(e){header.removeLogoutPopoutOuterContents();if(jQuery('#logout_pop').hasClass('CARS_displayInline')){jQuery('<div/>',{'class':'custom-modal-arrow'}).insertAfter('#header #logout_username_link+.CARS_clear');jQuery('<div/>',{'class':'custom-modal-top-border'}).appendTo('#header #logout_user .custom-modal-arrow');jQuery('#header #logout_pop').appendTo('#header #logout_user .custom-modal-top-border');logoutPopoutOpened=true;header.addAccessibilityToLogoutPopout();}});var registerIcon=jQuery('<span />').addClass('icon-BGS10 navigate-right-link-white');jQuery('#header #login_reglink').append(registerIcon);var closeIcon=jQuery('<a>',{'class':'iconSmall close pull-right','href':'javascript:void(0);','title':'Close window','aria-label':'Close','html':'&nbsp;'});var placeholderForCorrectFocus=jQuery('<span>',{'id':'login-close-placeholder','tabindex':'-1'});closeIcon.insertAfter(jQuery('#header #login_pop_container #login_pop_container_socialform'));placeholderForCorrectFocus.insertAfter(closeIcon);jQuery('#header #login_pop_container .close').addClass('login-close-icon');var requiredFieldsText=jQuery('<div>',{'class':'requiredFieldsText','displaystyle':':red','html':'*<span class="greyText">=required fields</span>'});requiredFieldsText.appendTo(jQuery("#header #login_pop_container #login_pop_container_logform"));var logOutPopOutOuterDiv=jQuery('<div>',{'class':'custom-logout-popout',});jQuery('#header #userPath').appendTo(logOutPopOutOuterDiv);logOutPopOutOuterDiv.appendTo('#header #logout_pop');closeIcon.insertAfter(jQuery('#header #logout_user #logout_pop #userPath'));placeholderForCorrectFocus.insertAfter(jQuery('#header #logout_user #logout_pop a.close'));jQuery('#header #login_loginlink').removeAttr("aria-expanded");var userPopoutTitleDiv=jQuery('<div>',{'class':'userPopoutTitle','tabindex':'0','html':'My organization'});userPopoutTitleDiv.insertBefore(jQuery('#header #logout_user #logout_pop #userPath'));jQuery('#header #login_pop_container .close').on('click',function(e){header.closeLoginPopout();});jQuery('#header #logout_pop .close').on('click',function(e){header.closeLogoutPopout();});var logoutLink=jQuery('#logout-panel #logout_logoutlink');logoutLink.appendTo(jQuery('#header #logout_pop #userPath'));logoutLink.css("display","inline-block");if(jQuery('#logout_user').length>0){jQuery("#header .personalAccess a").removeClass("not-signed-in-user-link");if(jQuery('#CARS_SETTINGS_TEMPLATE #settings-panel').contents().length===0){header.getMyScopusLinkData();}else{header.formProfileAccessLinks();}
if(!jQuery("#broughtToYouCnt .libraryBannerCont>#banner-top").length>0){jQuery("#broughtToYouCnt .libraryBannerCont").remove();}
if(!jQuery("#broughtToYouCnt .librCatl>a").length>0){jQuery("#broughtToYouCnt .librCatl").remove();}
if(!jQuery("#broughtToYouCnt li").length>0){jQuery("#broughtToYouCnt").parent().remove();}}
jQuery(".not-signed-in-user-link").on("click",function(){if(!jQuery('#login_pop_container').hasClass('CARS_displayInline')){jQuery("#header #login_loginlink")[0].onclick();jQuery("#header #login_loginlink").click();jQuery("#header #login_loginlink")[0].onclick();}})
jQuery("#logout_username_expand,#logout_username_collapse").hover(function(){jQuery("#logout_username,#logout_text_content").addClass("hovered");},function(){jQuery("#logout_username,#logout_text_content").removeClass("hovered");});jQuery("#logout_username_link").on('focus',function(){jQuery("#logout_username,#logout_text_content").addClass("hovered");}).on('blur',function(){jQuery("#logout_username,#logout_text_content").removeClass("hovered");});var isIE=header.detectIE();if(isIE){jQuery("#header li.regLnk").addClass("ieSpecific");jQuery("#header").addClass("ie");}
jQuery("#header #login_submit_btn").on("click",function(e){var errorCount=0;var focusInput=null;jQuery("#errorMsgContainerAlert").remove();var accessibileAlertDiv=jQuery('<div>',{'id':'errorMsgContainerAlert','role':'alert','aria-atomic':'true','aria-live':'assertive'});if(!jQuery("#header #username").val()){accessibileAlertDiv.append("username field is empty");errorCount++;focusInput=jQuery('#header #login_pop_container #username');if(jQuery('#userNameError').hasClass("displayNone")){jQuery("#userNameError").removeClass("displayNone").insertAfter(jQuery('#header #login_username'));}}else{if(!jQuery('#userNameError').hasClass("displayNone")){jQuery('#userNameError').addClass("displayNone");}}
if(!jQuery("#header #login_password-password,#header #password").val()){accessibileAlertDiv.append("password field is empty");errorCount++;if(focusInput===null){focusInput=jQuery('#header #login_pop_container #password,#header #login_pop_container #login_password-password');}
if(jQuery('#passwordError').hasClass("displayNone")){jQuery("#passwordError").removeClass("displayNone").insertAfter(jQuery('#header #login_password'));}}else{if(!jQuery('#passwordError').hasClass("displayNone")){jQuery('#passwordError').addClass("displayNone");}}
if(errorCount>0){jQuery("body").prepend(accessibileAlertDiv);focusInput.focus();e.preventDefault();}});jQuery("#header #logout_username,#header #logout_text_content").on("click",function(e){if(!jQuery('#logout_pop').hasClass('CARS_displayInline')){jQuery("#header #logout_username_link")[0].onclick();jQuery("#header #logout_username_link").click();jQuery("#header #logout_username_link")[0].onclick();}else{header.closeLogoutPopout();}});jQuery(".userOptionCnt>a").on("click",function(e){var otherAccordians=jQuery(".userOptionCnt>a").not(this);otherAccordians.each(function(index){if(jQuery(this).hasClass("expanded")){jQuery(this).removeClass("expanded").addClass("collapsed").attr("aria-expanded","false");jQuery(this).next().addClass("spineAccordianCollapsed");}});});jQuery("#logout_username,#logout_text_content").hover(function(){jQuery("#logout_username_link").addClass("hovered");},function(){jQuery("#logout_username_link").removeClass("hovered");});var keysdown={};var keyPressed=false;jQuery(".toggleIcon").keydown(function(e){if(keysdown[e.keyCode]){return;}
keysdown[e.keyCode]=true;if(e.keyCode===13){keyPressed=true;_this.toggleMenu();}else{keyPressed=false;}});jQuery(document).keyup(function(e){delete keysdown[e.keyCode];keyPressed=false;});});jQuery("#sourceBrowseId").on('click',function(event){if(typeof(Storage)!=="undefined"){localStorage.setItem("tabClicked","Search for a source");}});