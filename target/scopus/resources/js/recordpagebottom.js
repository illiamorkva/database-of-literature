;(function(){function r(val,args){for(var x=0;x<args.length;x++){val=val.replace('{'+x+'}',args[x]);}
return val;}
function p(){var val=arguments[0];var ret;if(val.indexOf('{0}')!=-1)
ret=function(){return r(val,arguments);}
else ret=function(){return val;}
for(var x=1;x<arguments.length;x++){for(var a in arguments[x])
ret[a]=arguments[x][a];}
return ret;}
window.messages=({"DOC_CIB_HEADER_MSG_ERRATUMS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> erratums<\/a> matches your query"),"TERM_EMAIL_PREVIEW_TOOLTIP":p("Go back to the previous page"),"CIBO_VIEW_DOC_TOOLTIP":p("View documents (opens in new window)"),"DOCU_TITLE_OVERVIEW_TOOLTIP":p("View all of your Saved lists"),"RESULTS_REFINE_MLT_TITLES_LABEL":p("Shares {1}selected words from the title{2} with: Refined to [{0}] gives:"),"DOC_CIB_HEADER_MSG_LETTERS_TOOLTIP":p("View letters (opens in new window)"),"CIBO_VIEW_AUTHOREVAL_TOOLTIP":p("Click the link to open a new window displaying additional charts and graphs for the selected author."),"DOC_CIB_HEADER_MSG_BOOK_CHAPTERS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> book chapters<\/a> matches your query"),"RESULTS_SOURCE_INFO_TOOLTIP":p("Go to the information page for this source"),"RESULTS_REFINE_MLT_ALL_AUT_LABEL":p("Share {1}authors{2} with: Refined to [{0}] gives:"),"TERM_EMAIL_THANK":p("Thank You for using Scopus."),"RESULTS_QUERYBAR_REFINE_TXT_ALL":p("Refined to [{0}] gives:"),"DOC_CIB_HEADER_MSG_UNDEFINED":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> undefined<\/a> match your query"),"DOC_CIB_HEADER_MSG_SHORT_SURVEY":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> short survey<\/a> match your query"),"DOC_CIB_HEADER_MSG_BOOK":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> book<\/a> match your query"),"DOCSORT_FIELD_SOURCETITLE":p("Source Title (A-Z)"),"RESULTS_QUERYBAR_REFINE_CITES":p("Refined to [{0}] gives:"),"NORES_YOUR_SEARCH":p("Your search was:"),"citedByZeroResults":{"no":{"document":{"available":p("Document not available"),"cited":p("No Documents were found that cite")},"results":p("No results were found on the Web.")},"related":{"documents":p("There are related documents based on")},"alert":{"me":p("{0}Alert me {1} when this document is cited in Scopus")},"and":p("and"),"show":{"keywords":{"tooltip":p("Show all related documents based on shared keywords")},"authors":{"tooltip":p("Show all related documents based on shared authors")}},"cited":{"by":{"results":p("Cited by results")}}},"results_cib_multiple_doc_published_in":p("{0} documents published in {1} matches your query"),"RESULTS_CITED_BY_40":p("Share references with:"),"RESULTS_CITED_BY_41":p("[No Document Found]"),"TERM_EMAIL_BACK":p("&lt;&nbsp;Back"),"results_cib_multiple_article_matches":p("{0} articles matches your query"),"RESU_SHOWREL_TOOLTIP":p("Show all related documents based on shared references"),"SEARCH_CITATION":p("NOTE:  A citation tracker holds a maximum of {0} documents."),"CIBO_VIEW_AUTH_TOOLTIP":p("View authors (opens in new window)"),"DOC_CIB_HEADER_MSG_ERRATUMS_TOOLTIP":p("View erratums (opens in new window)"),"RESU_NOSOURC_AVAILABLE":p("[No source information available]"),"MYLIST_POPUP_CANCEL":p("Cancel"),"EMAIL_RECOM_1":p("Recommended Documents on Scopus"),"RESULTS_DOCUMENT_HIDDEN":p("Documents"),"SETALERT_LOGIN_COLLAPSE_LOGIN_OPT":p("Collapse options"),"CIBO_CITESCORE":p("CiteScore ({0}) : {1} "),"DOC_CIB_HEADER_MSG_CONFERENCE_PAPERS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> conference papers<\/a> matches your query"),"result":{"search":{"restore":{"confirm":p("Restoring to original settings will put the refine categories in default order. "),"success":p("Your Settings have successfully been saved to your Profile.")},"alert":{"button":p("Test Search"),"edit":p("Update Search",({"title":p("Update Search")}))},"sort":{"noofresults":p("# of results"),"alp":p("Alphabet"),"value":{"A":p("A"),"other":p("Other"),"B":p("B"),"C":p("C"),"D":p("D"),"E":p("E"),"F":p("F"),"G":p("G"),"H":p("H"),"I":p("I"),"J":p("J"),"K":p("K"),"L":p("L"),"M":p("M"),"N":p("N"),"O":p("O"),"P":p("P"),"Q":p("Q"),"R":p("R"),"S":p("S"),"T":p("T"),"U":p("U"),"V":p("V"),"W":p("W"),"X":p("X"),"Y":p("Y"),"Z":p("Z")},"undefined":p("Undefined")},"abstractretreiving":p("Retrieving"),"restore2":p("Do you want to proceed?"),"cid":{"in":p("in"),"by":p("by"),"match":p("match"),"published":p("published"),"matches":p("matches")}}},"RESULTS_REFINE_MLT_KEYS_LABEL":p("Shares {1}selected keywords{2} with: Refined to [{0}] gives:"),"RESULTS_CITED_BY_MLT_9":p("Shares {0}references{1} with:"),"DOC_CIB_HEADER_MSG_UNDEFINED_TOOLTIP":p("View undefined (opens in new window)"),"DOC_CIB_LIMIT_SINGLE_DOC":p("Limit your results to this<a class='cib_Limit' id='cibLimit' href='#'> document only<\/a> "),"RESULTS_CITED_BY_MLT_7":p("Share {0}keywords{1} with:"),"RESULTS_CITED_BY_MLT_8":p("Share {0}selected keywords{1} with:"),"SETALERT_LOGIN_CLOSE_TOOLTIP":p("close"),"PATENT_SHOW_ALL_INFORMATION":p("Show all information"),"MYLIST_POPUP_SAVELIST_BUT":p("Save My list in Scopus"),"DOC_CIB_HEADER_MSG_ERRATUM_TOOLTIP":p("View erratum (opens in new window)"),"RESULTS_OPTIONS_COUNT_REFERENCE_LABEL":p("reference"),"DOC_CIB_HEADER_MSG_UNDEFINEDS_TOOLTIP":p("View undefined (opens in new window)"),"DOCU_VIEWIN_DOC_TOOLTIP":p("View document details (opens in new window)"),"DOCU_TITLE_SAVE_TOOLTIP":p("Save entire list to Saved lists"),"DOC_CIB_HEADER_MSG_UNDEFINEDS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> undefined<\/a> matches your query"),"RESULTS_REFINE_UPTO_IS_CITED_X_TIME":p("Refined to [{0}] up to and including {1} is cited {2} time by:"),"DOC_CIB_HEADER_MSG_PRESS_RELEASES":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> press releases<\/a> matches your query"),"RESULTS_CITED_BY_MLT_1":p("Shares {0}authors{1} with:"),"DOC_CIB_HEADER_MSG_REPORTS_TOOLTIP":p("View reports (opens in new window)"),"RESULTS_CITED_MLT_NO_SEL_REF_LABEL":p("There are no document sharing selected references with:"),"RESULTS_CITED_BY_MLT_2":p("Shares {0}selected authors{1} with:"),"RESULTS_CITED_BY_MLT_5":p("Shares {0}keywords{1} with:"),"RESULTS_CITED_BY_MLT_6":p("Shares {0}selected keywords{1} with:"),"RESULTS_CITED_BY_MLT_3":p("Share {0}authors{1} with:"),"RESULTS_CITED_BY_MLT_4":p("Share {0}selected authors{1} with:"),"RESULTS_UPTO_IS_CITED_X_TIME":p("Up to and including {0} is cited {1} time by:"),"RESULTS_OPTIONS_VIEW_SEC_DOC_TOOLTIP":p("Select to display the secondary results - Secondary documents are not available in the Scopus database, but are records extracted from references in Scopus"),"RESULTS_IN_SCOPUS_ARE_CITED_X_TIMES":p("The {2} selected documents are cited {1} times in Scopus by:"),"DOC_MYLIST_RESULT_2":p("{0} results in this List "),"DOC_MYLIST_RESULT_1":p("{0} result in this List"),"TERM_EMAIL_REQ_FIELD":p("({0}*{1}= Required fields)"),"MYLIST_POPUP_EXPORT_STARTUP":p("Export your list to SciVal"),"SETALERT_LOGIN_CLOSE":p("close"),"DOC_CIB_HEADER_MSG_BUSINESS_ARTICLES":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> business articles<\/a> matches your query"),"EMAIL_SCIWEB_2":p("Scirus Web Results:"),"CIBO_VIEW_OTHER_TOOLTIP":p("View {0} (opens in new window)"),"RESULTS_QUERYBAR_SHOW_AUTH":p("Show author"),"CIBO_ERROR_OCCUR":p("Error occured"),"CIBO_SJR_TOOLTIP":p("SCImago Journal Rank reflects prestige of source: value of weighted citations per document"),"RESULTS_UPTO_ARE_CITED_X_TIMES":p("Up to and including {0} are cited {1} times by:"),"DOC_CIB_HEADER_MSG_LETTER_TOOLTIP":p("View letter (opens in new window)"),"RESULTS_CITED_MLT_NO_TITLE_LABEL":p("There are no document sharing words from the title with:"),"DOCSORT_FIELD_CITEDBY":p("Cited by"),"RESULTS_SRC_BROWSE_QUERY_VOL_AND_ISS":p("&nbsp;in Volume {0}, Issue {1} has:"),"DOC_CIB_HEADER_MSG_ARTICLES":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> articles<\/a> matches your query"),"mylist":{"header":{"deletes":{"alt":p("Delete the selected documents")},"save":p("Save to Saved list",({"alt":p("Save the selected documents to your Saved lists")})),"delete":p("Delete")}},"results_cib_multiple_doc_published_contain":p("{0} documents published containing {1} matches your query"),"DOC_CIB_HEADER_MSG_CONFERENCE_REVIEW":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> conference review<\/a> match your query"),"RESULTS_QUERYBAR_CITE_LABEL_LOWER":p("cite:"),"CIBO_IPP_TOOLTIP":p("Impact per Publication (IPP) measures the ratio of citations per article published in the journal"),"SETALERT_LOGIN_MORE_LOGIN_OPT":p("More login options"),"ABST_THESYST_ABST":p("The system is currently unable to retrieve the abstract."),"RESULTS_CITED_BY_MLT_KEY":p("{0} documents share keywords with:"),"RESULTS_QUERYBAR_REFINE_TXT":p("Refined to [{0}] gives:"),"PATENT_HIDE_ALL_INFORMATION":p("Hide all information"),"JS_FEDER_MYLIST_TEMP_POPUP_HELP_TOOLTIP":p("Learn more about lists (Opens in a new window)"),"results_info_scope_reduction_searchjs":p("If you refine your search results, the documents you have selected will be cleared. Do you want to proceed?."),"RESULTS_OPTIONS_COUNT_DOC_LABEL":p("document"),"RESULTS_QUERYBAR_AUTH_SRCH_LABEL":p("Search {0} in Scopus"),"DOC_CIB_HEADER_MSG_SHORT_SURVEYS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> short surveys<\/a> matches your query"),"DOC_CIB_HEADER_MSG_REVIEWS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> reviews<\/a> matches your query"),"DOCU_YOUCANA_RESTORE":p("You can {0}restore{1} your original list."),"DOC_CIB_HEADER_MSG_ARTICLE_IN_PRESS_TOOLTIP":p("View article in press (opens in new window)"),"EMAIL_RECOMMEN_2":p("Recommended Web Results on Scopus"),"RESULTS_QUERYBAR_MYLIST_DOCS":p("{0} results in this list"),"DOCSORT_FIELD_RELEVANCY_TITLE":p("Sort the document results on relevance."),"RESULTS_SRH_WTH_IN":p("Search within results..."),"results_cib_single_article_matches":p("{0} article match your query"),"RESULTS_REFINE_UPTO_IS_CITED_X_TIMES":p("Refined to [{0}] up to and including {1} is cited {2} times by:"),"DOCU_BACKTO_SAVED_LIST_TOOLTIP":p("Go back to your Saved lists"),"RESULTS_CITED_MLT_NO_REF_LABEL":p("There are no document sharing references with:"),"DOC_CIB_HEADER_MSG_NOTE_TOOLTIP":p("View note (opens in new window)"),"RESULTS_CITED_BY_37":p("<span class=\"resultsCount\">{0}<\/span> documents that cite:"),"DOC_CIB_HEADER_MSG_PRESS_RELEASE_TOOLTIP":p("View press release (opens in new window)"),"EMAIL_SENTTO_5":p("Sent to you by: "),"RESULTS_CITED_BY_39":p("<span class=\"resultsCount\">{0}<\/span> document that cites:"),"RESULTS_CITED_BY_38":p("Shares references with:"),"RESULTS_MLT_KEYS_LABEL":p("Shares {0}selected keywords{1} with:"),"sourceBrowseMetrics":{"documents":p("Documents available for"),"articles":p("Articles in Press available for")},"CIBO_SOURCE_DETAIL_TOOLTIP":p("View {0}&#39s source details (opens in new window)"),"RECORD_SAVED_LIST_NAME_EXISTS":p("<p class=\"savedListErr\">List name already exists. Enter a new name, or use the selector below to add to an existing saved list.<\/p>"),"RESULTS_OPTIONS_COUNT_RESULT_LABEL":p("document result"),"alert":{"message":{"author":{"citation":{"newalert":p("Your Author citation alert has been saved in 'Alerts'.")}},"results":{"newalert":p("Your Search alert has been saved in 'Alerts'."),"editalert":p("Click 'Update Search' to keep this search, click 'Back' to edit the search again.")}}},"RESULTS_QUERYBAR_SEL_AUTH":p("Select author"),"RESULTS_MY_LIST_QUERY_LABEL":p("This list contains:"),"RECORD_SAVELIST_ERROR_MESSAGES_BOTHSELECTED":p("<p class=\"savedListErr\">You have entered a new list name and selected to add documents to a current saved list. You cannot do both actions at once. Please choose one or the other and click Save.<\/p>"),"SEARCH_VIEWSENT_3":p("View search term analysis on Scopus sent on {0}"),"DOCSORT_FIELD_DATEOLD_TITLE":p("Sort the document results on date(Oldest first)."),"RESULTS_CITED_BY_EDIT_REF":p("Edit references"),"RESULTS_QUERYBAR_REFINE_CITE":p("Refined to [{0}] gives:"),"RESULTS_MY_LIST_DOC_REFINE_LABEL":p("{0} result found after Refinement:&nbsp;"),"savesearch":{"message":{"saved":p("Your Search has been saved in My Scopus > Saved searches.")}},"RESULTS_CITED_BY_HIDDEN":p("Cited<br/>by"),"DOC_CIB_HEADER_MSG_REVIEWS_TOOLTIP":p("View reviews (opens in new window)"),"results_cib_showing_single_results":p("(Showing first {0} result)"),"RESU_ARTNO_TOOLTIP":p("Articles not published yet, but available online"),"RECORD_SAVE_TO_LIST_NO_NAME":p("<p class=\"savedListErr\">Enter a name for your list<\/p>"),"SEARCH_NAV_SUBJAREA":p("Subject Area"),"SETALERT_LOGIN_COLLAPSE_LOGIN_OPT_TOOLTIP":p("Collapse options"),"MYLIST_POPUP_SCIVAL_INFO":p("This feature is only available for SciVal subscribers."),"RESULTS_REFINE_MLT_ALL_KEYS_LABEL":p("Shares {1}keywords{2} with: Refined to [{0}] gives:"),"RECORD_NEW_LIST_TXT":p("<p class=\"savedListErr\">Enter name of new list<\/p>"),"referenceMetrics":{"reference":{"are":{"cited":{"by":p("Reference that are cited by",({"the":p("Reference that are cited by the {0} selected documents")}))}},"cited":{"by":p("Reference that is cited by")}},"references":{"are":{"cited":{"by":p("References that are cited by",({"the":p("References that are cited by the {0} selected documents")}))}},"cited":{"by":p("References that are cited by")},"selected":{"document":p("selected documents")}},"refined":p("Refined with:&nbsp;")},"PATENT_HIDE_MORE_INFORMATION":p("Hide information"),"RESULTS_MLT_TITLES_LABEL":p("Shares {0}selected words from the title{1} with:"),"DOC_CIB_HEADER_MSG_REPORT":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> report<\/a> match your query"),"results_cib_limit_multiple_doc":p("Limit your results to these {0} documents only"),"SEARCH_VIEW_2":p("View search term analysis on Scopus"),"CIBO_COMPARE_TOOLTIP":p("Compare this source with other sources"),"RESU_ARTICLE_PRESS":p("Article in Press"),"TERM_EMAIL_HTML":p("HTML only"),"MYLIST_POPUP_SCIVAL_HEADER":p("Save your list in Scopus"),"RESULTS_BOOK_CHAPTER_LABEL":p("Chapter"),"results_cib_single_article_matches_alt":p("View article (opens in new window)"),"RESULTS_QUERYBAR_SHAR_REF":p("Shares {0}references{1} with:"),"DOC_CIB_HEADER_MSG_BOOKS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> books<\/a> matches your query"),"DOC_CIB_HEADER_MSG_CONFERENCE_REVIEW_TOOLTIP":p("View conference review (opens in new window)"),"DOC_CIB_HEADER_MSG_REVIEW":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> review<\/a> match your query"),"RESULTS_QUERYBAR_CITE_LABEL":p("Cite:"),"MYLIST_POPUP_GOBACK_LIST":p("Go back to My list"),"TERM_EMAIL_SEND_TOOLTIP":p("Send"),"RESULTS_CITED_MLT_AUT_LABEL":p("Shares authors with:"),"results_cib_single_doc_published_in":p("{0} document published in {1} match your query"),"RESULTS_OPTIONS_COUNT_RESULTS_LABEL":p("document results"),"DOC_CIB_HEADER_MSG_EDITORIAL":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> editorial<\/a> match your query"),"DOC_CIB_HEADER_MSG_LETTERS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> letters<\/a> matches your query"),"RESULTS_CITED_MLT_SEL_KEY_LABEL":p("Shares selected keywords with:"),"RESULTS_QUERYBAR_SHOW_KEY":p("Show keyword"),"RESULTS_CITED_MLT_NO_KEY_LABEL":p("There are no document sharing keywords with:"),"RESULTS_CITED_MLT_SEL_REF_LABEL":p("Shares selected references with:"),"RESULTS_CITED_BY_EDIT_KEY":p("Edit keywords"),"RESULTS_CITED_BY_MLT_AUT":p("{0} documents share authors with:"),"RESULTS_CITED_BY_SELECT_REF":p("Select references"),"SEARCH_DATE_5":p("Date range {0} to {1}"),"LEFTSIDE_MYAPPLICATION":p("My Applications /"),"RESULTS_MLT_REF_LABEL":p("Share {0}selected references{1} with:"),"DOCU_VIEWIN_AUTHOR":p("[No author name available]"),"PATENT_INFORMATION_LINK_TITLE":p("View patent information (Opens in a new window)"),"DOCSORT_FIELD_OTHER_TITLE":p("Sort on one of the other available options."),"MYLIST_POPUP_RETURN_TOOLTIP":p("Return to Scopus My List"),"TERM_EMAIL_SEND":p("Send"),"DOCU_BACKTO_SAVED_LIST":p("Back to Saved lists"),"RESULTS_MLT_ALL_AUTS_LABEL":p("Shares {0}authors{1} with:"),"DOC_CIB_EXCLUDE_MULTIPLE_DOCS":p("<a class='cib_Exclude' id='cibExclude' href='#'>Exclude these {0} documents<\/a> from your results"),"RESULTS_REFINE_MLT_ALL_KEY_LABEL":p("Share {1}keywords{2} with: Refined to [{0}] gives:"),"MYLIST_POPUP_SAVELIST_MSG":p("Please save My list in Scopus."),"RESULTS_IN_SCOPUS_IS_CITED_X_TIME":p("Is cited {1} time in Scopus by:"),"DOC_CIB_HEADER_MSG_ERRATUM":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> erratum<\/a> match your query"),"DOC_CIB_HEADER_MSG_CONFERENCE_PAPER_TOOLTIP":p("View conference paper (opens in new window)"),"PATENT_BACK_TO_AFFILIATION_DETAILS_PAGE":p("Back to affiliation details"),"MYLIST_POPUP_CANCEL_TOOLTIP":p("Cancel and return to Scopus"),"listnotavailable":{"message":p("The Saved List you are trying to view is no longer available."),"message1":p("You can view all Saved Lists by clicking on My Scopus in the navigation bar.")},"RESULTS_OPTIONS_COUNT_DUMMY_DOCS_LABEL":p("secondary document results"),"SEARCH_NAV_AFFIL":p("Affiliation     "),"SEARCH_SUBJECT":p("Search Term Analyzer from Scopus"),"JS_FEDER_MYLIST_TEMP_POPUP_LOGIN":p("Login"),"RESULTS_CITED_MLT_SEL_TITLE_LABEL":p("Shares selected words from the title with:"),"EMAIL_BACK_TOOLTIP":p("Go back to the previous page"),"RESULTS_REFINE_MLT_AUT_LABEL":p("Share {1}selected authors{2} with: Refined to [{0}] gives:"),"AFFILIATION_PATENTRESULT_8":p("Patent Results"),"SAVELIST_DELETE_TOOLTIP_DISABLE":p("Please Select one or more Saved List(s) below to Delete"),"RECORD_SAVED_LIST_SUCCESS":p("This document was added to {0}. <a href=\"{1}\">View or manage your saved lists.<\/a>"),"DOC_CIB_HEADER_MSG_BOOKS_TOOLTIP":p("View books (opens in new window)"),"RESULTS_OPTIONS_VIZL_RESULTS":p("Analyze search results"),"DOC_CIB_HEADER_MSG_EDITORIALS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> editorials<\/a> matches your query"),"RESU_OPEN_ACCESS":p("Open Access"),"TERM_EMAIL_POLICY":p("Read Privacy Policy"),"RESULTS_REFINE_UPTO_ARE_CITED_X_TIMES":p("Refined to [{0}] up to and including {1} are cited {2} times by:"),"DOC_CIB_HEADER_MSG_EDITORIALS_TOOLTIP":p("View editorials (opens in new window)"),"fastgenericsearchnoresults":{"message":p("Currently we cannot handle this search because it generates too many results"),"message1":p("You can {0} edit your search {1} and try again."),"editsearch":{"title":p("Edit this search")}},"JS_FEDER_MYLIST_TEMP_POPUP_LOGIN_TOOLTIP":p("Login to Scopus"),"DOCU_SAVED_LIST":p("SAVED_LIST( <span class=\"querySrchTerm\">{0}<\/span> )"),"DOC_CIB_HEADER_MSG_ABSTRACT_REPORTS_TOOLTIP":p("View abstract reports (opens in new window)"),"SEARCH_NAV_EXACTKEYWORD":p("Keyword         "),"RESULTS_REFINE_BEF_ARE_CITED_X_TIME":p("Refined to [{0}] before {1} are cited {2} time by:"),"SEARCH_DOCUMENT_6":p("Document results {0}"),"RESULTS_BEF_IS_CITED_X_TIMES":p("Is cited {1} times before {0} by:"),"MYLIST_POPUP_SAVE_LIST":p("Yes, save My list"),"EMAIL_THANK_YOU":p("Thank you for using Scopus."),"DOC_CIB_HEADER_MSG_ARTICLE_IN_PRESS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> article in press<\/a> match your query"),"RESULTS_QUERYBAR_SEL_AUTHS":p("Select authors"),"RESULTS_QUERYBAR_CITED_BY":p("Is cited by:"),"SEARCH_YOUR_4":p("Your query:"),"DOC_CIB_HEADER_MSG_NOTES":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> notes<\/a> matches your query"),"MYLIST_POPUP_EXPORT_TOOLTIP":p("Export your list to SciVal to create a publication set for benchmarking analysis."),"SEARCH_NAV_PUBYEAR":p("Year"),"LEFTSIDE_REFINE":p("Refine results\t "),"RESULTS_MLT_KEY_LABEL":p("Share {0}selected keywords{1} with:"),"JS_FEDER_MYLIST_TEMP_POPUP_HELP":p("Learn more about lists"),"RESULTS_CITED_BY_SELECT_TITLE":p("Select words from the title"),"RESULTS_OPTIONS_VIEW_SCOPUS_DOC_TOOLTIP":p("Back to Scopus documents"),"EMAIL_EMAIL_JOUR_ANA":p("E-mail journal analyzer"),"RESULTS_QUERYBAR_CITES_LABEL_LOWER":p("cites:"),"RESULTS_QUERYBAR_CTO_DOC_SEL":p("{0} document selected"),"TERM_EMAIL_POLICY_TOOLTIP":p("Read Privacy Policy (Opens in a new window)"),"RESULTS_QUERYBAR_CTO_CITEDBY_2":p("Is cited {0} time by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_1":p("Is cited {0} times by:"),"citedby":{"no":{"document":{"cite":p("No documents were found that cite:")}},"patent":{"cite":p("Document that shares references with:")},"keywords":p("Show keywords",({"tooltip":p("search for related documents based on keywords")})),"references":p("Show references",({"tooltip":p("search for related documents based on references")})),"documents":{"cite":p("Documents that cite:")},"document":{"cite":p("Document that cites:")},"patents":{"cite":p("Documents that share references with:")},"authors":p("Show authors",({"tooltip":p("search for related documents based on authors")}))},"CIBO_AFFILIATION":p("Affiliation: "),"RESULTS_QUERYBAR_CTO_CITEDBY_6":p("Is cited {1} time in {0} by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_5":p("Is cited {1} times in {0} by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_4":p("Are cited {0} time by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_3":p("Are cited {0} times by:"),"DOCSORT_FIELD_AUTHDES":p("First Author (Z-A)"),"RECORD_SAVED_LISTITEM_MAXIMUM_LIMIT":p("<p class=\"savedListErr\">The selected documents cannot be added to your saved list. A list can hold a maximum of {0} documents. Please make a smaller selection, delete documents from your saved list, or save the documents to a new list.<\/p>"),"DOC_CIB_HEADER_MSG_REPORT_TOOLTIP":p("View report (opens in new window)"),"RECORD_SAVED_LIST_MAXIMUM_LIMIT":p("<p class=\"savedListErr\">You have reached the maximum number of saved lists({0}). To save a new list you must delete an existing <a href=\"{1}\">Saved List.<\/a>"),"TERM_EMAIL_ADDRESS":p("E-mail address:"),"results_cib_exclude_multiple_doc":p("Exclude these {0} documents from your results"),"RECORD_SAVELIST_ERROR_MESSAGES_EMPTYSUBMIT":p("<p class=\"savedListErr\">Enter a name for your list, or use the selector below to add to an existing saved list.<\/p>"),"SEARCH_NAV_SCOPUSSRCTYPE":p("Source Type     "),"RESULTS_MLT_ALL_AUT_LABEL":p("Share {0}authors{1} with:"),"authorcitation":{"search":{"scopus":p("Search {0} in Scopus")},"rss":{"feed":p("Create Author Citation RSS feed")},"save":{"as":{"alert":p("Save as Alert")}},"email":{"alert":p("E-mail alert for Author Citation")}},"MYLIST_POPUP_NOGOBACK_MSG":p("I do not need to save My list at this time."),"PATENT_BACK_TO_DOCUMENT_RESULTS_PAGE":p("Back to document results"),"RESULTS_BACK_CTO_LABEL":p("Back to Citation Overview"),"RESULTS_REFINE_BEF_ARE_CITED_X_TIMES":p("Refined to [{0}] before {1} are cited {2} times by:"),"SEARCH_NAV_LANGUAGE":p("Language"),"RESULTS_QUERYBAR_CTO_CITEDBY_9":p("Is cited {2} times between {0}-{1} by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_8":p("The {2} selected documents are cited {1} time in {0} by:"),"RESU_SHOWAU_TOOLTIP":p("Show author details"),"RESULTS_QUERYBAR_CTO_CITEDBY_7":p("The {2} selected documents are cited {1} times in {0}  by:"),"PATENT_NUMBER_ON_HOVER_DISPLAY":p("Patent<br/>Number"),"RESULTS_OPTIONS_EXTERNAL_RESULTS":p("View external results"),"TERM_EMAIL_LINK":p("Your e-mail message containing a link to the search term analysis will be sent to {0}"),"SEARH_NO_RESULTS":p("No search results were selected."),"citedBy":{"alert":{"me":p("Alert me when this document is cited in Scopus")}},"selectionpageoutofbounds":{"message":p("Your search found {0} records."),"message2":p("Change the sort order of your results to view more of your search results."),"message1":p("Only the first {0} records can be viewed")},"SOURCEEVALHTML":p("If you have questions about this or other features of Scopus, please visit our <a href=\"../../www.info.scopus.com\">Info site<\/a>."),"RESULTS_QUERYBAR_SEL_REF":p("Select reference"),"EMAIL_THANK_USING":p("Thank you for using Scopus."),"EMAIL_SCOPUSA_13":p("Scopus. All rights reserved. Any unauthorized use, reproduction, or transfer of this message or its contents, in any medium, is strictly prohibited. Scopus ï¿½ is a registered trademark of Elsevier B.V."),"CIBO_SOURCE_DETAIL":p("View {0}&#39s source details"),"RESULTS_REFINE_MLT_REFS_LABEL":p("Shares {1}selected references{2} with: Refined to [{0}]  gives:"),"PATENT_RESULT_TEXT":p("patent result"),"results_cib_showing_multiple_results":p("(Showing first {0} results)"),"RESULTS_CITED_MLT_NO_SEL_AUT_LABEL":p("There are no document sharing selected authors with:"),"DOC_CIB_HEADER_MSG_REVIEW_TOOLTIP":p("View review (opens in new window)"),"PATENT_SHOW_MORE_INFORMATION":p("Show more information"),"LIMI_LIMISUB_TOOLTIP":p("Limit to selected items: Subscription required"),"DOC_CIB_HEADER_MSG_CONFERENCE_PAPERS_TOOLTIP":p("View conference papers (opens in new window)"),"DOCSORT_FIELD_AUTHDES_TITLE":p("Sort the document results on First Author."),"RESULTS_REFINE_MLT_ALL_TITLES_LABEL":p("Shares {1}words from the title{2} with: Refined to [{0}] gives:"),"INWARD_SCOPUS_JOURNAL":p("Scopus Journal Analyzer"),"DOCSORT_FIELD_AUTHASC_TITLE":p("Sort the document results on First Author."),"MYLIST_POPUP_ERROR_MSG":p("<div id=\"errorMsgContainer\" role=\"alert\" aria-live=\"assertive\"><span class=\"ariaHidden hidden-label\">Error message.<\/span><span>All documents in your list were published prior to 1996 and cannot be sent to SciVal.<\/span><p>Please conduct a new search and add documents to your list that were published after 1995 in order to benchmark in SciVal.<\/p><\/div>"),"DOC_CIB_HEADER_MSG_BUSINESS_ARTICLES_TOOLTIP":p("View business articles (opens in new window)"),"RESULTS_CITED_MLT_NO_SEL_KEY_LABEL":p("There are no document sharing selected keywords with:"),"results_cib_single_doc_published_contain":p("{0} document published containing {1} match your query"),"DOCSORT_FIELD_DATEOLD":p("Date (Oldest)"),"JS_FEDER_MYLIST_TEMP_POPUP_REGISTER":p("Register"),"CIBO_CLOSEPREV_TOOLTIP":p("Close preview"),"CIBO_AFFILI_DETAIL":p("View {0}&#39s affiliation details"),"SEARCH_NAV_STATUSTYPE":p("Result Type"),"results_cib_single_doc_published_by":p("{0} document published by {1} match your query"),"RESULTS_OPTIONS_COUNT_REFERENCES_LABEL":p("references"),"RESULTS_QUERYBAR_CTO_CITEDBY_test4":p("Refined to [{0}] after {1} are cited {2} time by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_test3":p("Refined to [{0}] after {1} are cited {2} times by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_test2":p("Refined to [{0}] after {1} is cited {2} time by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_test1":p("Refined to [{0}] after {1} is cited {2} times by:"),"DOC_CIB_HEADER_MSG_LETTER":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> letter<\/a> match your query"),"DOC_CIB_HEADER_MSG_BUSINESS_ARTICLE":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> business article<\/a> match your query"),"MYLIST_POPUP_CONTINUE_TOOLTIP":p("Send list to SciVal"),"RESULTS_QUERYBAR_MYLIST_REFINE_TXT":p("Refinement to [{0}] gives:"),"RESULTS_CITED_MLT_NO_AUT_LABEL":p("There are no document sharing authors with:"),"RESU_DOCLINK_TOOLTIP":p("Show document details"),"results_cib_limit_single_doc":p("Limit your results to this document only"),"EMAIL_YOUR_JOURNAL":p("Your e-mail message containing the Journal Analyzer will be sent to <b>{0}<\/b>"),"RESULTS_CITED_MLT_NO_SEL_TITLE_LABEL":p("There are no document sharing selected words from the title with:"),"RESULTS_QUERYBAR_REFINE_SHARE_REF":p("Share references with: Refined to [{0}] gives:"),"RESULTS_SRC_BROWSE_QUERY_VOL":p("&nbsp;in Volume {0} has:"),"RESULTS_BEF_ARE_CITED_X_TIMES":p("The {2} selected documents are cited {1} times before {0} by:"),"EMAIL_WEHOPET_9":p("We hope that this information is useful to you."),"RESULTS_MLT_ALL_TITLES_LABEL":p("Shares {0}words from the title{1} with:"),"CIBO_IPP":p("IPP ({0}) : {1}"),"document":{"single":{"result":{"found":p("{0} result found")}},"multiple":{"results":{"found":p("{0} results found")}},"results":{"single":{"inward":{"search":{"query":p("{0} result found after Refinement: {1}")}}},"search":{"authors":p("Search {0} in Scopus")},"viewmdl":{"alt":p("View in MDL")},"heading":p("document results"),"display":{"per":{"page":p("<label>Display<\/label> {0} <label>results per page<\/label>")}},"multiple":{"inward":{"search":{"query":p("{0} results found after Refinement: {1}")}}},"header":{"page":p("Page: {0} of {1}")}}},"RESULTS_MLT_AUTS_LABEL":p("Shares {0}selected authors{1} with:"),"DOC_CIB_HEADER_MSG_CONFERENCE_REVIEWS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> conference reviews<\/a> matches your query"),"RESULTS_QUERYBAR_ISCITEDBY_LABEL":p("Is cited by:"),"RESULTS_UPTO_ARE_CITED_X_TIME":p("Up to and including {0} are cited {1} time by:"),"RESULTS_REFINE_MLT_ALL_REFS_LABEL":p("Shares {1}references{2} with: Refined to [{0}] gives:"),"DOC_CIB_HEADER_MSG_PRESS_RELEASES_TOOLTIP":p("View press releases (opens in new window)"),"RESU_NOTITLE_AVAIL":p("[No title available]"),"inwardScopusResultsMetrics":{"result":{"found":p("{0} result found")},"view":{"in":{"mdl":p("View in MDL")}},"results":{"found":p("{0} results found")}},"JS_FEDER_MYLIST_TEMP_POPUP_CLOSE":p("Close"),"noresults":{"no":{"references":p("There are no References that are cited by"),"references_1":p("There are no References that are cited by the {0} selected documents"),"document":{"cite":p("There are no Documents that cite the {0} selected documents")}},"were":{"found":p("{0} {1} results {2} were found in reference lists.")},"additional":{"results":p("Additional results")},"was":{"found":p("{0} {1} result {2} was found in reference lists.")}},"RESULTS_SAVED_LIST_LABEL":p("Saved list - {0}"),"CIBO_VIEW_AUTHOREVAL":p("View in Analyze author output "),"RESULTS_QUERYBAR_CTO_DOCS_SEL":p("{0} documents selected"),"ABST_PLEASET_LATER":p("Please try again later."),"DOC_CIBO_HEADER":p("(Showing first {0} results)"),"RESULTS_REFINE_MLT_ALL_REF_LABEL":p("Share {1}references{2} with: Refined to [{0}]  gives:"),"results_cib_exclude_single_article":p("Exclude this article from your results"),"fastspecialcharwildcardseqsearchnoresults":{"message":p("Your search contains syntax which is not supported"),"message2":p("Please {0} edit your search {1} and resubmit it"),"message1":p("It is currently not possible to search for a special character followed by a wildcard. Please edit your search and resubmit it")},"RESULTS_REFINE_MLT_ALL_AUTS_LABEL":p("Shares {1}authors{2} with: Refined to [{0}] gives:"),"CIBO_SAUTHOR_DETAIL_TOOLTIP":p("View {0}&#39s author details (opens in new window)"),"SOURCE_SRCH_RES_QRYBR_TXT":p("Source:"),"EMAIL_RECOMMEND_3":p("Recommended Patent Results on Scopus"),"results_cib_exclude_multiple_article":p("Exclude these {0} articles from your results"),"PATENT_RESULTS_TEXT":p("patent results"),"RESULTS_REFINE_MLT_ALL_TITLE_LABEL":p("Share {1}words from the title{2} with:Refined to [{0}] gives:"),"MYLIST_POPUP_NOGOBACK_LIST":p("No, go back to My list"),"SRCH_RES_SEC_RES":p("Results from references for your query:"),"DOC_CIB_HEADER_MSG_ABSTRACT_REPORTS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> abstract reports<\/a> matches your query"),"RESULTS_QUERYBAR_REFINE_ARE_CITEDBY":p("Refined to [{0}] gives:"),"RESULTS_CITED_MLT_SEL_AUT_LABEL":p("Shares selected authors with:"),"RESULTS_REFINE_MLT_TITLE_LABEL":p("Share {1}selected words from the title{2} with: Refined to [{0}] gives:"),"DOC_CIB_HEADER_MSG_BUSINESS_ARTICLE_TOOLTIP":p("View business article (opens in new window)"),"RESULTS_CITED_MLT_KEY_LABELE":p("Shares keywords with:"),"RESULTS_OPTIONS_VIEW_SEC_DOC":p("View secondary documents"),"DOCU_VIEWIN_NO_DOC":p("[No title available]"),"RESULTS_OPTIONS_COUNT_DUMMY_DOC_LABEL":p("secondary document result"),"results":{"search":{"noresultsfound_edit":p("You can go back to edit your search or click on {0} My List {1} to restore the list"),"refineresult":{"footer":{"savesetting":p("Save settings"),"restoresetting":p("Restore original settings"),"export":p("Export refine"),"exportcsv":{"alt":p("Export all of the refine values to a CSV file")}},"refineresult":p("Refine"),"limit":p("Limit to",({"alt":p("Limit to selected items")})),"exclude":p("Exclude",({"alt":p("Exclude selected items")}))},"within":p("Search within results",({"search":p("Search"),"box":p("Search within results textbox")})),"navigator":{"showPreview":p("Show preview"),"norefine":p("No Refine categories have been selected."),"analyseSource":p("Analyze search results",({"alt":p("View charts and graphs related to this results list and selected sources")})),"viewmore":p("View more"),"go":{"alt":p("Sort on {0}")},"viewfewer":p("View fewer"),"sort":p("Sort on:"),"close":{"alt":p("Click to close")},"open":{"alt":p("Click to open")},"viewall":p("View more")},"noresultsfound":p("No documents were found."),"leftsidebar":{"hide":{"alt":p("Click to hide")},"show":{"alt":p("Select to display Refine results options")},"hidesub":{"alt":p("Click to hide: Subscription required")}}},"jumptopage":{"error":{"invalidpagenumber":p("Only numbers are allowed in Page."),"invalidpagenumber1":p("Please type in the number of the page you would like to jump to and press <b>Go.<\/b> ")}},"deleteconfirm":{"no":{"selectionjs":p("Are you sure you want to delete the selected document?")}},"deletesconfirm":{"no":{"selectionjs":p("Are you sure you want to delete the selected documents?")}},"toomany":{"docs":{"selected":p("Too many documents were selected.")}},"error":{"maxexport":{"exc":p("<p>NOTE: You have selected {0} documents. You can export citation information (in CSV format) for up to 20,000 documents.<\/p><p><b>To export the first 20,000 documents<\/b>, click OK.<\/p>")},"max":{"aut":{"too":{"large":p("The number of documents by this author is too large.")}},"download":{"exc":p("You can download a maximum of {0} documents.")},"print":{"exc":p("Only the first {0} documents have been selected for printing.",({"toomany":p("You have selected too many documents to print.")}))},"citedby":{"exc":p("Citing documents are only displayed for the first {0} documents.")},"refs":{"exc":p("References are only displayed for the first {0} documents.",({"aut":p("Only the first {0} documents were used to create the reference list."),"gaut":p("Only the first {0} documents were used to create the reference list.",({"large":p("The number of documents by these authors is too large.")}))}))},"list":{"exc":p("A list can hold a maximum of {0} documents.")},"export":{"exc":{"toomany":p("You have selected too many documents to export.")}},"email":{"exc":p("Only the first {0} documents will be selected for e-mailing.",({"toomany":p("You have selected too many documents to e-mail.")}))}},"too":{"many":{"docs":{"selected":p("Too many documents were selected.")}}},"repeat":{"limitto":{"cluster":{"selection":p("You tried to limit your results by {0} for a second time.")}}}},"message":{"no":{"abstract":{"available":p("No abstract available")}}},"cib":{"no":{"affiliation":p("[No affiliation available]")}}},"RESULTS_SRC_BROWSE_QUERY_YR":p("&nbsp;in Publication Year {0} has:"),"RESULTS_OPTIONS_COUNT_DOCS_LABEL":p("documents"),"EMAIL_PATENT_3":p("Patent Results:"),"RESULTS_IN_SCOPUS_ARE_CITED_X_TIME":p("The {2} selected documents are cited {1} time in Scopus by:"),"RESULTS_MLT_REFS_LABEL":p("Shares {0}selected references{1} with:"),"DOC_CIB_HEADER_MSG_EDITORIAL_TOOLTIP":p("View editorial (opens in new window)"),"CIBO_AFFILI_DETAIL_TOOLTIP":p("View {0}&#39s affiliation details (opens in new window)"),"CIBO_NORESUL_FOUND":p("No results found"),"SEARCH_CITATION_TRACTER":p("Select OK to proceed to the citation tracker for the first {0} documents or Cancel if you do not want to continue."),"RESULTS_QUERYBAR_CTO_CITEDBY_15":p("The {2} selected documents are cited {1} times after {0} by:"),"preview":{"analyze":{"search":{"results":{"tooltip":p("Analyze search results: Subscription required")}}},"results":{"subscription":{"required":p(":&nbsp;Subscription required")}}},"RESULTS_QUERYBAR_CTO_CITEDBY_14":p("Is cited {1} time after {0} by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_13":p("Is cited {1} times after {0} by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_12":p("The {3} selected documents are cited {2} time between {0}-{1} by:"),"DOC_CIB_HEADER_MSG_BOOK_CHAPTER_TOOLTIP":p("View book chapter (opens in new window)"),"RESULTS_BEF_IS_CITED_X_TIME":p("Is cited {1} time before {0} by:"),"RESULTS_QUERYBAR_CTO_CITEDBY_16":p("The {2} selected documents are cited {1} time after {0} by:"),"DOC_CIB_HEADER_MSG_ARTICLE":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> article<\/a> match your query"),"EMAIL_DOCUMENT":p("E-mail document"),"RESULTS_QUERYBAR_CTO_CITEDBY_11":p("The {3} selected documents are cited {2} times between {0}-{1} by:"),"DOC_CIB_HEADER_MSG_ARTICLE_IN_PRESSS_TOOLTIP":p("View article in presss (opens in new window)"),"RESULTS_QUERYBAR_CTO_CITEDBY_10":p("Is cited {2} time between {0}-{1} by:"),"PATENT_INFORMATION_LINK_LEXISNEXIS_TITLE":p("View patent information on LexisNexis (Opens new window)"),"EMAIL_BODY_TEXT":p("Body Text:"),"RESULTS_CITED_BY_EDIT_AUT":p("Edit authors"),"RESULTS_REFINE_MLT_AUTS_LABEL":p("Shares {1}selected authors{2} with: Refined to [{0}] gives:"),"multipleCitedbyMetrics":{"reSelect":{"documents":p("Re-select documents")},"documents":{"cite":p("Documents that cite the {0} selected document"),"cite1":p("Documents that cite the {0} selected documents")},"document":{"cite":p("Document that cite the {0} selected document"),"cite1":p("Document that cite the {0} selected documents")}},"DOC_CIB_HEADER_MSG_ABSTRACT_REPORT_TOOLTIP":p("View abstract report (opens in new window)"),"MYLIST_POPUP_CLOSE_TOOLTIP":p("Close this window and return to My List"),"results_cib_exclude_single_doc":p("Exclude this document from your results"),"ctoCitedByWhenMetrics":{"author":{"link":{"tooltip":p("Search for all articles by this author")}},"title":p("Citation Overview results")},"MYLIST_POPUP_GOBACK_MSG":p("You can go back to your list and refine before sending to SciVal as a Publication Set, or if you are not a SciVal subscriber, you can continue your work in Scopus."),"DOCU_SAVE_LIST_TOOLTIP":p("Save complete list to 'Saved Lists' under 'Settings'"),"CIBO_SNIP":p("SNIP ({0}) : {1} "),"RESU_NOINFO_AVAILABLE":p("No information available"),"DOC_CIB_HEADER_MSG_BOOK_CHAPTER":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> book chapter<\/a> match your query"),"JS_FEDER_MYLIST_TEMP_POPUP_REGISTER_TOOLTIP":p("Register a username and password for using alerts and other personal features"),"RESULTS_CITED_BY_MLT_REF":p("{0} documents share references with:"),"RESU_PAGE_RANGE":p("pp."),"RESULTS_REFINE_UPTO_ARE_CITED_X_TIME":p("Refined to [{0}] up to and including {1} are cited {2} time by:"),"EMAIL_BACK":p("Back"),"DOC_CIB_HEADER_MSG_CONFERENCE_REVIEWS_TOOLTIP":p("View conference reviews (opens in new window)"),"MYLIST_POPUP_CONFIRM_MSG":p("Would you like to save your list in Scopus to retain all pre-1996 data and <\/br> other listed benefits?  You must be logged into Scopus to continue."),"EMAIL_RECOMMENDED_4":p("Recommended Documents, Web Results and Patent Results on Scopus"),"RESULTS_QUERYBAR_SHOW_REF":p("Show reference"),"DOC_CIB_HEADER_MSG_6":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> document<\/a> published containing {2} match your query"),"QUERYBAR_AUTHREF":p("Cites:"),"RESULTS_UPTO_IS_CITED_X_TIMES":p("Up to and including {0} is cited {1} times by:"),"RESULTS_MLT_ALL_KEY_LABEL":p("Share {0}keywords{1} with:"),"DOC_CIB_HEADER_MSG_ARTICLE_TOOLTIP":p("View article (opens in new window)"),"DOC_CIB_HEADER_MSG_NOTES_TOOLTIP":p("View notes (opens in new window)"),"RESULTS_QUERYBAR_MYLIST_DOC":p("{0} result in this list"),"RESULTS_CITED_BY_MLT_18":p("{0} document that cites"),"DOC_CIB_HEADER_MSG_BOOK_CHAPTERS_TOOLTIP":p("View book chapters (opens in new window)"),"RESULTS_CITED_BY_MLT_19":p("Shares references with:"),"RESULTS_CITED_BY_MLT_16":p("Share {0}selected words from the title{1} with:"),"RESULTS_CITED_BY_MLT_17":p("{0} documents that cite"),"RESULTS_CITED_BY_MLT_14":p("Shares {0}selected words from the title{1} with:"),"EMAIL_IFURL_4":p("NOTE: If the URLs in this e-mail are not active hyperlinks, copy and paste the url into the address/location box in your browser."),"RESULTS_CITED_BY_MLT_15":p("Share {0}words from the title{1} with:"),"JS_FEDER_MYLIST_TEMP_POPUP_MSG":p("When logged in, registered Scopus users<br> can save up to 50 lists for future use"),"RESULTS_CITED_BY_MLT_12":p("Share {0}selected references{1} with:"),"results_cib_limit_single_article":p("Limit your results to this article only"),"RESULTS_QUERYBAR_SHOW_REFS":p("Show references"),"RESULTS_CITED_BY_MLT_13":p("Shares {0}words from the title{1} with:"),"SEARCH_NAV_DOCTYPE":p("Document Type "),"RESULTS_CITED_BY_MLT_10":p("Shares {0}selected references{1} with:"),"DOC_CIB_HEADER_MSG_1":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> document<\/a> published in {2} match your query"),"RESULTS_CITED_BY_MLT_11":p("Share {0}references{1} with:"),"EMAIL_EMAIL_JOURNAL":p("E-mail Journal Analyzer"),"RESULTS_QUERYBAR_DOC_REF_SELECTED":p("The {0} selected document cite:"),"DOC_CIB_HEADER_MSG_4":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> document<\/a> published by {2} match your query"),"results_cib_multiple_doc_published_by":p("{0} documents published by {1} matches your query"),"DOC_CIB_HEADER_MSG_5":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> documents<\/a> published containing {2} matches your query"),"DOC_CIB_HEADER_MSG_2":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> documents<\/a> published in {2} matches your query"),"SOURCE_JOURNALANAL_2":p("View Journal Analyzer on Scopus"),"RESULTS_CITED_BY_EDIT_TITLE":p("Edit words from the title"),"DOC_CIB_HEADER_MSG_3":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> documents<\/a> published by {2} matches your query"),"RESU_SRCLINK_TOOLTIP":p("Show source title details"),"RESULTS_QUERYBAR_SHAR_AUT":p("Shares authors with:"),"RESULTS_QUERYBAR_DOCS_SELECTED":p("The {0} selected documents are cited by:"),"DOC_CIB_HEADER_MSG_PRESS_RELEASE":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> press release<\/a> match your query"),"DOC_CIB_HEADER_MSG_BOOK_TOOLTIP":p("View book (opens in new window)"),"RESU_NOABSTR_AVAILABLE":p("[No abstract available]"),"SHARED_WEBRES_40":p("Web Results"),"EMAIL_SCODO_1":p("Scopus Documents:"),"RESULTS_MLT_AUT_LABEL":p("Share {0}selected authors{1} with:"),"RESULTS_QUERYBAR_SEL_KEYS":p("Select keywords"),"RESU_AUTHOR_NOT_AVA":p("[No author name available]"),"MYLIST_POPUP_CONTINUE_MSG":p("Scopus will only send article information published after 1995 for SciVal benchmarking and analysis."),"MYLIST_POPUP_EXPORT_MSG":p("Export a Scopus list as a Publication Set to SciVal and use <\/br> benchmarking tools for further evaluation"),"RESULTS_CITED_BY_MLT_27":p("documents sharing selected keywords with:"),"RESULTS_CITED_BY_MLT_28":p("documents sharing selected authors with:"),"RESULTS_CITED_BY_MLT_25":p("documents sharing selected words from the title with:"),"RESULTS_CITED_BY_MLT_26":p("documents sharing selected references with:"),"RESULTS_QUERYBAR_SHOW_KEYS":p("Show keywords"),"DOC_CIB_HEADER_MSG_NOTE":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> note<\/a> match your query "),"RESULTS_CITED_BY_MLT_23":p("There are no document sharing keywords with:"),"RESULTS_CITED_BY_MLT_24":p("There are no document sharing authors with:"),"RESULTS_CITED_BY_MLT_21":p("There are no document sharing words from the title with:"),"RESULTS_CITED_MLT_REF_LABEL":p("Shares references with:"),"RESULTS_CITED_BY_MLT_22":p("There are no document sharing references with:"),"RESULTS_MLT_ALL_TITLE_LABEL":p("Share {0}words from the title{1} with:"),"RESULTS_CITED_BY_MLT_20":p("Share references with:"),"RESULTS_OPTIONS_VIEW_SCOPUS_DOC":p("View Scopus documents"),"EMAIL_PLEASE_COMPLETE":p("Please complete the form below and click <b>Send<\/b>."),"RESULTS_QUERYBAR_SHAR_KEY":p("Shares keywords with:"),"CIBO_SNIP_TOOLTIP":p("Source normalized impact per paper: corrects for differences in the frequency of citation across research fields"),"TERM_EMAIL_CURRENT":p("E-mail the current search term analysis"),"MYLIST_POPUP_CONTINUE_SCIVAL":p("Continue to SciVal"),"TERM_EMAIL_ANALYSIS":p("Search term analysis for {0}"),"RESULTS_CITED_MLT_TITLE_LABEL":p("Shares words from the title with:"),"DOC_CIB_HEADER_MSG_ARTICLE_IN_PRESSS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> article in presss<\/a> matches your query"),"DOC_CIB_LIMIT_MULTIPLE_DOCS":p("Limit your results to these<a class='cib_Limit' id='cibLimit' href='#'> {0} documents only<\/a>"),"RESULTS_BOOK_LABEL":p("Book"),"DOCSORT_FIELD_SOURCETITLE_TITLE":p("Sort the document results on Source Title."),"EMAIL_SEAPOWER_3":p("search powered by Scirus"),"SEARCH_THESEARCH_7":p("The search term analysis will be available until {0}"),"RESULTS_QUERYBAR_DOC_SELECTED":p("The {0} selected document is cited by:"),"DOCSORT_FIELD_RELEVANCY":p("Relevance"),"DOC_CIB_HEADER_MSG_REPORTS":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> reports<\/a> matches your query"),"RESULTS_QUERYBAR_SEL_REFS":p("Select references"),"RESULTS_IN_SCOPUS_IS_CITED_X_TIMES":p("Is cited {1} times in Scopus by:"),"EMAIL_ITHOU_JOURNAL":p("I thought you would find this Journal Analyzer useful"),"CIBO_SAUTHOR_DETAIL":p("View {0}&#39s author details"),"CIBO_VIEW_AFF_TOOLTIP":p("View affiliations (opens in new window)"),"DOCU_MYLIST_HEADER":p("Temporary list for {0}"),"RESULTS_MLT_ALL_REF_LABEL":p("Share {0}references{1} with:"),"RESULTS_CITED_BY_MLT_49":p("There are no document sharing selected references with:"),"CIBO_SJR":p("SJR ({0}) : {1} "),"RESULTS_CITED_BY_MLT_47":p("There are no document sharing selected words from the title with:"),"PRINT_SEARCH_1":p("search powered by "),"RESULTS_CITED_BY_MLT_48":p("Shares references with:"),"RESULTS_CITED_BY_MLT_45":p("There are no document sharing selected keywords with:"),"listerror":{"zero":{"results":p("You have 0 documents in your temporary list.")},"no":{"document":{"message4":p("<ul class=\"myListDesc\"><li>This page shows the <b>temporary list of documents<\/b> you can create during a Scopus session.<\/li><li>You can work with this list the same way you work with any search results list - output the list, track citations, refine the list, and so on.<\/li><\/ul>"),"message3":p("To completely delete this list, select this list in  the {0}overview{1} and click Delete."),"message6":p("You must be logged in to save documents from your list or to work with your account {0}Saved lists{1}.<\/br>If you have previously saved lists for your account, you can access them after logging in from the main Lists menu or via My Scopus and clicking {0}Saved lists{1}."),"message5":p("To save documents to a saved list:"),"message":p("To add documents to your temporary list:"),"message2":p("What is temporary list?"),"message1":p("<ul class=\"addDocStepsList\"><li>Perform a search<\/li><li> From your results list, select the documents you want in your temporary list<\/li> <li>From the menu on your search results list, select Add to list<\/li><\/ul>")}},"view":{"saved":{"list":p("View saved lists or login")}},"saved":{"list":p("Saved list")}},"RESULTS_CITED_BY_MLT_46":p("documents sharing words from the title with:"),"DOCSORT_FIELD_DATENEW_TITLE":p("Sort the document results on date. "),"RESULTS_CITED_BY_MLT_43":p("There are no document sharing selected authors with:"),"RESULTS_CITED_BY_MLT_44":p("Shares keywords with:"),"RESULTS_CITED_BY_MLT_42":p("Shares authors with:"),"CIBO_COMPARE":p("Compare with other sources"),"DOC_CIB_EXCLUDE_SINGLE_DOC":p("<a class='cib_Exclude' id='cibExclude' href='#'>Exclude this document<\/a> from your results"),"SHARED_MAILSENT_33":p("This email has been sent to you by Scopus ï¿½ , a product of Elsevier B.V., Radarweg 29, 1043NX Amsterdam, The Netherlands, Tel.+31 20 485 3911."),"RESU_SHOW_ABSTRACT":p("Show abstract"),"results_cib_multiple_article_matches_alt":p("View articles (opens in new window)"),"DOCSORT_FIELD_DATENEW":p("Date "),"RESULTS_QUERYBAR_SHOW_AUTHS":p("Show authors"),"SEARCH_NAV_AUTHOR_NAME_AND_ID":p("Author Name "),"DOCSORT_FIELD_CITEDBY_TITLE":p("Sort the document results on Cited by count."),"RESULTS_SRC_BROWSE_QUERY_BEF":p("&nbsp;in {0} and before has:"),"RESULTS_SOURCE_TXT":p("Source"),"RESU_RELATED_DOC":p("Related documents"),"DOC_CIB_HEADER_MSG_SHORT_SURVEYS_TOOLTIP":p("View short surveys (opens in new window)"),"CIBO_HELP_TOOLTIP":p("Learn more about CiteScore, SCImago Journal Rank, and Source Normalized Impact per Paper. (Opens in a new window)"),"DOC_CIB_HEADER_MSG_DYNAMIC_VALUES":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> {2}s<\/a> matches your query"),"RESULTS_CITED_BY_SELECT_AUT":p("Select authors"),"RESULTS_QUERYBAR_ALT_SPELL":p("Show results for:&nbsp;"),"RESULTS_MLT_TITLE_LABEL":p("Share {0}selected words from the title{1} with:"),"DOC_CIB_HEADER_MSG_ARTICLES_TOOLTIP":p("View articles (opens in new window)"),"RESULTS_REFINE_BEF_IS_CITED_X_TIME":p("Refined to [{0}] before {1} is cited {2} time by:"),"RESULTS_QUERYBAR_CITES_LABEL":p("Cites:"),"RESULTS_QUERYBAR_REFINE_IS_CITEDBY":p("Refined to [{0}] gives:"),"DOC_CIBO_HEADER_1":p("(Showing first {0} result)"),"SOURCE_JOURNALAN_1":p("Your Journal Analyzer from Scopus may be accessed from the following link:"),"RESULTS_QUERYBAR_SEL_KEY":p("Select keyword"),"RESULTS_MY_LIST_DOCS_REFINE_LABEL":p("{0} results found after Refinement:&nbsp;"),"DOCSORT_FIELD_AUTHASC":p("First Author (A-Z)"),"JS_FEDER_FEDERATED_OUTWARD_LINK_TOOLTIP":p("(opens in a new window)"),"DOCU_TITLE_SAVE":p("Save this list"),"RESULTS_MLT_ALL_REFS_LABEL":p("Shares {0}references{1} with:"),"RESULTS_QUERYBAR_DOCS_REF_SELECTED":p("The {0} selected documents cite:"),"TERM_EMAIL_FORMAT":p("E-mail format:"),"DOCU_TITLE_OVERVIEW":p("View all Saved lists"),"SEARCH_THEFOLL_1":p("The following search term analysis can be accessed from the following link:"),"RESULTS_OPTIONS_EXTERNAL_RESULTS_TOOLTIP":p("Click to select one of the available non-scopus results options."),"RESULTS_QUERYBAR_ISCITEDBY_LABEL_LOWER":p(""),"SEARCH_NAV_EXACTSRCTITLE":p("Source Title    "),"AUTHOR_MAILTO_20":p("mailto:"),"DOC_CIB_HEADER_MSG_DYNAMIC_VALUES_TOOLTIP":p("View {0}s (opens in new window)"),"RESULTS_QUERYBAR_REFINE_SHARES_REF":p("Shares references with: Refined to [{0}] gives:"),"SEARCH_NAV_COUNTRY_NAME":p("Country/Territory         "),"RESU_HIDE_ABSTRACT":p("Hide abstract"),"resultlist":{"footer":{"topofpage":p("Top of page"),"page":{"text":p("Page")},"resultsperpage":{"display":p("Display&nbsp;"),"go":p("Go"),"text":p("results per page")}},"header":{"unselectall":{"tooltip":p("Unselect all results")},"more":{"TOOLTIP":p("Show more available options")},"document":p("document results"),"previousnextbar":{"next":p("Next &gt;",({"alt":p("Next page")})),"previous":p("&lt; Previous",({"alt":p("Previous page")})),"of":p("&nbsp;of"),"go":p("Go"),"page":p("Page:&nbsp;"),"gotopage":p("Go to page:&nbsp;",({"alt":p("Go to page")}))},"unselectpage":{"tooltip":p("Unselect page results")},"abstract":{"hideall":p("Hide all abstracts"),"showall":p("Show all abstracts")},"list":p("list"),"menu":p("More..."),"showAllPage":{"bubble":{"title":p("click to select all or select page results")}},"selectpage":p("Select page",({"tooltip":p("Select page results")})),"checkbox":{"text":{"all":p("All"),"page":p("Page")}},"databutton":{"download":p("Download",({"ieedge":p("Document download is not supported on IE Edge. <\/br>Please use Firefox or IE 9, 10 or 11."),"alt":p("Download the abstract or full text of the selected document(s), depending on availability"),"chrome45":p("Document download is not supported on Chrome 45 or <\/br>higher. Please use Firefox or IE 9, 10 or 11.",({"title":p("Browser version issue"),"ok":p("Ok"),"close":p("Close")}))})),"print":p("Print",({"alt":p("Print the selected documents")})),"citedby":p("View Cited by",({"alt":p("View documents citing the selected documents")})),"bibliography":p("Create bibliography",({"alt":p("Create a bibliography for the selected documents")})),"removeAuthorDoc":p("Request to remove documents from author",({"alt":p("Click to request to remove the selected documents from this author")})),"mylist":p("Add to List",({"loggedIn":p("Save to list"),"alt":p("Add these documents to a temporary list",({"loggedIn":p("Add these documents to a saved list")}))})),"more":{"alt":p("Show more available options")},"withselected":p("With selected:"),"viewreference":p("View references",({"alt":p("View references of the selected documents")})),"email":p("Email",({"alt":p("Email the selected documents")})),"cto":p("View citation overview",({"alt":p("View a Citation Overview of the selected documents")}))},"disabled":{"deletes":{"alt":p("Please select one or more document(s) below to Delete")},"download":{"alt":p("Please select one or more document(s) below to Download")},"citedby":{"alt":p("Please select one or more document(s) below to View Cited by")},"citation":{"alt":p("Please select one or more document(s) below to View citation overview")},"more":{"withcitedbyAddLst":{"alt":p("Please select one or more document(s) below to View Cited by, View references, Create bibliography, Email or Print")},"alt":p("Please select one or more document(s) below to View references, Add to My List, Create bibliography, Email or Print"),"withcitedby":{"alt":p("Please select one or more document(s) below to View Cited by, View references, Add to My List, Create bibliography, Email or Print")}},"mylist":{"alt":p("Please select one or more document(s) below to Add",({"loggedIn":p("Please select one or more document(s) below to Save")}))},"save":{"alt":p("Please select one or more document(s) below to Save")},"secondaryresults":{"more":{"alt":p("Please select one or more document(s) below to Create bibliography, Email or Print")}}},"sortby":p("Sort on:"),"selectall":p("Select all",({"tooltip":p("Select all results")}))},"querybar":{"setalert":p("Set alert"),"edit":p("Edit",({"alt":p("Edit search query")})),"author":{"alt":p("Find authors with a similar name")},"save":p("Save",({"alt":p("Save query")})),"link":{"patent":p("View {0} patent results",({"single":p("View {0} patent result",({"alt":p("Select to display the patent result")})),"alt":p("Select to display the patent results")}))},"hublink":{"view":p("View"),"web":p("View {0} web results",({"alt":p("Opens Hub in a new window. Covered web sources: University repositories (e.g. MIT, DiVA ,Caltech), theses & dissertations, etc.")})),"gotoresults":p("Go to:")},"alternativespelling":p("Alternative spelling is:",({"alt":p("return your search with this suggested spelling")})),"scopus":p("&nbsp;in Scopus"),"analyseresult":p("Analyze search results",({"alt":p("View charts and graphs related to this results list")})),"resulttext":p("result"),"search":p("Search&nbsp;"),"setfeedDisabled":p("Query too long to create an RSS feed"),"resultstext":p("results"),"setfeed":p("Set feed"),"results":p("Not the results you expected?"),"yourquery":p("Your query:&nbsp;&nbsp;")}},"DOC_CIB_HEADER_MSG_SHORT_SURVEY_TOOLTIP":p("View short survey (opens in new window)"),"RESULTS_REFINE_BEF_IS_CITED_X_TIMES":p("Refined to [{0}] before {1} is cited {2} times by:"),"DOC_CIB_HEADER_MSG_ABSTRACT_REPORT":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> abstract report<\/a> match your query"),"RESULTS_MLT_ALL_KEYS_LABEL":p("Shares {0}keywords{1} with:"),"RESULTS_BEF_ARE_CITED_X_TIME":p("The {2} selected documents are cited {1} time before {0} by:"),"SETALERT_LOGIN_MORE_LOGIN_OPT_TOOLTIP":p("More login options"),"RESULTS_REFINE_MLT_REF_LABEL":p("Share {1}selected references{2} with: Refined to [{0}]  gives:"),"DOC_CIB_HEADER_MSG_DYNAMIC_VALUE":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> {2}<\/a> match your query"),"TERM_EMAIL_INFOR":p("The information entered on this page will not be used to send unsolicited e-mail, and will not be sold to a 3rd party."),"CLUS_LOADING_TOOLTIP":p("Loading"),"LIMI_EXCLUSUB_TOOLTIP":p("Exclude selected items: Subscription required"),"DOCU_VIEWIN_AUTHOR_TOOLTIP":p("View author details (opens in new window)"),"RESULTS_MY_LIST_LABEL":p("MY LIST (<b>{0}<\/b>)"),"SAVELIST_DELETE_TOOLTIP_ENABLE":p("Delete the Selected List"),"RESULTS_REFINE_MLT_KEY_LABEL":p("Share {1}selected keywords{2} with: Refined to [{0}] gives:"),"EMAIL_SENT_MESSAGE_2":p("The information entered on this page will not be used to send unsolicited e-mail, and will not be sold to a 3rd party."),"EMAIL_SENT_MESSAGE_1":p("Your e-mail message containing {0} citations and link will be sent to {1}"),"SEARCH_NAV_AUCITE":p("Author Name"),"EMAIL_SENT_MESSAGE":p("Your e-mail message containing a citation and link will be sent to {0}"),"RESULTS_OPTIONS_VIZ_RESULTS_TOOLTIP":p("View charts and graphs related to this results list"),"RESU_REFEDOC_TOOLTIP":p("View the documents that references this one"),"RESULTS_QUERYBAR_ARECITEDBY_LABEL":p("are cited by:"),"RESULTS_CITED_BY_SELECT_KEY":p("Select keywords"),"RESULTS_BACK_PUB_METRICS":p("Back to Publication Metrics"),"results_cib_limit_multiple_article":p("Limit your results to these {0} articles only"),"RESULT_SAVED_LIST_SUCCESS":p("The selected {0} documents were added to {1}. <a href=\"{2}\" title=\"Manage your saved lists\">View or manage your saved lists.<\/a>"),"DOC_CIB_HEADER_MSG_CONFERENCE_PAPER":p("<a href=\"#\" id=\"documentNum\" title=\"{0}\"><span class='Bold'>{1}<\/span> conference paper<\/a> match your query"),"RESULTS_SRC_BROWSE_QUERY_ISS":p("&nbsp;in Issue {0} has:")})})();;(function(){function r(val,args){for(var x=0;x<args.length;x++){val=val.replace('{'+x+'}',args[x]);}
return val;}
function p(){var val=arguments[0];var ret;if(val.indexOf('{0}')!=-1)
ret=function(){return r(val,arguments);}
else ret=function(){return val;}
for(var x=1;x<arguments.length;x++){for(var a in arguments[x])
ret[a]=arguments[x][a];}
return ret;}
window.detail=({"RECORD_NEW_LIST_TXT":p("<p class=\"savedListErr\">Enter name of new list<\/p>"),"RECORD_PAGE_REAXYS_VIEW_REACTIONS":p("View Reactions (Opens in a new window)"),"RECORD_PAGE_HIDE_AUTHOR":p("Hide additional authors"),"RECORD_JS_MENDELEY_TOP_COUNTRIES":p("Top countries"),"RECORD_PAGE_EMAIL":p("E-mail"),"RECORD_SAVED_LISTITEM_MAXIMUM_LIMIT":p("<p class=\"savedListErr\">The selected documents cannot be added to your saved list. A list can hold a maximum of {0} documents. Please make a smaller selection, delete documents from your saved list, or save the documents to a new list.<\/p>"),"RECORD_REF_EMAIL_SELECTED_Disable":p("Please select one or more document(s) below to E-mail"),"RECORD_SAVED_LIST_MAXIMUM_LIMIT":p("<p class=\"savedListErr\">You have reached the maximum number of saved lists({0}). To save a new list you must delete an existing <a href=\"{1}\">Saved List.<\/a>"),"RECORD_REF_BIB_SELECTED_Disable":p("Please select one or more document(s) below to Create a bibliography"),"RECORD_PAGE_ADD_LIST":p("Add to List"),"RECORD_JS_MENDELEY_PERSON":p("{0} person has saved this article to Mendeley"),"RECORD_SAVED_LIST_NAME_EXISTS":p("<p class=\"savedListErr\">List name already exists. Enter a new name, or use the selector below to add to an existing saved list.<\/p>"),"RECORD_REF_BIB_SELECTED":p("Create a bibliography for the selected references"),"RECORD_SAVELIST_ERROR_MESSAGES_EMPTYSUBMIT":p("<p class=\"savedListErr\">Enter a name for your list, or use the selector below to add to an existing saved list.<\/p>"),"RECORD_PAGE_CREATE_BIB":p("Create bibliography"),"RECORD_PAGE_PRINT":p("Print"),"RECORD_ALERT_CITED_IN_SCOPUS":p("when this document is cited in Scopus"),"RECORD_PAGE_DOWNLOAD":p("Download"),"RECORD_PAGE_VIEW_AUTHOR":p("View additional authors"),"RECORD_SAVELIST_ERROR_MESSAGES_BOTHSELECTED":p("<p class=\"savedListErr\">You have entered a new list name and selected to add documents to a current saved list. You cannot do both actions at once. Please choose one or the other and click Save.<\/p>"),"RECORD_PAGE_SAVE_TO_LIST":p("Save to list"),"RECORD_PAGE_RET_AFFIL":p("Retrieving additional affiliations..."),"RECORD_PUBLICATION":p("Cited {0} times"),"RECORD_PAGE_HIDE_AFFIL":p("Hide additional affiliations"),"RECORD_REF_PRINT_SELECTED_Disable":p("Please select one or more document(s) below to Print"),"RECORD_PAGE_SELECTALL_TOOLTIP":p("Select all results"),"RECORD_ALERT_ME":p("Alert me"),"RECORD_PAGE_VIEW_AFFIL":p("View additional affiliations"),"RECORD_JS_MENDELEY_PEOPLE":p("{0} people have saved this article to Mendeley"),"RECORD_SAVE_TO_LIST_NO_NAME":p("<p class=\"savedListErr\">Enter a name for your list<\/p>"),"RECORD_LOADING_RETRIEVING_COUNTS":p("Retrieving citations..."),"RECORD_JS_MENDELEY_TOP_DISCIPLINES":p("Top disciplines"),"RECORD_REF_PRINT_SELECTED":p("Print the selected references"),"RECORD_PAGE_REAXYS_VIEW_SUBSTANCES":p("View Compounds (Opens in a new window)"),"RECORD_REF_EMAIL_SELECTED":p("Email the selected references"),"RECORD_SAVED_LIST_SUCCESS":p("This document was added to {0}. <a href=\"{1}\" title=\"Manage your saved lists\">View or manage your saved lists.<\/a>"),"RECORD_PAGE_RET_AUTHOR":p("Retrieving additional authors..."),"RECORD_JS_MENDELEY_ERROR":p("We are unable to load this content at this time.<br/><br/>Please check back later."),"RECORD_PAGE_RET":p("Retrieving..."),"RECORD_JS_MENDELEY_TOP_DEMOGRAPHICS":p("Top demographics"),"RECORD_PUBLICATION_ALT":p("View the {0} publications that cite this one")})})();;(function(){function r(val,args){for(var x=0;x<args.length;x++){val=val.replace('{'+x+'}',args[x]);}
return val;}
function p(){var val=arguments[0];var ret;if(val.indexOf('{0}')!=-1)
ret=function(){return r(val,arguments);}
else ret=function(){return val;}
for(var x=1;x<arguments.length;x++){for(var a in arguments[x])
ret[a]=arguments[x][a];}
return ret;}
window.altMetric=({"PUBMETRICS_MAIL_ACCESS":p("To access the full analysis, you access the page through an authenticated IP, or sign in to Scopus."),"PUBMETRICS_MAIL_MOREAUTHOR":p("et al.,"),"PUBMETRICS_MAIL_USERINFORMATION":p("has sent you metric details from Scopus:"),"PUBMETRICS_EMAIL_SENDER_BLANK":p("A Scopus user"),"PUBMETRICS_TEXT_MAIL_FULL_LINK":p("You can view the full metric details here"),"PUBMETRICS_MAIL_YOU_CAN":p("You can"),"PUBMETRICS_EMAIL_SUBJECT":p("Metric details from Scopus"),"PUBMETRICS_MAIL_COMMA":p(","),"PUBMETRICS_MAIL_FULL_LINK":p("view the full metric details here."),"PUBMETRICS_MAIL_LINK_AVAILABLE":p("This link is available until {0}"),"labels":{"common":{"snowballBubble":{"headingSnowBubbleHelpTitle":p("View Scopus help file (Opens in a new window)"),"defaultContent":p("{0}Metrics displaying this icon are compiled according to {1}Snowball Metrics{2}, a collaboration between industry and academia.{3}"),"learnMoreContent":p("{0}Learn more{1} about article metrics in Scopus."),"snowballMetricsTitle":p("Learn more about Snowball Metrics"),"snowballMetricsLabel":p("About Snowball Metrics"),"snowballMetricsText":p("Snowball Metrics"),"headingSnowBubbleIconTitle":p("View the Snowball Metric Website (Opens in a new window)")},"pageRange":p("pp."),"issue":p("Issue"),"emailTitle":p("Email this page"),"backToArticleLink":p("Back to article"),"errorMessage":p("Something is not working correctly. Please check again later for Scopus metrics data."),"articleNo":p("art. no."),"volume":p("Volume"),"help":{"tooltip":p("Learn more about Metric details - {0} (opens in a new window)")},"number":{"third":p("{0}rd"),"fourth":p("{0}th"),"first":p("{0}st"),"second":p("{0}nd")},"pageHeading":p("Metric details"),"backToArticleLinkTitle":p("Back to article page"),"email":p("Email")},"sidebar":{"images":{"citation":{"tooltip":p("Citation image")},"blogs":{"tooltip":p("Blogs image")},"facebook":{"tooltip":p("Facebook image")},"pinterest":{"tooltip":p("Pinterest image")},"LinkedIn":{"tooltip":p("LinkedIn image")},"twitter":{"tooltip":p("Twitter image")},"mendeley":{"tooltip":p("Mendeley image")},"weibo":{"tooltip":p("Sina Weibo image")},"reviews":{"tooltip":p("Post-publication review image")},"reddit":{"tooltip":p("Reddit image")},"wikipedia":{"tooltip":p("Wikipedia image")},"massmedia":{"tooltip":p("Mass Media mentions image")},"googleplus":{"tooltip":p("GooglePlus image")}},"schcomment":{"reviews":{"plural":p("Post-publication reviews"),"singular":p("Post-publication review")},"blogs":{"plural":p("Blog posts "),"singular":p("Blog post")},"wikipedia":{"plural":p("Mentions on Wikipedia"),"singular":p("Mention on Wikipedia")}},"reviews":{"caption":p("Post-publication reviews")},"citation":{"plural":p("Citations"),"singular":p("Citation")},"blogs":{"caption":p("Mentions in blogs")},"mendeleyReaders":{"mendeleyText":{"plural":p("Mendeley Readers"),"singular":p("Mendeley Reader")}},"socialAct":{"twitter":{"plural":p("Tweets"),"singular":p("Tweet ")},"weibo":{"plural":p("Posts on Sina Weibo"),"singular":p("Post on Sina Weibo")},"facebook":{"plural":p("Posts on Facebook"),"singular":p("Post on Facebook")},"reddit":{"plural":p("Mentions on Reddit"),"singular":p("Mention on Reddit")},"pinterest":{"plural":p("Posts on Pinterest"),"singular":p("Post on Pinterest")},"linkedin":{"plural":p("Mentions on LinkedIn"),"singular":p("Mention on LinkedIn")},"googleplus":{"plural":p("Posts on Google +"),"singular":p("Post on Google +")}},"wikipedia":{"caption":p("Mentions on Wikipedia")},"massmedia":{"plural":p("Mass Media mentions"),"singular":p("Mass Media mention")}},"tabs":{"scholarlyCommentary":{"headerCountTxt1":p("{0} mentions"),"headerCountTxt2":p("{0} mention"),"snowballIconTitle":p("Learn more about Scholarly Commentary and Snowball Metrics"),"postPublication":{"pubpeer":{"hideStramTxSingt":p("1 comment from PubPeer"),"titleSingt":p("View comment on PubPeer (Opens in a new window)"),"hideStramTxt":p("{0} comments from PubPeer"),"title":p("View comments on PubPeer (Opens in a new window)")},"title":p("Post-publication peer reviews"),"publons":{"hideStramTxSingt":p("1 comment from Publons"),"titleSingt":p("View comment on Publons (Opens in a new window)"),"hideStramTxt":p("{0} comments from Publons"),"title":p("View comments on Publons (Opens in a new window)")}},"viewAllText":p("View all Scholarly Commentary"),"postTitleText":p("View {0} (Opens in a new window)"),"headerCount":{"explanationTxt":p("Reviews, articles, and blogs by experts and scholars, such as F1000 Prime, research blogs, and Wikipedia.")},"scholCommSnowBubbleText2":p("Scholarly Commentary shows the number of times a publication has been commented on in online tools typically used by academic scholars, such as blogs and Faculty of 1000 reviews."),"title":p("Scholarly Commentary"),"qa":{"title":p("Question & answer sites")},"f1000":{"title":p("F1000Prime")},"subTitle":p("Blogs, Reviews, Wikipedia, etc."),"scholCommCaptionText":p("Mentions in scientific blogs, websites and publications")},"providedByTitle":p("Learn more about data sources (Opens in a new window)"),"providedBy":p("{0}Select data{2} provided by {1}altmetric.com{3}"),"overview":{"scholarlyCommentary":{"countdesc":p("mention"),"countdescs":p("mentions")},"cards":{"smallCard":{"activity":{"scholar_activity":p("Scholarly activity"),"scholar_commentary":p("Scholarly commentary"),"social_activity":p("Social activity")},"title":p("View the {0} details on the {1} tab")},"news":{"header":p("News")},"other":{"subTitle":p("Click to view details on {0} mentions"),"anchor":{"soaTitle":p("View {0} mentions for {1} in Social Activity tab"),"schTitle":p("View {0} mentions for {1} in Scholarly Commentary tab")},"countdesc":p("Posts"),"header":p("Other sources")},"pubpeer":{"countdesc":p("Comments",({"single":p("Comment")})),"header":p("Pubpeer")},"citation":{"snowballBubbleText":p("Citation count shows how many times a publication has been cited."),"snowballIconTitle":p("Learn more about Citation Count and Snowball Metrics"),"title":p("View the details on the Citations tab")},"blogs":{"countdesc":p("Posts",({"single":p("Post")})),"header":p("Blogs")},"fwci":{"snowballBubbleText":p("Field-Weighted Citation Impact shows how well cited this article is when compared to similar articles. A FWCI greater than 1.00 means the article is more cited than expected according to the average. It takes into account:"),"snowballIconTitle":p("Learn more about Field-Weighted Citation Impact and Snowball Metrics"),"snowballBubbleAddlText":p("The FWCI is the ratio of the article's citations to the average number of citations received by all similar articles over a three-year window. Each discipline makes an equal contribution to the metric, which eliminates differences in researcher citation behavior."),"header":p("Field-Weighted Citation Impact"),"snowballBubbleHeader":p("Field-Weighted Citation Impact"),"snowballBubbleListText3":p("The disciplines associated with its source."),"snowballBubbleListText1":p("The year of publication"),"snowballBubbleListText2":p("Document type, and")},"facebook":{"header":p("Facebook"),"countdesc":p("Posts",({"single":p("Post")}))},"pinterest":{"countdesc":p("Posts",({"single":p("Post")})),"header":p("Pinterest")},"linkedin":{"header":p("LinkedIn "),"countdesc":p("Posts",({"single":p("Post")}))},"poweredByTitle":p("Learn more about altmetric.com (Opens in a new window)"),"qa":{"post":{"singular":p("to Q&A site")},"detailHeader":p("Question & answer sites"),"header":p("Q&A sites"),"countdesc":p("Posts",({"single":p("Post")})),"posts":p("to Q&A sites")},"f1000":{"header":p("F1000Prime"),"countdesc":p("Reviews",({"single":p("Review")}))},"mendeley":{"countdesc":p("Readers",({"single":p("Reader")})),"header":p("Mendeley")},"twitter":{"countdesc":p("Tweets",({"single":p("Tweet")})),"header":p("Twitter")},"citationBenchMark":{"percentile":p("percentile"),"docDesc":p("Compared to {0} articles of the same age and document type"),"articleDesc":p("Compared to {0} articles of the same age")},"weibo":{"countdesc":p("Posts",({"single":p("Post")})),"header":p("Sina Weibo")},"citeulike":{"header":p("CiteUlike")},"reddit":{"countdesc":p("Posts",({"single":p("Post")})),"header":p("Reddit")},"wikipedia":{"countdesc":p("Mentions",({"single":p("Mention")})),"header":p("Wikipedia")},"googleplus":{"countdesc":p("Posts",({"single":p("Post")})),"header":p("Google +")}},"heading1":p("Overview"),"title":p("Overview"),"benchmarkPercentile":p("{0}th percentile"),"benchmark":{"icontooltiptext":p("Learn more about Benchmarking percentiles and Snowball Metrics")},"scholarlyActivity":{"heading":p("{0} readers from {1} sources"),"citeulikeText":p("CiteULike:"),"citeulikeCountText1":p("{0} Saves"),"mendeleyCountText1":p("{0} Readers"),"viewAllText":p("View all Scholarly Activity"),"citeulikeCountText2":p("{0} Save"),"mendeleyCountText2":p("{0} Reader"),"demographText":p("Top demographic:"),"zeroMendTxt":p("This article has not yet been added to Mendeley"),"MendeleyLink":p("Save to Mendeley"),"subHeading":p("Downloads and posts in common research tools"),"disciplineText":p("Top discipline:"),"benchmarkSubheading":p("Based on {0} readers from {1} sources"),"benchMarkScholarText":p("All Scholarly Activity"),"singleSource":p("{0} readers from {1} source"),"singleReader":p("{0} reader from {1} source"),"mendeleyText":p("Mendeley:"),"mendeleyLinkToolTxt":p("Save this article to your Mendeley profile(Opens in a new window)")},"citationbenchmarkcardheader":p("Citation Benchmarking"),"citationcardcountdesc":p("Cited by in Scopus"),"ScholarlyActivity":{"benchmarkbubbleText1":p("Scholarly Activity benchmarking shows how often this article has been saved by scholars compared with the average for similar articles. 99th percentile is high and indicates an article in the top 1% globally. It takes into account:"),"benchmarkbubbleliText3":p("Disciplines associated with its source."),"benchmarkbubbleText2":p("Scholarly Activity benchmarking compares articles within a 18 month window and is computed separately for each of its sources' disciplines. A minimum set of 2500 similar articles is required."),"benchmarkbubbleliText1":p("The date of publication,"),"benchmarkbubbleliText2":p("The document type (number of articles allowing), and")},"socialActivity":{"heading":p("Social Activity"),"facebook":p("{0} Facebook posts from {1} accounts",({"singleUser":p("{0} Facebook posts from {1} account"),"singlePost":p("{0} Facebook post from {1} account")})),"pinterest":p("{0} pins from {1} accounts",({"singleUser":p("{0} pins from {1} account"),"singlePost":p("{0} pin from {1} account")})),"linkedin":p("{0} LinkedIn posts from {1} accounts",({"singleUser":p("{0} LinkedIn posts from {1} account"),"singlePost":p("{0} LinkedIn post from {1} account")})),"headingSnowBubbleText2":p("Social activity shows the number of times a publication has stimulated a social media post on platforms used by the general public, such as in Twitter, Facebook, and delicio.us."),"benchmark":p("Benchmark highlights ",({"compare":p("Compared to {0} articles of same age and document type"),"compareSub":p("Compared to {0} articles of same age"),"activity":p("All Social Activity "),"viewall":p("View all Social Activity")})),"benchmarkbubbleText1":p("Social Activity benchmarking shows how activity received by this article compares with the average for similar articles. 99th percentile is high and indicates an article in the top 1% globally. It takes into account:"),"twitter":p("{0} tweets from {1} accounts",({"singleUser":p("{0} tweets from {1} account"),"singlePost":p("{0} tweet from {1} account")})),"weibo":p("{0} posts from {1} users",({"singleUser":p("{0} posts from {1} user"),"singlePost":p("{0} post from {1} user")})),"subHeading":p("{0} mentions from {1} sources"),"benchmarkbubbleText2":p("Social Activity benchmarking compares articles within a 2 month window and is computed separately for each of its sources' disciplines. A minimum set of 2500 similar articles is required."),"benchmarkCaption":p("Based on {0}"),"singleSource":p("{0} mentions from {1} source"),"reddit":p("{0} Reddit posts from {1} accounts",({"singleUser":p("{0} Reddit posts from {1} account"),"singlePost":p("{0} Reddit post from {1} account")})),"googleplus":p("{0} Google+ posts from {1} accounts",({"singleUser":p("{0} Google+ posts from {1} account"),"singlePost":p("{0} Google+ post from {1} account")})),"singleMention":p("{0} mention from {1} source")},"heading2":p("Engagement highlights"),"massMedia":{"captionText":p("Coverage of research output in the mass media"),"countdesc":p("Item"),"countdescs":p("Items")},"citationcardheader":p("Citation Count")},"citations":{"benchmarkBubbleListText1":p("The date of publication,"),"benchmarkBubble4":p("Citation Benchmarking compares articles within an 18 month window and is computed separately for each of its sources' disciplines. A minimum set of 2500 similar articles is required."),"benchmarkBubble3":p("Disciplines associated with its source."),"benchmarkBubbleListText3":p("Disciplines associated with its source."),"benchmarkBubble2":p("The document type (number of articles allowing), and"),"cards":{"citation":{"snowballBubbleText":p("Citation count shows how many times a publication has been cited."),"snowballIconTitleFwci":p("Learn more about Field-Weighted Citation Impact and Snowball Metrics"),"snowballIconTitle":p("Learn more about Citation Count and Snowball Metrics"),"snowballBubbleHeader":p("Citation Count"),"header":p("Citation Count"),"graph":{"dateRangeText":p("Date range:"),"chartDataToolTip":p("Click point to view document list"),"citationGraphStart":p("Citation graph start"),"updateCitationsGraphEditText":p("Edit the data for this graph."),"startYearGreaterThanEndYear":p("The start year in the date range you specified is later than the end year. Please make sure the start year is earlier or equal to the end year."),"citationGraphEnd":p("Citation graph end"),"dateRangeTooGreat":p("You have selected a year range of more than {0} years. The citation overview page can display up to {1} years. Please select a shorter range to display on the page"),"highChartXTitle":p("Years"),"exportToolTip":p("Export the citation overview to a spreadsheet."),"dateRangeToText":p("to "),"excludeSelfCitationsText":p("Exclude self citations"),"exportConfirmationText":p("The citation overview has been downloaded as a comma separated file(.csv)."),"exportText":p("Export"),"excludeBooksToolTip":p("Selecting this option will exclude citations from non-serial books and book chapters."),"citedByText":p("Cited by"),"updateCitationsGraphOffText":p("Select to update the graph"),"booksExcludedConfirmation":p("Citations from books are excluded."),"excludeBookCitationsText":p("Exclude citations from books"),"citedByCountsText":p("Citations"),"authorsExcludedConfirmation":p("Self citations of all authors are excluded."),"updateCitationsGraphText":p("Update"),"excludeAuthorsToolTip":p("Selecting this option will exclude both the self citations of the author as well as citations by all co-authors."),"highChartYTitle":p("Citations")},"desc":p("Cited by in Scopus")},"fwci":{"snowballBubbleText":p("Field-Weighted Citation Impact shows how well cited this article is when compared to similar articles. A FWCI greater than 1.00 means the article is more cited than expected according to the average. It takes into account:"),"snowballIconTitle":p("Learn more about Field-Weighted Citation Impact and Snowball Metrics"),"snowballBubbleAddlText":p("The FWCI is the ratio of the article's citations to the average number of citations received by all similar articles over a three-year window. Each discipline makes an equal contribution to the metric, which eliminates differences in researcher citation behavior."),"snowballBubbleHeader":p("Field-Weighted Citation Impact"),"header":p("Field-Weighted Citation Impact"),"snowballBubbleListText3":p("The disciplines associated with its source."),"snowballBubbleListText1":p("The year of publication"),"snowballBubbleListText2":p("Document type, and")},"benchmark":{"percentile":p("percentile"),"header":p("Citation Benchmarking"),"desc":p("Compared to {0} articles of the same age and document type")}},"benchmarkBubbleListText2":p("The document type (number of articles allowing), and"),"benchmarkBubble1":p("The date of publication,"),"benchmarkHelpIconText":p("Citation Benchmarking shows how citations received by this article compare with the average for similar articles. 99th percentile is high, and indicates an article in the top 1% globally. It takes into account:"),"benchmarkBubbleText1":p("Citation Benchmarking shows how citations received by this article compare with the average for similar articles. 99th percentile is high, and indicates an article in the top 1% globally. It takes into account:"),"benchmarkHelpIconText4":p("Citation Benchmarking compares articles within an 18 month window and is computed separately for each of its sources' disciplines. A minimum set of 2500 similar articles is required."),"title":p("Citations"),"allCiteText":p("All Citations"),"benchmarkBubbleText2":p("Citation Benchmarking compares articles within an 18 month window and is computed separately for each of its sources' disciplines. A minimum set of 2500 similar articles is required."),"sources1":p("{0} Cited by documents"),"benchmarkBubble":p("Citation Benchmarking shows how citations received by this article compare with the average for similar articles. 99th percentile is high, and indicates an article in the top 1% globally. It takes into account:"),"benchmarkHelpIconText2":p("The document type (number of articles allowing), and"),"benchmarkHelpIconText3":p("Disciplines associated with its source."),"alert":p("Set citation alert",({"title":p("Set alert")})),"benchmarkHelpIconText1":p("The date of publication,"),"benchmarkCaption":p("Measures of activity relative to specific research domains, based on cited by in Scopus")},"stream":{"viewLess":{"label":p("View less"),"title":p("View up to 10 less")},"viewMore":{"label":p("View 10 more"),"title":p("View up to 10 more")}},"socialActivity":{"snowballIconTitle":p("Learn more about Social activity and Snowball Metrics"),"feedHeader":{"twitter":{"description2":p("{0} tweets from 1 account"),"description3":p("1 tweet from 1 account"),"description1":p("{0} tweets from {1} accounts")},"description2":p("{0} posts from 1 account"),"description3":p("1 post from 1 account"),"description1":p("{0} posts from {1} accounts")},"authorImgDummy":{"alt":p("Picture of unknown author")},"authorImg":{"alt":p("Picture of {0}")},"sources2":p("Mentions characterized by rapid, brief engagement on platforms used by the general population, such as Twitter, Facebook, and Google +."),"title":p("Social activity"),"headingSnowBubbleText2":p("Social Activity shows the number of times a publication has stimulated a social media post on platforms used by the general public, such as in Twitter, Facebook, and Google +."),"benchmark":{"icontooltiptext":p("Learn more about benchmarking")},"sources1":{"plural":p("{0} mentions from {1} sources"),"singular":p("{0} mentions from {1} source")},"snowballMetrics":p("About Snowball Metrics"),"feedAuthor":{"image":{"title":p("Picture of {0}")}},"subTitle":p("Twitter, Facebook, etc."),"feedLink":{"twitter":{"title":p("View this tweet (Opens in a new Window)")},"title":p("View this post (Opens in a new Window)")},"benchmarkCaption":p("Measures of activity relative to specific research domains based on all sources of Social Activity"),"snowballMetricsTitle":p("Learn more about Snowbal Metrics"),"demographics":{"twitter":p("Twitter demographics",({"viewless":{"title":p("view less countries")},"viewall":{"title":p("view all countries")}}))}},"massMedia":{"snowballIconTitle":p("Learn more about Mass Media and Snowball Metrics"),"viewAllText":p("View all Mass Media"),"title":p("Mass Media"),"countdesc1":p("{0} stories from {1} sources"),"countdesc2":p("{0} stories from {1} source"),"headingSnowBubbleText2":p("Mass Media shows the number of times a publication has been referred to in public distributed news channels."),"countdesc3":p("{0} story from {1} source")},"highmap":{"legend":{"title":p("Map Legend:")}},"scholarlyActivity":{"disciplineHeading":p("By discipline"),"headingSnowBubbleText6":p("Learn more "),"headingSnowBubbleText7":p("about article metrics in Scopus."),"headingSnowBubbleText4":p("Snowball Metrics"),"title":p("Scholarly Activity",({"viewAll":{"country":p("View all countries"),"discipline":p("View all disciplines"),"academy":p("View all academic statuses")}})),"headingSnowBubbleText5":p(", a collaboration between industry and academia."),"headingSnowBubbleText2":p("Scholarly Activity shows the number of times that a publication has been posted in online tools that are typically used by academic scholars, such as Mendeley, and CiteULike."),"headingSnowBubbleText3":p("Metrics displaying this icon are compiled according to "),"snowballMetrics":p("About Snowball Metrics"),"headingSnowBubbleHelpTitle":p("View Scopus help file (Opens in a new window)"),"subTitle":p("Mendeley, CiteULike, etc."),"countryHeading":p("By country"),"benchmarkCaption":p("Measures of activity relative to specific research domains based on all sources of Scholarly Activity"),"benchmarkCompareToDoctype":p("Compared to {0} articles of same age and document type"),"mendelyLink":p("View publication in Mendeley",({"mendeleyTooltip":p("View publication in Mendeley - (Opens in a new window)")})),"benchmarkCompareTo":p("Compared to {0} articles of same age"),"map":{"mendeley":{"title":p("Mendeley Readers")}},"viewLess":p("View less"),"snowballIconTitle":p("Learn more about Scholarly Activity and Snowball Metrics"),"headingBenchmark":p("Benchmarking"),"demographicsHeading":p("Mendeley Reader demographics"),"sources2":p("Indirect measurement of activity by people using scholarly platforms such as Mendeley and CiteULike."),"viewAll":p("View all"),"headingSnowBubbleIconTitle":p("View the Snowball Metric Website (Opens in a new window)"),"sources1":p("{0} readers from {1} sources"),"progressbar":{"insuffDataText":p("Insufficient data"),"insuftooltipText":p("Insufficient data - Benchmarking will be updated as activity increases over time")},"snowballMetricsTitle":p("Learn more about Snowball Metrics"),"academicsHeading":p("By academic status"),"card":{"mendeley":{"header":p("Mendeley"),"countdesc":p("Readers",({"single":p("Reader")}))},"citeulike":{"countdesc":p("Saves",({"single":p("Save")})),"header":p("CiteULike")}}}},"recordpage":{"sidebar":{"TwitFbDataprovidedBy":p("Twitter and Facebook data are provided by {0}Altmetric.com{1}"),"metricsHelpBubbleText1":p("Percentile benchmarks show how citations or activity received by this article compare with the averages for similar articles. 99th percentile is high, and indicates an article in the top 1% globally. It takes into account:"),"metricsHelpBubbleListText2":p("The document type, and"),"metricsHelpBubbleListText1":p("The date of publication,"),"fwci":{"snowballBubbleListText1":p("The year of publication"),"snowballBubbleListText2":p("Document type, and")},"metricsHelpBubbleListText3":p("Disciplines associated with its source."),"FWCIsnowballBubbleText1":p("Field-Weighted Citation Impact"),"percentileText":p("{0} Percentile"),"FWCIsnowballText":p("Field-Weighted Citation Impact"),"metricsHeaderText":p("Metrics"),"TwitFbDataprovidedByTitle":p("Learn more about Altmetrics (Opens in a new window)"),"FWCIsnowballBubbleText4":p("The FWCI is the ratio of the article's citations to the average number of citations received by all similar articles over a three-year window. Each discipline makes an equal contribution to the metric, which eliminates differences in researcher citation behavior."),"viewAllLinkTitle":p("View all metrics"),"metricsHeaderTitle":p("Learn more about article metrics in Scopus"),"FWCIsnowballBubbleText2":p("Field-Weighted Citation Impact shows how well cited this article is when compared to similar articles. A FWCI greater than 1.00 means the article is more cited than expected according to the average. It takes into account:"),"viewAllLinkText":p("View all metrics"),"otherSource":{"sourceName":{"qa":p("Q&A sites"),"youtube":p("YouTube"),"f1000":p("F1000Prime"),"weibo":p("Sina Weibo"),"pubpeer":p("Post-publication reviews"),"facebook":p("Facebook"),"citeulike":p("CiteUlike"),"reddit":p("Reddit"),"pinterest":p("Pinterest"),"wikipedia":p("Wikipedia"),"linkedin":p("LinkedIn"),"googleplus":p("Google +")},"text":p("Mentions in {0} additional sources{1}"),"title":p("View additional sources")},"FWCIsnowballIconTitle":p("Learn more about Field-Weighted Citation Impact and Snowball Metrics"),"imageTooltip":p("{0} image")}},"email":{"errormessage":p("One or more of the email addresses entered is not valid. Please check your entries before sending."),"textRadioToolTip":p("Choose text Format"),"conformationmessage":p("The email has been sent."),"sendButtonLabel":p("Send"),"emailBubbleHeader":p("Email metric details"),"emailUsrTitle":p("Enter your email address"),"privacyPolicy":p("Privacy policy"),"emailWaterMarkUserMail":p("Email address"),"emailWaterMarkSentToMail":p("Email address, email address,"),"htmlRadioToolTip":p("Choose HTML Format"),"emailFormatValueTEXT":p("TEXT"),"closeButtonTitle":p("Close"),"privacyPolicyToolTip":p("View Elsevier's privacy policy.(Opens in a new window)      \t"),"emailFormatLabel":p("E-mail format:"),"emailFormatValueHTML":p("HTML"),"emailBubbleDesc":p("Send to:"),"emailTitleToolTip":p("Enter the email addresses you would like these details sent to. Multiple Email address can be separated by commas."),"emailBubbleDescUserMail":p("Your email address:")}}})})();;(function(){function r(val,args){for(var x=0;x<args.length;x++){val=val.replace('{'+x+'}',args[x]);}
return val;}
function p(){var val=arguments[0];var ret;if(val.indexOf('{0}')!=-1)
ret=function(){return r(val,arguments);}
else ret=function(){return val;}
for(var x=1;x<arguments.length;x++){for(var a in arguments[x])
ret[a]=arguments[x][a];}
return ret;}
window.alertProp=({"MAINTALETLST_DELETE":p("Delete"),"ALERT_FREQUENCY":p("Frequency:"),"ALERTCONF_THISEMAIL":p("This email has been sent to you by Scopus ®, a product of Elsevier B.V., Radarweg 29, 1043NX Amsterdam, The Netherlands, Tel.+31 20 485 3911. "),"ALERT_AUTHOR_ACCESS_NEW_RESULTS":p("Access the new result"),"alert_my_list_status_active":p("Active"),"ALERT_EMAIL_SEPARATOR":p("Separate multiple email addresses by a semicolon, comma, space or enter."),"ALERTTEXT_SEARCHALERT":p("Search alert"),"ALERT_AUTHOR_TEXT_FOOTER_TERMS_1":p("By using the Scopus Alert, you are agreeing to abide by the Scopus Terms and Conditions at {0}. "),"ALERT_AUTHOR_TEXT_FOOTER_TERMS_2":p("Copyright (c) {0} Elsevier B.V. All rights reserved. Scopus ® is a registered trademark of Elsevier B.V."),"author_alert":p("Author"),"ALERTTEXT_ANEWAUTH":p("A new Author citation alert called \"{0}\" has been set up:"),"alert_error_cite_delete_js":p("No Document Citation Alerts were selected.\\r\\nPlease check one or more Document Citation Alerts from the list below and click delete."),"ALERTTEXT_ANEWDOC":p("A new Document citation alert called \"{0}\" has been set up:"),"alert_message_delete_one_js":p("Are you sure you want to delete this alert?"),"ALERT_AUTHOR_QUERY_WITHOUT_COLON":p("This alert is based on the following query"),"ALER_NAMEOF":p("Name of alert:"),"ALERTTEXT_ELSEVIER":p("Elsevier respects your privacy and does not disclose, rent or sell your personal information to any non-affiliated third parties without your consent, except as may be stated in the Online Privacy Policy. By using the Scopus alerts, you are agreeing to abide by the Terms and Conditions."),"ALERT_SEARCH_TEXT_2":p("You can access the new result from this Search Alert at:"),"ALERT_SEARCH_TEXT_1":p("You can access all new results from this Search Alert at:"),"alert_message_delete_many_js":p("Are you sure you want to delete these alerts?"),"ALERT_AUTHOR_NEW_RESULTS":p("{0} new results"),"alert_my_list_setfeed":p("Set&nbsp;feed"),"ALERT_DOCUMENT_CALLED_2":p("Your {0} alert called \"{1}\" has found {2} new result on Scopus."),"ALERT_DOCUMENT_CALLED_1":p("Your {0} alert called \"{1}\" has found {2} new results on Scopus."),"ALERT_AUTHOR":p("Author(s)"),"ALERT_SEARCH_HTML_RESULT_1":p("Your search alert called <span class=\"bold\">\"{0}\"<\/span> has found {1} new results on Scopus."),"ALERTCONF_ALERTONTHE":p("Alert will check {0} on the {1} for new results and send mail in <b>HTML<\/b> format."),"alert_my_list_status":p("Status"),"ALERT_SEARCH_TEXT_RESULT_2":p("Your search alert called \"{0}\" has found {1} new result on Scopus."),"ALERTTEXT_COPYRIGHT":p("Copyright © {0} Elsevier B.V. All rights reserved. Scopus® is a registered trademark of Elsevier B.V."),"ALERT_UNSUBSCRIBE_MAIL_SUBJECT":p("Unsubscribe alert"),"ALERT_SEARCH_TEXT_RESULT_1":p("Your search alert called \"{0}\" has found {1} new results on Scopus."),"ALERT_SEARCH_HTML_RESULT_2":p("Your search alert called <span class=\"bold\">\"{0}\"<\/span> has found {1} new result on Scopus."),"ALERTTEXT_ACTIVE":p("It is presently active."),"ALERTUNSUB_RECIPIENTSEARCH":p("Recipient has declined Search alert"),"ALERT_AUTHOR_HTML_FOOTER_10":p("Citation Alert:"),"ALERT_AUTHOR_TEXT_FOOTER_SET_UP":p("If someone else has set up this alert for you, you can unsubscribe from these alerts by going the following url: {0} ."),"ALERT_AUTHOR_CITED_2":p("Cited {0} times."),"ALERTUNSUB_REMOVED":p("The recipient <a href=\"mailto:{0}\">{0}<\/a> has removed their e-mail address from your alert named \"<b>{1}<\/b>\"."),"ALERT_AUTHOR_CITED_1":p("Cited {0} time."),"ALERT_DOCUMENT_CITATION_4":p("You can access  the new result from this Document Citation Alert at:"),"ALERT_DOCUMENT_CITATION_3":p("You can access  all new results from this Document Citation Alert at:"),"ALERTTEXT_ALERTWILL":p("Alert will check Every day for new results and send mail in plain text format. "),"ALERT_EMAIL_HTML_FOOTER":p("<span class=\"Bold\">Note: <\/span>Results from CSA Illumina are not included in this e-mail alert. Your results list on Scopus for this e-mail alert can contain not only newly published documents, but also newly added archive material with an earlier publication date."),"ALERT_AUTHOR_ONE_NEW_RESULTS":p("1 new result"),"ALERT_DOCUMENT_CITATION_2":p("Your Document Citation Alert called <span class=\"bold\">\"{0}\"<\/span> has found {1} new result on Scopus."),"ALERT_DOCUMENT_CITATION_1":p("Your Document Citation Alert called <span class=\"bold\">\"{0}\"<\/span> has found {1} new results on Scopus."),"ALERT_STATUS":p("Status:"),"MAINTALETLST_ACTION":p("Action"),"ALERT_AUTHOR_CITEDBY":p("Cited by"),"MAINTALETLST_DELSELALERT_TOOLTIP":p("Delete the selected alerts"),"MAINTALETLST_SAVON":p("Saved on"),"ALERT_AUTHOR_DATE":p("Date"),"ALERT_AUTHOR_TEXT_PRIVACY":p("Elsevier respects your privacy and does not disclose, rent or sell your personal information to any non-affiliated third parties without your consent, except as may be stated in the Scopus Online Privacy Policy at {0}."),"alert_error_inactivate_js":p("Are you sure you want to inactivate this alert?\\r\\nYou can only activate it again if you subscribe to Scopus."),"SETALERT_LOGIN_COLLAPSE_LOGIN_OPT":p("Collapse options"),"ALERTTEXT_SEARCH":p("You can access all search results at:"),"AUTHOR_CITATION_ALERTS":p("Author Citation Alerts"),"ALERT_TEXT":p("Text"),"ALERTCONF_INACTIVE":p("It is presently <b>inactive<\/b>."),"ALERT_DOCUMENT_TEXT_FOOTER_TERMS_2":p("(c) {0} Scopus. All rights reserved. Any unauthorized use, reproduction, or transfer of this message or its contents, in any medium, is strictly prohibited. Scopus ® is a registered trademark of Elsevier B.V."),"SETALERT_LOGIN_CLOSE_TOOLTIP":p("close"),"ALERT_AUTHOR_IMAGE_ALT":p("Articles not published yet, but available online"),"ALERT_AUTHOR_TEXT_AUTHOR_DOCUMENT":p("New document(s) citing"),"ALERT_AUTHOR_VIEW_RESULTS":p("View all new results in Scopus"),"ALERTCONF_ALERTON":p("Alert will check {0} on {1} for new results and send mail in <b>HTML<\/b> format."),"ALERT_AUTHOR_TEXT_FOOTER_3":p("This email has been sent to you by Scopus ®, a product of Elsevier B.V., Radarweg 29, 1043NX Amsterdam, The Netherlands, Tel.+31 20 485 3911."),"DOCUMENT_CITATION_ALERTS":p("Document Citation Alerts"),"ALERT_SEARCH_HTML_DOCUMENT":p("Document"),"alert_my_list_status_inactive_alt":p("Click to activate alert"),"MAILALERT_VIEWDOC":p("View document citations in Scopus"),"ALERT_AUTHOR_ACCESS_ALL":p("Access all new results"),"alert_my_list_status_inactive":p("Inactive"),"ALERT_DOCUMENT":p("Alert:"),"MAINTALETLST_ALTNAM":p("Alert name"),"ALERTTEXT_TOMANAGE":p("To manage your alerts, go to Alerts in Scopus: {0}/alert/form/MyAlerts.uri"),"ALERT_AUTHOR_DOCUMENT_TITLE":p("Document title"),"alert_my_list_edit":p("Edit"),"ALERT_SEARCH_TEXT_OVERVIEW_3":p("In the overview below, you can see the {0} result for this Search Alert:"),"ALERT_SEARCH_TEXT_OVERVIEW_2":p("In the overview below, you can see the {0} results for this Search Alert:"),"ALERT_SEARCH_TEXT_OVERVIEW_1":p("In the overview below, you can see the First 25 of {0} results for this Search Alert:"),"MAILALERT_VIEWAUTH":p("View author citations in Scopus"),"alert_my_list_saved_on":p("Saved on"),"ALERTTEXT_INACTIVE":p("It is presently inactive."),"MAINTALETLST_DELSELALERT_ALT":p("Delete the selected alerts"),"ALERT_AUTHOR_TEXT_FOOTER_MANAGE":p("To manage your alerts, go to Alerts in Scopus: {0} ."),"ALERT_EMAILADDRESS":p("E-mail address(es):"),"SETALERT_LOGIN_CLOSE":p("close"),"MAINTALETLST_AUTHIDNOAVAIL":p("Author Identifier {0} is no longer available"),"ALERT_ET_AL_TEXT":p("et al."),"ALERTCONF_THEALERTS":p("The alerts will be sent to the following recipients:"),"ALERTTEXT_DOCALERT":p("Document citation alert"),"JS_MSG_ALERTS_UNSUBSCRIBE_EMAIL_REQUIRED":p("E-mail Address is required.\r\nPlease enter a complete e-mail address and click Send.\r\nExample:john.smith_40abc-university.edu"),"ALERT_SEARCH_HTML_CITATIONS":p("Citations"),"ALERT_SEARCH_EMAIL_SUBJECT":p("Scopus Search alert"),"alert_my_list_view":p("View"),"alert_my_list_unable_to_activate_alt":p("No valid email address to activate"),"document_alert":p("Document"),"alert_my_list_status_active_alt":p("Click to deactivate alert"),"DOCUMENT_CITATION_ALERT_MSG":p("When you set a Document Citation Alert you will receive an e-mail each time that document is cited in Scopus."),"ALERTTEXT_ALERTONTHE":p("Alert will check {0} on the {1} for new results and send mail in plain text format."),"MAINTALETLST_SRCHALL_TOOLTIP":p("Search for all articles by this author"),"forgotten":{"js":{"error":{"emailinvalid":p("Incomplete E-mail Address entered.\\r\\nPlease enter a complete e-mail address and click Send.\\r\\nExample: john.smith@abc-university.edu"),"required":{"email":p("E-mail Address is required.\\r\\nPlease enter a complete e-mail address and click Send.\\r\\nExample:john.smith_40abc-university.edu")}}}},"alert_my_list_search":p("Search"),"ALERT_AUTHOR_NEW_RESULT":p("{0} new result"),"ALERTCONF_ALERTWILL":p("Alert will check Every day for new results and send mail in <b>HTML<\/b> format."),"SETALERT_LOGIN_MORE_LOGIN_OPT":p("More login options"),"ALERTCONF_ACTIVE":p("It is presently <b>active<\/b>."),"ALERT_AUTHOR_SOURCE_TITLE":p("Source Title"),"MAINTALETLST_DOCCITUNAVAIL":p("Document Citation is currently unavailable."),"MAILALERT_VIEWSEARCH":p("View results in Scopus"),"ALERTTEXT_ALERTON":p("Alert will check {0} on {1} for new results and send mail in plain text format. "),"alert_my_list_setfeed_tooltip":p("Set feed"),"ALERT_AUTHOR_TEXT_FOOTER_QUESTIONS":p("If you have questions about this or other features of Scopus, Please visit our Info Site: http://www.info.sciverse.com/scopus/ ."),"ALERTTEXT_ANEWSEARCH":p("A new Search alert called \"{0}\" has been set up:"),"alert_my_list_doc_unavailable":p("Document Citation is currently unavailable."),"ALERT_AUTHOR_HTML_FOOTER_CONFIRMATIONID":p("Confirmation Job ID:"),"ALERT_AUTHOR_SOURCE":p("Source"),"MAILALERT_ANEWSEARCH":p("A new Search alert called <b>\"{0}\"<\/b> has been set up:"),"ALERT_SEARCH_HTML_TYPE":p("Search"),"MAINTALETLST_FREQ":p("Frequency"),"alert_message_delete_specific_js":p("Are you sure you want delete alert: {0} ?"),"ALERTS":p("Alerts"),"CTO_BATCH_APPLICAITON_EMAIL_SUBJECT":p("Citation Tracker from Scopus"),"alert_my_list_frequency":p("Frequency"),"ALERT_NAME":p("Alert name"),"MAINTALETLST_AUTHPREFNAME":p("{0} (Author Identifier&nbsp;{1})"),"ALERT_AUTHOR_HTML_FOOTER_9":p("Webuser ID: "),"ALERTCONF_TOMANAGE":p("To manage your alerts, go to <a href=\"{0}/alert/form/MyAlerts.uri\">Alerts<\/a> in Scopus."),"ALERT_AUTHOR_HTML_FOOTER_7":p("Copyright &#169; {0} <a href=\"../../https@www.elsevier.com\" target=\"_blank\"   title=\"Elsevier homepage (opens in a new window)\"> Elsevier B.V.<\/a> Scopus &#174; is a registered trademark of Elsevier B.V."),"ALERT_AUTHOR_HTML_FOOTER_8":p("Delivery Job: ID:"),"ALERT_AUTHOR_HTML_FOOTER_5":p("By using the Scopus alerts, you are agreeing to abide by the <a href=\"{0}\">Scopus Terms and Conditions<\/a>. "),"ALERT_EMAIL_FORMAT":p("E-mail format:"),"ALERT_AUTHOR_HTML_FOOTER_3":p("This email has been sent to you by Scopus &#174;, a product of Elsevier B.V., Radarweg 29, 1043NX Amsterdam, The Netherlands, Tel.+31 20 485 3911."),"ALERTUNSUB_RECIPIENT":p("Recipient has declined {0} alert"),"AUTHOR_CITATION_ALERT_MSG":p("When you set an Author Citation Alert you will receive an e-mail each time a document of that author is cited in Scopus."),"ALERT_AUTHOR_HTML_FOOTER_4":p("Elsevier respects your privacy and does not disclose, rent or sell your personal information to any non-affiliated third parties without your consent, except as may be stated in the <a href=\"{0}\">Scopus Online Privacy Policy<\/a> . "),"ALERT_AUTHOR_HTML_FOOTER_1":p("To manage your alerts, go to <a href=\"{0}\">Alerts<\/a> in Scopus. If this alert was set by someone else and you do not wish to receive it, please click <a href=\"{1}\">here<\/a>."),"ALERT_DOCUMENT_TEXT_CITATION_1":p("Your Document Citation Alert called \"{0}\" has found {1} new results on Scopus."),"ALERT_AUTHOR_HTML_FOOTER_2":p("If you have questions about this or other features of Scopus,please visit our <a href=\"../../www.info.sciverse.com/scopus/default.htm\">Info site<\/a>."),"ALERT_DOCUMENT_TEXT_CITATION_2":p("Your Document Citation Alert called \"{0}\" has found {1} new result on Scopus."),"MAILALERT_ANEWAUTHOR":p("A new Author citation alert called <b>\"{0}\"<\/b> has been set up:"),"ALERT_AUTHOR_EMAIL_SUBJECT":p("Scopus Author Citation alert"),"ALERT_DOCUMENT_TEXT_OVERVIEW_1":p("In the overview below, you can see the {0} results for this Document Citation Alert:"),"ALERTTEXT_THISEMAIL":p("This email has been sent to you by Scopus ®, a product of Elsevier B.V., Radarweg 29, 1043NX Amsterdam, The Netherlands, Tel.+31 20 485 3911."),"ALERTUNSUB_RECIPIENTAUTH":p("Recipient has declined Author citation alert"),"ALERT_DOCUMENT_TEXT_OVERVIEW_2":p("In the overview below, you can see the result for this Document Citation Alert:"),"ALERT_DOCUMENT_TEXT_OVERVIEW_3":p("In the overview below, you can see the First 25 of {0} results for this Document Citation Alert:"),"ALERT_AUTHOR_PREVIOUS":p("The previous alert was sent on {0}"),"ALERTTEXT_DOC":p("You can access all document citations at:"),"MAINTALETLST_INACTIVATE":p("Inactivate"),"ALERT_DOCUMENT_EMAIL_SUBJECT":p("Scopus Document Citation alert"),"ALERT_AUTHOR_YEAR":p("Year"),"ALERT_HEADER_TOOLTIP":p("Select to go to the Scopus main search page"),"SEARCH_ALERT_MSG":p("You will receive an alert each time one of these searches renders new results in Scopus."),"MAILALERT_ANEWDOCUMENT":p("A new Document citation alert called <b>\"{0}\"<\/b> has been set up:"),"ALERTTEXT_AUTH":p("You can access all author citations at:"),"SEARCH_ALERTS":p("Search Alerts"),"ALERT_HTML":p("HTML"),"alert":{"button":{"label":{"cancel":p("Cancel",({"alt":p("Cancel")})),"setalert":p("Set Alert",({"alt":p("Set Alert")})),"save":p("Save",({"alt":p("Save")}))}},"unsubscribe":{"form":{"cancel":p("Cancel",({"alt":p("Cancel")})),"msg":p("To stop receiving the Scopus alert named \"{0}\", please confirm your e-mail address below:"),"alt_title":p("Unsubscribe from Scopus Alert"),"unsubscribe":p("Unsubscribe"),"title":p("Unsubscribe from alert"),"email":p("E-mail address:"),"required":p("Required field")},"confirmation":{"msg2":p("You will no longer receive e-mails from this alert."),"msg1":p("You have now been removed from the Scopus alert named \"{0}\"."),"title":p("Unsubscribe successful")}},"maint":{"search":{"select":{"all":p("Select all Search alerts")},"inactivate":p("Inactivate this Search alert"),"delete":p("Delete this Search alert"),"email":p("You will receive an e-mail each time one of these searches renders new results in Scopus")},"author":{"select":{"all":p("Select all Author Citation alerts")},"inactivate":p("Inactivate this Author Citation alert"),"delete":p("Delete this Author Citation alert"),"email":p("You will receive an e-mail each time one of these documents of that author is cited in Scopus")},"document":{"select":{"all":p("Select all Document Citation alerts")},"inactivate":p("Inactivate this Document Citation alert"),"delete":p("Delete this Document Citation alert"),"email":p("You will receive an e-mail each time one of these documents is cited in Scopus")}},"instruction":{"search":p("A Search Alert is a saved search that you can schedule to run at certain intervals. If any new results are found you will receive an e-mail with the first 25 results and a link into Scopus to access all new results."),"author":p("An Author Citation Alert will keep you informed when a document cites this author, you can schedule this alert to run at certain intervals. If any new results are found you will receive an e-mail with the first 25 results and a link into Scopus to access all new results."),"document":p("A Document Citation Alert will keep you informed when a document cites this document, you can schedule this alert to run at certain intervals. If any new results are found you will receive an e-mail with the first 25 results and a link into Scopus to access all new results.")},"setup":{"alertHeading":p("Set Alert"),"search":p("Search:",({"edit":p("Edit",({"query":p("Edit query")}))})),"dayOfUnit":{"month_4":p("4th"),"month_30":p("30th"),"month_3":p("3rd"),"month_31":p("31st"),"month_6":p("6th"),"month_10":p("10th"),"saturday":p("Saturday"),"month_5":p("5th"),"month_11":p("11th"),"month_2":p("2nd"),"month_1":p("1st"),"month_8":p("8th"),"month_7":p("7th"),"month_9":p("9th"),"month_27":p("27th"),"wednesday":p("Wednesday"),"month_28":p("28th"),"friday":p("Friday"),"month_29":p("29th"),"month_23":p("23rd"),"month_24":p("24th"),"month_25":p("25th"),"monday":p("Monday"),"month_26":p("26th"),"month_20":p("20th"),"month_21":p("21st"),"week_7":p("Saturday"),"month_22":p("22nd"),"week_6":p("Friday"),"week_5":p("Thursday"),"week_4":p("Wednesday"),"week_3":p("Tuesday"),"week_2":p("Monday"),"week_1":p("Sunday"),"thursday":p("Thursday"),"sunday":p("Sunday"),"tuesday":p("Tuesday"),"month_16":p("16th"),"month_17":p("17th"),"month_18":p("18th"),"month_19":p("19th"),"month_12":p("12th"),"month_13":p("13th"),"month_14":p("14th"),"month_15":p("15th")},"author":p("Author:",({"no":{"id":p("Author Identifier {0} is no longer available")},"id":p("Author Identifier")})),"alertname":p("Name of alert:"),"document":p("Document:",({"search":{"tip":p("Search for all articles by this author")}})),"privacy":{"link":p("Privacy Policy",({"open":p("Privacy Policy (Opens in a new window)")}))},"loading":{"text":p("loading ..")},"results":{"go":p("Go")},"required":{"fields":p("=&nbsp;Required fields")},"frequency":{"sixmonths":p("Every six months"),"week":p("Every week"),"month":p("Every month"),"twoweeks":p("Every two weeks"),"twomonths":p("Every two months"),"day":p("Every day"),"threemonths":p("Every three months"),"on":{"the":{"day":p("on the")},"day":p("on")}}},"update":{"title":{"search":p("Edit a Search Alert"),"author":p("Edit an Author Citation Alert"),"document":p("Edit a Document Citation Alert")}},"create":{"title":{"search":p("Save a Search Alert"),"author":p("Set Author Citation Alert"),"document":p("Set Document Citation Alert")}},"my":{"nav":{"search":p("Search alerts",({"alt":p("Search alerts ")})),"author":p("Author citation alerts",({"alt":p("Author citation alerts")})),"document":p("Document citation alerts",({"alt":p("Document citation alerts")})),"manage":p("Manage the alerts you have set in Scopus.")},"list":{"view":{"results":p("Check for new results since {0}",({"alt":p("Retrieve new results since the last run")}))},"edit":{"alt":p("Edit alert")},"author":{"no":{"id":p("ID is no longer available")}},"delete":{"alt":p("Click to delete alert")}},"empty":{"new":{"search":p("Set new search alert",({"alt":p("Set new search alert")})),"author":p("Set new author citation alert",({"alt":p("Set new author citation alert")})),"document":p("Set new document citation alert",({"alt":p("Set new document citation alert")}))},"none":{"search":p("No Search Alerts have been set, click on {0} to set a new alert."),"author":p("No Author Citation Alerts have been set, click on {0} to set a new alert."),"document":p("No Document Citation Alerts have been set, click on {0} to set a new alert.")}}},"message":{"author":{"newalert":p("Your Author citation alert has been saved in 'Alerts'.")},"document":{"newalert":p("Your Document citation alert has been saved in 'Alerts'.")},"record":{"newalert":p("Your Document citation alert has been saved in 'Alerts'.")},"setup":{"search":{"edit":p("<h2 class=\"txtLarge infoText marginB5\">You have edited the search for this Alert. <\/h2><ol><li>Click '{0}' to save this change to your Search alert.<\/li><\/ol><div class=\"hr\" style=\"width:746px;\"><hr/><\/div><br>")}},"results":{"newalert":p("Your Search alert has been saved in 'Alerts'.")}},"error":{"popup":{"duplicate":{"exists":p("<span class=\"errorCntTxt\">Alert name exists. Please choose a unique alert name or  select 'Set Alert' to overwrite existing alert.<\/span>")}},"exists":{"setalert":{"js":p("Alert name exists. Please enter a unique alert name or  select 'Set Alert' to overwrite existing alert.")},"js":p("The name you have chosen for this alert already exists.\\nDo you want to replace it?")},"mandatory":{"setalertpopup":{"js":p("<span class=\"errorCntTxt\">You must enter all required fields.<\/span>")},"setalert":{"js":p("You must enter all required fields.")},"js":p("You have not provided mandatory information.\\r\\nPlease complete all required (*) fields and click Save.")}}},"ALERT_COMMON_FOOTER":p("Note: Results from CSA Illumina are not included in this e-mail alert. Your results list on Scopus for this e-mail alert can contain not only newly published documents, but also newly added archive material with an earlier publication date."),"ALERT_AUTHOR_HTML_RESULTS_1":p("First 25 of {0} results"),"ALERT_DOCUMENT_TEXT_PREVIOUS":p("Your previous alert for {0} was sent on {1}"),"ALERT_AUTHOR_HTML_RESULTS_2":p("{0} results"),"SETALERT_LOGIN_MORE_LOGIN_OPT_TOOLTIP":p("More login options"),"ALERT_AUTHOR_HTML_RESULTS_3":p("{0} result"),"ALERT_AUTHOR_QUERY":p("This alert is based on the following query:"),"alert_error_author_delete_js":p("No Author Citation Alerts were selected.\\r\\nPlease check one or more Author Citation Alerts from the list below and click delete."),"ALERT_DOCUMENT_HTML_HEADING":p("Document Citation alert:"),"ALERTCONF_COPYRIGHT":p("Copyright © {0} <a href=\"../../https@www.elsevier.com\">Elsevier B.V.<\/a> All rights reserved. Scopus ®  is a registered trademark of Elsevier B.V."),"ALERT_AUTHOR_UNAVAILABLE":p("Unavailable"),"ALERT_SEARCH_HTML_TITLE":p("Search Alert:"),"MAILALERT_YOUR":p("Your query :"),"ALERT_AUTHOR_HTML_FOOTER_ALERTID":p("Alert ID: "),"ALERTCONF_ELSEVIER":p("Elsevier respects your privacy and does not disclose, rent or sell your personal information to any non-affiliated third parties without your consent, except as may be stated in the <a href=\"../../https@www.elsevier.com/locate/privacypolicy\">Online Privacy Policy<\/a> . By using the Scopus alerts, you are agreeing to abide by the <a href=\"../../https@www.elsevier.com/locate/termsandconditions\">Terms and Conditions<\/a> ."),"JS_MSG_ALERTS_UNSUBSCRIBE_INVALIS_EMAIL":p("An invalid e-mail address was entered in the E-mail Address field.\r\nPlease check and correct the following email address: {0}"),"ALERT_AUTHOR_HEADING":p("Scopus author citation alert"),"alert_my_list_delete":p("Delete"),"alert_error_delete_js":p("No Search Alerts were selected.\\r\\nPlease check one or more Search Alerts from the list below and click delete."),"ALERTTEXT_AUTHALERT":p("Author citation alert"),"ALERT_DOCUMENT_TEXT_CITE":p("Document Citation Alert for:"),"ALERTUNSUB_RECIPIENTDOC":p("Recipient has declined Document citation alert"),"SETALERT_LOGIN_COLLAPSE_LOGIN_OPT_TOOLTIP":p("Collapse options")})})();function writeXmlHttpRequestCookie()
{document.cookie="xmlHttpRequest=true; path=/";}
jQuery(writeXmlHttpRequestCookie);function internalServerErrorHandler(request){if(request.getResponseHeader("sessionExpired")=="true")
{window.location="../standard/sessionexpired.uri";}}
var g_MAX_DOWNLOAD_DOC_COUNT;function PDFdownloadFromResultsPage(control){checkMaxDownloadDocsExceeded(control);var returnVal=true;if(g_maxDownloadSelectedExceeded){g_maxDownloadSelectedExceeded=false;returnVal=confirm(messages.results.error.max.download.exc(g_MAX_DOWNLOAD_DOC_COUNT));}
selCount=getSelectedDocumentCount(control);if(!g_maxDownloadSelectedExceeded&&selCount>0&&returnVal){openDownloadWindow('');document.SearchResultsForm.clickedLink.value="downloadButton";document.SearchResultsForm.target="downloadMain";document.SearchResultsForm.submit();}
return false;}
function PDFdownloadFromRecordPage(control,url){var ver=getChromeVersion();var chromeText=messages.resultlist.header.databutton.download.chrome45();var ieEdgeText=messages.resultlist.header.databutton.download.ieedge();if(getIEVersion()>=12){drawChromeMsgPopUp(ieEdgeText);return false;}
else if(parseInt(ver)>44){drawChromeMsgPopUp(chromeText);return false;}
openDownloadWindow(url);return true;}
function getChromeVersion(){var raw=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return raw?parseInt(raw[2],10):false;}
function drawChromeMsgPopUp(infoMessage){jQuery("#dialog-modal-chrome").dialog({resizable:false}).removeClass("displayNone");jQuery(".ui-dialog .ui-dialog-titlebar").css("display","none");jQuery("#dialogClose, #dialogOk").on("click",function(ev){jQuery("#dialog-modal-chrome").dialog("close");ev.preventDefault();});jQuery('.chromeDdmPopupText').html(infoMessage);}
function getIEVersion(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10);}
var trident=ua.indexOf('Trident/');if(trident>0){var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,ua.indexOf('.',rv)),10);}
var edge=ua.indexOf('Edge/');if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10);}
return false;}
function openDownloadWindow(url){if((navigator.appName=="Microsoft Internet Explorer")&&(parseFloat(navigator.appVersion)<4))
{return false;}
var parms='width=800'+',height=560'+',screenX=0'+',screenY=0'+',left=0'+',top=0'+',status=yes,toolbar=no,menubar=no,location=no'+',scrollbars=yes,resizable=yes';win=window.open(url,'downloadMain',parms);win.focus();return false;}
function openSeperateWindow(pageToLoad,winName,width,height,center)
{if(winName=='popuptip'){loc=2;}else{loc=0;}
args=getArgs(width,height,center,0,loc);if((parseInt(navigator.appVersion)>=4)&&(center)){if(window.sepwindow){sepwindow.close();sepwindow=window.open(pageToLoad,winName,args);}}
sepwindow=window.open(pageToLoad,winName,args);return false;}
function openGlobalhelp(pageToLoad,winName,width,height,center){if(winName=='popuptip'){loc=2;}else{loc=0;}
args=getArgs(width,height,center,0,loc);if((parseInt(navigator.appVersion)>=4)&&(center)){if(window.globalhelp){globalhelp.close();globalhelp=window.open(pageToLoad,winName,args);}}
globalhelp=window.open(pageToLoad,winName,args);return false;}
function getArgs(width,height,center,menu,loc){xposition=10;yposition=10;if((parseInt(navigator.appVersion)>=4)&&(center)){if(loc==0){xposition=(screen.width-width)-10;yposition=(screen.height-height)-58;}else if(loc==1){xposition=(screen.width-width)/2;yposition=((screen.height-height)/2)-67;}else if(loc==2){xposition=(screen.width-width)-10;yposition=0;}}
if(navigator.appName=='Netscape'){width=width+25;height=height+25;}
args="width="+width+",height="+height+",toolbar="+menu+",menubar="+menu
+",screenx="+xposition+",screeny="+yposition+",left="+xposition+",top="+
yposition+",resizable=1,scrollbars=1,";return args;}
function openSizedWindow(url,winname){if((navigator.appName=="Microsoft Internet Explorer")&&(parseFloat(navigator.appVersion)<4))
{return false;}
var parms='width=750'+',height=450'+',screenX=0'+',screenY=0'+',left=0'+',top=0'+',status=yes,toolbar=yes,menubar=yes,location=yes'+',scrollbars=yes,resizable=yes';win=window.open(url,winname,parms);win.focus();return false;}
function openBareWindow(url,winname){if((navigator.appName=="Microsoft Internet Explorer")&&(parseFloat(navigator.appVersion)<4))
{return false;}
var parms='width=750'+',height=450'+',screenX=0'+',screenY=0'+',left=0'+',top=0'+',status=no,toolbar=no,menubar=no,location=no'+',scrollbars=no,resizable=no';win=window.open(url,winname,parms);win.focus();return false;}
function openPopUpWindow(url,title,width,height,pos,menubar,toolbar,status,resizable,scrollbars,location){var features=createWindowFeatures(width,height,pos,menubar,toolbar,status,resizable,scrollbars,location);return window.open(url,title,features);}
function createWindowFeatures(width,height,pos,menubar,toolbar,status,resizable,scrollbars,location){var xpos=0;var ypos=0;var xfudge=20;var yfudge=40;switch(pos){case 1:xpos=0;ypos=0;break;case 2:xpos=(screen.width-width-xfudge)/2;ypos=0;break;case 3:xpos=screen.width-width-xfudge;ypos=0;break;case 4:xpos=0;ypos=(screen.height-height-yfudge)/2;break;case 5:xpos=(screen.width-width-xfudge)/2;ypos=(screen.height-height-yfudge)/2;break;case 6:xpos=screen.width-width-xfudge;ypos=(screen.height-height-yfudge)/2;break;case 7:xpos=0;ypos=(screen.height-height-yfudge);break;case 8:xpos=(screen.width-width-xfudge)/2;ypos=(screen.height-height-yfudge);break;case 9:xpos=(screen.width-width-xfudge);ypos=(screen.height-height-yfudge-20);break;case 10:xpos=(screen.width-width-10);ypos=0;break;}
args="width="+width+",height="+height+",screenx="+xpos+",left="+xpos+",screeny="+ypos+",top="+ypos+",menubar="+menubar+",toolbar="+toolbar+",location="+location+",status="+status+",resizable="+resizable+",scrollbars="+scrollbars;return args;}
function getJSCheckedUrl(url){url=url+"&javascript=t";return url;}
function getIEVersion(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10);}
var trident=ua.indexOf('Trident/');if(trident>0){var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,ua.indexOf('.',rv)),10);}
var edge=ua.indexOf('Edge/');if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10);}
return false;}
function clearForm(form){for(var i=0;i<form.elements.length;i++){if(form.elements[i].type!="hidden"){if(form.elements[i].type=="checkbox"){form.elements[i].checked=false;}else{form.elements[i].value="";}}}
return false;}
function flipLogin(button,from){if(from=="loginbox"){var t=jQuery('#loginBox');var u=jQuery('#loginPlus');if(t.css('display')=="none"){t.css('display','block');u.removeClass('plus');u.addClass('minus bg2');}else{t.css('display','none');u.removeClass('minus bg2');u.addClass('plus');}
showLoginBoxPos();}
if(from=="logoutbox"){var t=jQuery('#logoutBox');var u=jQuery('#logoutPlus');if(t.css('display')=="none"){t.css('display','block');u.removeClass('plus');u.addClass('minus bg2');}else{t.css('display','none');u.removeClass('minus bg2');u.addClass('plus');}
showLogoutBoxPos();}}
function showLoginBoxPos(){var divJSLogin=jQuery('#divJSLogin');var divJSLoginWidth=jQuery('#divJSLogin').width();var loginBox=jQuery("#loginBox");var divJSLoginLeftPos=divJSLogin.offset().left;var totalWidthPos=divJSLoginLeftPos+divJSLoginWidth;var windowWidth=jQuery(window).width();loginBox.css('right',windowWidth-totalWidthPos);}
function showLogoutBoxPos(){var logoutPlus=jQuery('a#logoutPlus');var logoutPlusWidth=logoutPlus.width()+20;var logoutBox=jQuery("#logoutBox");var logoutPlusLeftPos=logoutPlus.offset().left;var totalWidthPos=logoutPlusLeftPos+logoutPlusWidth;var windowWidth=jQuery(window).width();logoutBox.css({'right':windowWidth-totalWidthPos,'top':'26px'});}
function submitForm(actionUri){var associationForm=document.getElementById("associationForm");associationForm.action=actionUri;jQuery("#associationForm input[name=http_method_name]").val("GET");associationForm.submit();}
jQuery.fn.selectRange=function(start,end){if(!end)end=start;return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(start,end);}else if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',start);range.select();}});};function placeHolderInit(){var placeHolderSupport=false;var test=document.createElement('input');if('placeholder'in test)placeHolderSupport=true;if(!placeHolderSupport){jQuery('[placeholder]').unbind('keydown,blur,click').click(function(){jQuery(this).focus();jQuery(this).selectRange(0);}).keydown(function(){var input=jQuery(this);if(input.val()==input.attr('placeholder')){input.val('');input.removeClass('placeholder');}}).blur(function(){var input=jQuery(this);if(input.val()==''||input.val()==input.attr('placeholder')){input.addClass('placeholder');input.val(input.attr('placeholder'));}}).blur().parents('form').submit(function(){jQuery(this).find('[placeholder]').each(function(){var input=jQuery(this);if(input.val()==input.attr('placeholder')){input.val('');}});});}}
function processAlertClick(button){jQuery("#alertClick").val(button);document.SourceInfoForm.submit();}
jQuery(document).ready(function(){var txtZoneMsgBar=jQuery('#messageBar');if(txtZoneMsgBar.length){if(jQuery.trim(jQuery('#messageBar div').html())!=''){txtZoneMsgBar.addClass('displayBlock').removeClass('displayNone');}else{txtZoneMsgBar.addClass('displayNone').removeClass('displayBlock');}}
var pipeObj=jQuery("#hasjs");if(pipeObj!=null&&pipeObj!='undefined'&&pipeObj!=''){pipeObj.parent().css("background","none");}
if(jQuery('#logout_username').length&&jQuery('#settings-panel').length){myScopusCarsResponse();jQuery(window).resize(function(){setMyScopusPanelHeight();});}
if(jQuery('.ie9InfoMsgCnt').length){if(getIEVersion()==9){jQuery('.ie9InfoMsgCnt').removeClass('displayNone');}
else{jQuery('.ie9InfoMsgCnt').addClass('displayNone');}}});function myScopusCarsResponse(){var getLoginUserName=jQuery('#logout_username').text();var myScopusTxt=jQuery('#mainNav .myScopusTxt').text();jQuery('#settings-panel .CARS_panelTitle').html('<span>'+myScopusTxt+'</span><label class="carsUsrName">- '+getLoginUserName+'</label>').css({'display':'block'});setMyScopusPanelHeight();}
function setMyScopusPanelHeight(){jQuery('#settings-app-links-top').height('');jQuery('#modify-profile-group').height('');var settingAppLinksHeight=jQuery('#settings-app-links-top').height();var modifyProfileGrpHeight=jQuery('#modify-profile-group').height();if(settingAppLinksHeight>modifyProfileGrpHeight){jQuery('#modify-profile-group').css({'height':settingAppLinksHeight});}
else if(settingAppLinksHeight<modifyProfileGrpHeight){jQuery('#settings-app-links-top').css({'height':modifyProfileGrpHeight});}}
var InfoBubble={bubbleTimeout:2,currentBubble:null,timeoutBubbleID:null,show:function(aID){var aBubble=document.getElementById(aID);if(aBubble&&aBubble!=this.currentBubble){this.hide();aBubble.style.display='inline';this.currentBubble=aBubble;}
if(this.timeoutBubbleID){clearTimeout(this.timeoutBubbleID);}},hide:function(){if(this.currentBubble){this.currentBubble.style.display='none';this.currentBubble=null;if(this.timeoutBubbleID){clearTimeout(this.timeoutBubbleID);}}},timeout:function(){this.timeoutBubbleID=setTimeout('InfoBubble.hide()',this.bubbleTimeout*1000);}};function assertNotEmpty(control){assertNotEmpty(control,'');}
function assertNotEmpty(control,message){var reg=/\S/g;if(control.value==null||control.value==''||control.value.match(reg)==null){if(message!=null&&message!=''){alert(message);}
control.focus();control.select();return false;}
return true;}
function assertNotEmptyString(thisString){var reg=/\S/g;if(thisString==null||thisString==''||thisString.match(reg)==null){return false;}
return true;}
function assertChecked(control,message){if(control==null){return false;}
var isChecked=false;if((typeof(control)=="object")||(typeof(control)=="function")){if(control[0]!=undefined){for(var i=0;i<control.length;++i){if(control[i].checked){isChecked=control[i].checked;break;}}}
else{isChecked=control.checked;}}
if(arguments.length>1){if(!isChecked){if((message!=null)&&(message!="")){alert(message);}}}
return isChecked;}
function selectAllAlerts(form)
{var count=0;var check=form.selectAll.checked;for(var i=0;i<form.elements.length;i++)
{if(form.elements[i].name=="alerts")
{if(check&&form.elements[i].name!="selectAll"&&form.elements[i].type=="checkbox"){form.elements[i].checked=true;count++;}else{form.elements[i].checked=false;}}}
if(check)
{form.deletecount.value=count.toString();}
else
{form.deletecount.value="0";}
return true;}
function updateCheckedCount(form,checkbox)
{var currentCount=parseInt(form.deletecount.value);if(checkbox.checked)
{currentCount++;var totalCount=parseInt(form.totalcount.value);if(totalCount==currentCount){form.selectAll.checked=true;}}
else
{currentCount--;if(form.selectAll.checked){form.selectAll.checked=false;}}
form.deletecount.value=currentCount.toString();}
function setDeleteBtnText(btn,text)
{btn.alt="Delete the "+btn.form.deletecount.value+" selected "+text+" alerts";btn.title="Delete the "+btn.form.deletecount.value+" selected "+text+" alerts";}
function validateDelete(form)
{var checkedCount=0;for(var i=0;i<form.elements.length;i++)
{if(form.elements[i].checked&&form.elements[i].name=="alerts")
{checkedCount++;}}
if(checkedCount==0)
{if(form.elements['type'].value=="document"){alert(messages.alert_cite_error_delete_js());}else if(form.elements['type'].value=="authcite"){alert(messages.alert_author_error_delete_js());}else{alert(messages.alert_error_delete_js());}
return false;}
else if(checkedCount==1)
{return confirm(messages.alert_message_delete_one_js());}
else
{return confirm(messages.alert_message_delete_many_js());}}
function toggleStatus(obj,alertID,status){var closestUL=jQuery(obj).closest('li').parent();var url='../alert/submit/status.uri';var queryString="@alerts="+alertID+"&status="+status+"";url=url+queryString;jQuery.ajax({url:url,type:"get",success:function(){if(status=='SA'){closestUL.addClass('myAlertDisabled');obj.onclick=function(){toggleStatus(this,alertID,'SI');}
jQuery(obj).attr('title',alertProp.alert_my_list_status_inactive_alt());jQuery(obj).attr('aria-label',alertProp.alert_my_list_status_inactive_alt());obj.innerHTML=alertProp.alert_my_list_status_inactive();}else{closestUL.removeClass('myAlertDisabled');obj.onclick=function(){toggleStatus(this,alertID,'SA');}
jQuery(obj).attr('title',alertProp.alert_my_list_status_active_alt());jQuery(obj).attr('aria-label',alertProp.alert_my_list_status_active_alt());obj.innerHTML=alertProp.alert_my_list_status_active();}}});}
jQuery('document').ready(function(){setinitialValuesonTextArea();if(jQuery("#confirmMsgContainer,#errorMsgContainer,#warningMsgContainer,#infoMsgContainer,#orcidErrorMsgContainer,#txtZoneInfoMsgContainer,#confirmMsgContainerDiv,#erroMsgDiv").length){jQuery('.ariaHidden').focus();}
if(jQuery('#showRemoteAccessLnk').length){setRemoteAccessLnk();}});function setinitialValuesonTextArea(){jQuery('#emailAddressTextarea').off('keydown').on('keydown',function(e){var textAr=jQuery('#emailAddressTextarea').val();if(e.which==186||e.which==59){insertAtCaret('emailAddressTextarea',';\n');jQuery('#emailAddressTextarea').val(textAr+';\n');jQuery('#emailAddressTextarea').attr('rows',Number(jQuery('#emailAddressTextarea').attr('rows'))+1);e.preventDefault();setSelectionRange(jQuery('#emailAddressTextarea')[0],jQuery('#emailAddressTextarea').val().length,jQuery('#emailAddressTextarea').val().length);}
if(e.which==13){if(textAr.substr(textAr.length-1,textAr.length)!=';'){jQuery('#emailAddressTextarea').val(jQuery('#emailAddressTextarea').val()+';');jQuery('#emailAddressTextarea').attr('rows',Number(jQuery('#emailAddressTextarea').attr('rows'))+1);}
setSelectionRange(jQuery('#emailAddressTextarea')[0],jQuery('#emailAddressTextarea').val().length,jQuery('#emailAddressTextarea').val().length);}
if(textAr.substr(textAr.length-1,textAr.length)==';'&&e.which==186){e.preventDefault();}});jQuery('#emailAddressTextarea').off('keyup').on('keyup',function(e){resizeTxtArea();});jQuery('#frequency').bind('change',function(){setFrequency('change');});jQuery('#alertfrequencymonth #dayOfUnit').bind('change',function(){if(jQuery('#frequency').parents('.listItemLinkRow').css('visibility')=="visible"){$('#frequency').parents('li.lstRowHover').addClass('listItemHover');$('#frequency').parents('li.lstRowHover').attr('data-hover','true');}});jQuery('#alertfrequency #dayOfUnit').bind('change',function(){if(jQuery('#frequency').parents('.listItemLinkRow').css('visibility')=="visible"){$('#frequency').parents('li.lstRowHover').addClass('listItemHover');$('#frequency').parents('li.lstRowHover').attr('data-hover','true');}});if(jQuery('#emailAddressTextarea')[0]){jQuery('body').append('<div class="hiddenDiv" style="position:absolute;display:none;z-index:-100;top:0;visibility:hidden;"></div>');setFrequency('');resizeTxtArea('load');}}
function setSelectionRange(input,selectionStart,selectionEnd){if(input.setSelectionRange){input.focus();input.setSelectionRange(selectionStart,selectionEnd);}else if(input.createTextRange){var range=input.createTextRange();range.collapse(true);range.moveEnd('character',selectionEnd);range.moveStart('character',selectionStart);range.select();}}
function insertAtCaret(areaId,text){var txtarea=document.getElementById(areaId);var scrollPos=txtarea.scrollTop;var strPos=0;var br=((txtarea.selectionStart||txtarea.selectionStart=='0')?"ff":(document.selection?"ie":false));if(br=="ie"){txtarea.focus();var range=document.selection.createRange();range.moveStart('character',-txtarea.value.length);strPos=range.text.length;}else if(br=="ff")strPos=txtarea.selectionStart;var front=(txtarea.value).substring(0,strPos);var back=(txtarea.value).substring(strPos,txtarea.value.length);txtarea.value=front+text+back;strPos=strPos+text.length;if(br=="ie"){txtarea.focus();var range=txtarea.createTextRange();range.collapse(true);range.moveStart('character',-txtarea.value.length);range.moveStart('character',strPos);range.moveEnd('character',0);range.select();}else if(br=="ff"){txtarea.selectionStart=strPos;txtarea.selectionEnd=strPos;txtarea.focus();}
txtarea.scrollTop=scrollPos;}
function resizeTxtArea(type){content=jQuery('#emailAddressTextarea').val();if(type=='load'){content=content.replace(/;/g,";\n");}
jQuery('#emailAddressTextarea').val(content);content=content.replace(/\n/g,'<br>&nbsp;');jQuery('.hiddenDiv').html(content);jQuery('.hiddenDiv').css({'display':'block'});if(jQuery('.hiddenDiv').height()>=55){jQuery('#emailAddressTextarea').css('height',jQuery('.hiddenDiv').height());jQuery('.hiddenDiv').css({'display':'none'});jQuery('#emailAddressTextarea').height(jQuery('#emailAddressTextarea')[0].scrollHeight);}else{jQuery('#emailAddressTextarea').height(55);}}
function confirmAlertDelete(obj){var msg=alertProp.alert_message_delete_specific_js(jQuery.trim(jQuery(obj).parents('tr.alertListData').find('td.dataCol3 div,td.dataCol11 div').text()));var del=confirm(msg);if(!del){return false;}}
function setFrequency(evtType){var d=new Date();var currentDay=d.getDay();var currentDayofMonth=d.getDate();var currentdayforalerts=currentDay+1;if(evtType=='change'||jQuery("input[name='mode']").val()=='C'){jQuery("#alertfrequency option[value='"+currentdayforalerts+"']").attr('selected','selected');jQuery("#alertfrequencymonth option[value='"+currentDayofMonth+"']").attr('selected','selected');if(jQuery('#frequency').parents('.listItemLinkRow').css('visibility')=="visible"){$('#frequency').parents('li.lstRowHover').addClass('listItemHover');$('#frequency').parents('li.lstRowHover').attr('data-hover','true');}}
var frqVal=jQuery('#frequency').val();if(frqVal=='daily'){jQuery('#alertfrequency').hide();jQuery('#alertfrequencymonth').hide();}else if(frqVal=='weekly'||frqVal=='bi_weekly'){jQuery('#alertfrequency').show();jQuery('#alertfrequencymonth').hide();jQuery('select',jQuery('#alertfrequency')).attr('name','dayOfUnit');jQuery('select',jQuery('#alertfrequencymonth')).attr('name','');}else if(frqVal=='monthly'||frqVal=='ebi_monthly'||frqVal=='tri_monthly'||frqVal=='half_a_year'){jQuery('#alertfrequency').hide();jQuery('#alertfrequencymonth').show();jQuery('select',jQuery('#alertfrequency')).attr('name','');jQuery('select',jQuery('#alertfrequencymonth')).attr('name','dayOfUnit');}}
function validateAction(form,action)
{if(action=='inactivate'){return confirm(alertProp.alert_error_inactivate_js());}else if(action=='delete'){return confirm(alertProp.alert_message_delete_one_js());}else{return false;}}
jQuery('a#searchAnchor').click(function(e){if(jQuery('div#searchAlertsDiv').is(':visible')){e.preventDefault();jQuery('html, body').animate({scrollTop:150},0);}});jQuery('a#authorAnchor').click(function(e){if(jQuery('div#authorAlertsDiv').is(':visible')){e.preventDefault();jQuery('html,body').animate({scrollTop:jQuery('div#authorAlertsDiv').offset().top-150},0);}});jQuery('a#docAnchor').click(function(e){if(jQuery('div#docAlertsDiv').is(':visible')){e.preventDefault();jQuery('html,body').animate({scrollTop:jQuery('div#docAlertsDiv').offset().top-150},0);}});jQuery.fn.outerHTML=function(s){if(this.length==0)return false;var elem=this[0],name=elem.tagName.toLowerCase();if(elem.outerHTML)return elem.outerHTML;var attrs=jQuery.map(elem.attributes,function(i){return i.name+'="'+i.value+'"';});return"<"+name+(attrs.length>0?" "+attrs.join(" "):"")+">"+elem.innerHTML+"</"+name+">";};function setRemoteAccessLnk(){var getRemoteAccessLnk=jQuery('a#logout-remote-access').parent().outerHTML();jQuery('#showRemoteAccessLnk').html(getRemoteAccessLnk);}
var g_formSubmitOK=true;var allowed=true;var reqFromhubLink=false;var hubPopupParams="directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,resizable=no";var chapterListEnabled;function toggleRefChkBoxes(control){for(var i=0;i<control.form.elements.length;++i){var eleControl=control.form.elements[i];if(eleControl.type=="checkbox"&&eleControl.name=="selectedEIDs"){eleControl.checked=control.checked;}}}
function toggleSelectAllChkBox(control){if(control.checked==false){control.form.selectAllCheckBox.checked=false;}
else{var allChecked=true;for(var i=0;i<control.form.elements.length;++i){var eleControl=control.form.elements[i];if(eleControl.type=="checkbox"&&eleControl.name=="selectedEIDs"){if(eleControl.checked==false){allChecked=false;break;}}}
control.form.selectAllCheckBox.checked=allChecked;}}
function searchHistory(link){document.RecordPageForm.clickedLink.value=link;document.RecordPageForm.submit();}
function viewAllReferences(){if(allowed){allowed=false;setTimeout("enableAllowed()",waitTime);return true;}else{return false;}}
function enableAllowed(){allowed=true;}
function submitReferencesLinks(button){document.RecordPageForm.clickedLink.value=button;document.RecordPageForm.submit();if(jQuery("#confirmMsgContainer,#errorMsgContainer,#warningMsgContainer,#infoMsgContainer,#orcidErrorMsgContainer,#txtZoneInfoMsgContainer,#confirmMsgContainerDiv").length){jQuery('.ariaHidden').focus();}}
var authorlistHeight=jQuery('div#authorlist').height();var authorlistDiv=jQuery('div#authorlist');var affilListParagraph=jQuery('p#affiliationlist');var defaultListHeight=62;function displayAuthAffilInRecordPage(){var cnt=0;jQuery('div.reaxysBlk').css({display:'block',position:'absolute',visible:'hidden'});jQuery('div.reaxysBlk a img').each(function(){if(jQuery(this)[0].clientHeight<=1){cnt++;}});jQuery('div.reaxysBlk').css({display:'none',position:'',visible:'visible'});if(cnt<=0){jQuery('div.reaxysBlk').show();jQuery('div.reaxysHide').show();}
if(cnt==1){jQuery('div.reaxysBlk span.divider').hide();jQuery('div.reaxysBlk').show();jQuery('div.reaxysHide').show();}
var totalSpan=jQuery('#authorlist > span').size();var temp='',prevTemp='';var endSpan;var containerSpan=jQuery('<div>').appendTo('#SpanContainer');endSpan="(...), <span>"
+jQuery('#authorlist > span').eq(totalSpan-2).html()+"</span><span>"
+jQuery('#authorlist > span').eq(totalSpan-1).html()+"</span>";for(var j=0;j<totalSpan;j++){for(var i=0;i<=j;i++){temp+="<span>"+jQuery('#authorlist > span').eq(i).html()+"</span>";}
jQuery(containerSpan).html(temp+endSpan);if(jQuery(containerSpan).height()>80){temp="";jQuery(containerSpan).html(prevTemp+endSpan);j=totalSpan;}else{prevTemp=temp;temp="";jQuery(containerSpan).html("");}}
if(authorlistHeight>defaultListHeight){jQuery('#authorlist').css({'display':'none'});jQuery('#SpanContainer').show();jQuery(authorlistDiv).css({'height':defaultListHeight+'px','overflow':'hidden','display':'block'});jQuery('#viewHideAuthorList').css({'display':'inline-block'});jQuery('#viewHideAuthorList-dummy').css({'display':'inline-block'});}else{jQuery('#SpanContainer').hide();jQuery(authorlistDiv).css({'height':'auto','overflow':'hidden','display':'block'});jQuery('#viewHideAuthorList').css({'display':'none'});jQuery('#viewHideAuthorList-dummy').css({'display':'none'});}
jQuery(affilListParagraph).css({'visibility':'visible'});if(jQuery('#affiliationlist span').length>=3){jQuery('#affiliationlist span:gt(2), #affiliationlist br:gt(2)').hide();jQuery('#viewHideAffilList').css({'display':'inline-block'});jQuery('#viewHideAffilList-dummy').css({'display':'inline-block'});}
else{jQuery('#viewHideAffilList').css({'display':'none'});jQuery('#viewHideAffilList-dummy').css({'display':'none'});}}
function getReaxysData(){var scp=jQuery('#currentRecordPageSCP').val();var sid=scp!=undefined?scp:"";var param={'sid':sid};jQuery.post('reaxysDataAjax.uri',param).done(function(response){if(response.status==='OK'){var rxnsAvailability=response.reactions!==undefined,subsAvailability=response.substances!==undefined,reaxysObj=jQuery("<div>"),rxnsObj="",subsObj="",separatorSpanObj="",horizonLineObj=jQuery("<div>",{"class":""}),clearDivObj=jQuery("<div>",{"class":"clear"}),lineObj=jQuery("<div>",{"class":"hr"}),title="Reaxys Database Information",titleObj=jQuery("<h2>",{"class":"subTitle paddingT2","html":title});horizonLineObj=horizonLineObj.append(lineObj);if(rxnsAvailability){var rxnsUriObj=response["reactions"];var rxnsImgObj=jQuery("<img>",{"src":rxnsUriObj.imageURL,"alt":"","class":"floatL"});var rxnsAncObj=jQuery("<a>",{"href":rxnsUriObj.pageURL,"title":detail.RECORD_PAGE_REAXYS_VIEW_REACTIONS(),"target":"_blank"});rxnsObj=rxnsAncObj.append(rxnsImgObj);}
if(rxnsAvailability&&subsAvailability){separatorSpanObj=jQuery("<span>",{"class":"link_sep floatL","style":"padding-top:8px;padding-left:4px;","aria-hidden":"true","html":"|"});}
if(subsAvailability){var subsUriObj=response["substances"];var subsImgObj=jQuery("<img>",{"src":subsUriObj.imageURL,"alt":"","class":"floatL"});var subsAncObj=jQuery("<a>",{"href":subsUriObj.pageURL,"title":detail.RECORD_PAGE_REAXYS_VIEW_SUBSTANCES(),"target":"_blank"});subsObj=subsAncObj.append(subsImgObj);}
reaxysObj.append(horizonLineObj).append(titleObj).append(rxnsObj).append(separatorSpanObj).append(subsObj).append(clearDivObj);jQuery("div.reaxysHide").show();jQuery("div.reaxysBlk").show();jQuery("div#reaxysBlk").append(reaxysObj);}else{jQuery("div#reaxysBlk").remove();}}).fail(function(){jQuery("div#reaxysBlk").remove();});}
function showAffilContent(){jQuery('#viewHideAffilList a').html(detail.RECORD_PAGE_HIDE_AFFIL());jQuery('#affiliationlist span:gt(2), #affiliationlist br:gt(2)').show();jQuery('#viewHideAffilList a').addClass('hideAddIcon').removeClass('viewAddIcon retrievingImg');jQuery('#viewHideAffilList a').attr({'title':detail.RECORD_PAGE_HIDE_AFFIL(),'aria-expanded':'true'});jQuery('#viewHideAffilList a').unbind('click').bind('click',function(){showHideAffilContent();});}
var AffilContentLoaded=false;function showHideAffilContent(){if(jQuery('#viewHideAffilList a').html()==detail.RECORD_PAGE_VIEW_AFFIL()){if(!AffilContentLoaded){jQuery("#viewHideAffilList a").html(detail.RECORD_PAGE_RET()).addClass('retrievingImg').removeClass('viewAddIcon').unbind('click').attr({'aria-expanded':'true'});jQuery('#AffRetriving').css({'display':'inline-block'}).delay(5000).hide('0',function(){showAffilContent();AffilContentLoaded=true;});}else{showAffilContent();}}
else{jQuery('#viewHideAffilList a').html(detail.RECORD_PAGE_VIEW_AFFIL());jQuery('#affiliationlist span:gt(2), #affiliationlist br:gt(2)').hide();jQuery('#viewHideAffilList a').addClass('viewAddIcon').removeClass('hideAddIcon').attr({'title':detail.RECORD_PAGE_VIEW_AFFIL(),'aria-expanded':'false'});}}
jQuery('#viewHideAffilList a').unbind('click').bind('click',function(){showHideAffilContent();});function showAuthorContent(){jQuery('#viewHideAuthorList a').html(detail.RECORD_PAGE_HIDE_AUTHOR());jQuery(authorlistDiv).css({'height':'auto','overflow':'visible','display':'inline-block'});jQuery('#viewHideAuthorList a').addClass('hideAddIcon').removeClass('viewAddIcon retrievingImg');jQuery('#viewHideAuthorList a').attr('title',detail.RECORD_PAGE_HIDE_AUTHOR());jQuery('#viewHideAuthorList a').unbind('click').bind('click',function(){showHideAuthorContent();});jQuery('#authorlist').css("display:inline-block");jQuery('#SpanContainer').hide();}
var AuthorContentLoaded=false;function showHideAuthorContent(){if(jQuery('#viewHideAuthorList a').html()==detail.RECORD_PAGE_VIEW_AUTHOR()){if(!AuthorContentLoaded){jQuery("#viewHideAuthorList a").html(detail.RECORD_PAGE_RET()).addClass('retrievingImg').removeClass('viewAddIcon').unbind('click');jQuery('#AuthorRetriving').css({'display':'inline-block'}).delay(5000).hide('0',function(){showAuthorContent();AuthorContentLoaded=true;jQuery('#authorlist').css("display:inline-block");jQuery('#SpanContainer').hide();});}else{showAuthorContent();}}
else{jQuery('#viewHideAuthorList a').html(detail.RECORD_PAGE_VIEW_AUTHOR());jQuery(authorlistDiv).css({'height':defaultListHeight+'px','overflow':'hidden'});jQuery('#viewHideAuthorList a').addClass('viewAddIcon').removeClass('hideAddIcon');jQuery('#viewHideAuthorList a').attr('title',detail.RECORD_PAGE_VIEW_AUTHOR());jQuery('#authorlist').css({'display':'block'});jQuery('#SpanContainer').show();}}
jQuery('#viewHideAuthorList a').unbind('click').bind('click',function(){showHideAuthorContent();});jQuery('body').bind('click',function(e){if(!jQuery(e.target).closest('.recMoreLnk')){jQuery('.recMoreMenu').hide();}});jQuery('.arrowDownMore').click(function(e){var recmoreLnk=jQuery('.recMoreLnk');var recmoreLnkPosition=recmoreLnk.position();jQuery('.recMoreMenu').hide();if(recmoreLnkPosition!=null)
jQuery('#recMoreMenu').css({'display':'block','top':recmoreLnkPosition.top+4});});jQuery('.arrowUpMore').click(function(e){jQuery('.recMoreMenu').hide();});function getChapterList(){var chapterListUrl='/display/chapter.uri';var sourceId=jQuery('#sourceId').val();var sourceType=jQuery('#sourceType').val();var citationType=jQuery('#citationType').val();var currentEID=jQuery("#currentRecordPageEID").val();if(sourceId!=null&&sourceId!=''&&sourceType!=null&&sourceType!='')
{if(sourceType=='b'){param={sourceId:sourceId,requestedPage:"bookChapter",currentRecordPageEID:currentEID,citationCode:citationType};jQuery.ajax({url:chapterListUrl,dataType:"html",cache:false,data:param,type:"POST",success:function(data){if(data!=null&&data!=''){jQuery("#chapterList").html(data);jQuery('#chapterList').show();var bookEID=jQuery('#bookEID').val();if(jQuery('#sourceTitleId').length&&bookEID!=null&&bookEID!=''&&citationType!='bk'){jQuery('#sourceTitleId').attr('href','/record/display.uri?eid='+bookEID+'&origin=recordpage');jQuery('#sourceTitleId').removeClass('bookChapterLink');}}},error:function(data){}});}}}
function doucmentSaveToList(event){event.preventDefault();MessageContainer.removeMsgContatiner();var saveListURL=[];saveListURL.push('/citation/document.uri?origin=recordpage&view=&command=list&src=s&eid=');saveListURL.push(jQuery('#currentRecordPageEID').val());saveListURL.push('&type=AJAX');jQuery.ajax({url:saveListURL.join(''),dataType:"html",cache:false,type:"GET",success:function(data){if(data!=null&&data!=''){jQuery('#saveToList-data').html(data);event["data"]={position:Bubble.positionCenter,setDataBack:false};Bubble.showBubble(event);jQuery("#saveTolistSubmit").on('click',listSetUpSave);jQuery('#listPopupClose').on('click',closeListPopUp);setWaterMarkList();ddlOnloadforSelectmenu();jQuery('#saveListInput').on('keypress',function(e){if(e.keyCode==13){e.preventDefault();}});}},error:function(data){if(typeof console!=="undefined"){console.log('error in getting the save list pop up');}}});}
function closeListPopUp(event){event.preventDefault();Bubble.forceHideAll(event);}
function listSetUpSave(event){event.preventDefault();MessageContainer.removeMsgContatiner();var inputValTrim=jQuery.trim(jQuery('#listName').val());var listSelect=jQuery("#listId");var listFormObj=jQuery("#ListForm");if(listFormObj.length===0){listFormObj=jQuery("#searchResFormId");}
var savedListName='';var oldValue='';if(listSelect.length<1){if(inputValTrim.length<1){MessageContainer.parentContainerObj=jQuery('#saveListError');MessageContainer.messageType=MessageContainer.ERROR_MSG;MessageContainer.msgContent=messages.RECORD_SAVE_TO_LIST_NO_NAME();MessageContainer.insertMsgContainer();return;}
savedListName=inputValTrim;}else{var listSelectIndex=listSelect[0].selectedIndex;if(inputValTrim!=''&&listSelectIndex<=0){listFormObj.removeAttr('action');listFormObj.attr('action',"../list/savelist/add.uri");savedListName=inputValTrim;}
else if(inputValTrim==''&&listSelectIndex>0){listFormObj.removeAttr('action');listFormObj.attr('action',"../list/savelist/addItems.uri");savedListName=jQuery("select[name=listId] option:selected").text();oldValue=listFormObj.find("[name='listId']").val();listFormObj.find("[name='listId']").val(jQuery("select[name=listId] option:selected").val());}
else if(inputValTrim==''&&listSelectIndex<=0){MessageContainer.parentContainerObj=jQuery('#saveListError');MessageContainer.messageType=MessageContainer.ERROR_MSG;MessageContainer.msgContent=messages.RECORD_SAVELIST_ERROR_MESSAGES_EMPTYSUBMIT();MessageContainer.insertMsgContainer();return;}
else if(inputValTrim!=''&&listSelectIndex>0){MessageContainer.parentContainerObj=jQuery('#saveListError');MessageContainer.messageType=MessageContainer.ERROR_MSG;MessageContainer.msgContent=messages.RECORD_SAVELIST_ERROR_MESSAGES_BOTHSELECTED();MessageContainer.insertMsgContainer();return;}}
var saveForm=listFormObj;jQuery.ajax({url:saveForm.attr('action'),cache:false,type:"POST",dataType:'JSON',data:saveForm.serialize(),success:function(data){if(data!=null&&data!=''){if(data.hasOwnProperty('success')){MessageContainer.parentContainerObj=jQuery('#sciverseCanvasArea');MessageContainer.messageType=MessageContainer.CONFIRM_MSG;MessageContainer.msgContent=messages.RECORD_SAVED_LIST_SUCCESS(savedListName,data.saveListURL);MessageContainer.insertMsgContainer();Bubble.forceHideAll(event);}else{MessageContainer.isReplace=true;switch(data.error){case'MaxListEntry':MessageContainer.parentContainerObj=jQuery('#saveListError');MessageContainer.messageType=MessageContainer.ERROR_MSG;MessageContainer.msgContent=messages.RECORD_SAVED_LIST_MAXIMUM_LIMIT(data.size,data.saveListURL);MessageContainer.insertMsgContainer();break;case'MaxListItem':MessageContainer.parentContainerObj=jQuery('#saveListError');MessageContainer.messageType=MessageContainer.ERROR_MSG;MessageContainer.msgContent=messages.RECORD_SAVED_LISTITEM_MAXIMUM_LIMIT(data.size);MessageContainer.insertMsgContainer();break;case'DuplicateList':MessageContainer.parentContainerObj=jQuery('#saveListError');MessageContainer.messageType=MessageContainer.ERROR_MSG;MessageContainer.msgContent=messages.RECORD_SAVED_LIST_NAME_EXISTS();MessageContainer.insertMsgContainer();break;}
MessageContainer.isReplace=false;}}},error:function(data){listFormObj.find("[name='listId']").val(oldValue);if(typeof console!=="undefined"){console.log('error in save list call');}}});}
function setWaterMarkList(){if(jQuery('#listName').length){jQuery('#listName').searchForPlaceholder({left:{enabled:true,value:messages.RECORD_NEW_LIST_TXT(),type:"simple",classes:"searchForTxt"},right:{enabled:false}});}}
function ddlOnloadforSelectmenu(){jQuery('select.selectMenu').selectmenu({appendTo:jQuery(this).next()});}
function enableReferenceHeaderLnk(){if(jQuery("div.referenceLists input:checkbox:checked").length>0){jQuery('div.featuresRow span.docHeaderLinks').removeClass('lnkDisabled').addClass('lnkEnabled');showRefernceEnableToolTip();}
else{jQuery('div.featuresRow span.docHeaderLinks').addClass('lnkDisabled').removeClass('lnkEnabled');showRefernceDisableToolTip();}}
function enableDiableReferencesHeaderLnk(){if(jQuery("div.referenceLists input:checkbox:checked").length>0){enableReferenceHeaderLnk();}else{var directExport=jQuery('#referenceDirectExport');if(directExport.length>0){directExport.attr('title',Export.EXPORT_DISABLED_ALT());}}
jQuery('div.referenceLists input:checkbox, div.featuresRow input:checkbox').click(function(){enableReferenceHeaderLnk();});jQuery('body').on('click','.lnkDisabled a.clickAction',function(e){e.preventDefault();});jQuery('body').on('click','.lnkEnabled a.clickAction',function(e){var linkType=jQuery(this).attr('data-type');if(linkType=='exportLink'||linkType=='exportRecordLink'){oneClick.exportResult(e);}else if(linkType=='printLink'){submitReferencesLinks('Print');}else if(linkType=='emailLink'){submitReferencesLinks('Email');}
else if(linkType=='bibliographyLink'){submitReferencesLinks('Quikbib');}else if(linkType=='directExport'){oneClick.oneClickExportSubmit(e,false,'record');}else if(linkType=='directExportReference'){oneClick.oneClickExportSubmit(e,false,'reference');}});}
function showRefernceEnableToolTip(){var exportLink=Export.EXPORT_RECORD_REF_EXP_SELECTED();var printLink=detail.RECORD_REF_PRINT_SELECTED();var emailLink=detail.RECORD_REF_EMAIL_SELECTED();var biblioLink=detail.RECORD_REF_BIB_SELECTED();jQuery('.docHeaderLinks .print').attr('title',printLink);jQuery('.docHeaderLinks .email').attr('title',emailLink);jQuery('.docHeaderLinks .createBibliography').attr('title',biblioLink);var directExportRefObj=jQuery('#referenceDirectExport');if(directExportRefObj.length>0){var directExportTitle;if(oneClick.ExportSetting.Format=='CSV'){directExportTitle=Export.CSV_EXPORT_ALT();}
else if(oneClick.ExportSetting.Format=='REFWORKS'){directExportTitle=Export.REFWORK_EXPORT_ALT();}
else if(oneClick.ExportSetting.Format=='Mendeley'){directExportTitle=Export.SAVE_TO_MENDELEY_ALT();}
else if(oneClick.ExportSetting.Format=='RIS'){directExportTitle=Export.RIS_EXPORT_ALT();}
else if(oneClick.ExportSetting.Format=='TEXT'){directExportTitle=Export.TEXT_EXPORT_ALT();}
else if(oneClick.ExportSetting.Format=='BIB'){directExportTitle=Export.BIBTEXT_EXPORT_ALT();}
directExportRefObj.attr('title',directExportTitle);}else{jQuery('.docHeaderLinks .exportRefNormal').attr('title',exportLink);}}
function showRefernceDisableToolTip(){var disabledExport=Export.EXPORT_DISABLED_ALT();var disabledPrint=detail.RECORD_REF_PRINT_SELECTED_Disable();var disabledEmail=detail.RECORD_REF_EMAIL_SELECTED_Disable();var disabledBiblio=detail.RECORD_REF_BIB_SELECTED_Disable();jQuery('.docHeaderLinks .print').attr('title',disabledPrint);jQuery('.docHeaderLinks .email').attr('title',disabledEmail);jQuery('.docHeaderLinks .createBibliography').attr('title',disabledBiblio);var directExportRefObj=jQuery('.docHeaderLinks .directExport');if(directExportRefObj.length>0){directExportRefObj.attr('title',disabledExport);}else{jQuery('.docHeaderLinks .exportRefNormal').attr('title',disabledExport);}}
jQuery('.correspondenceEmail').on("click",function(e){var urlText="authoremail.uri"
+"@view=extended"
+"&authorEmail="+$(this).attr('href').substr(7)
+"&origin=abstract";setTimeout(function(){document.location.href=urlText;},100);});function hideBubbleAll(){jQuery('body').die("click").on('click',function(e){if(!jQuery(e.target).closest('#exportTrigger')[0]){Bubble.hideAll(e);}});jQuery(document).on("keyup",function(e){var code=e.keyCode||e.which;if(code===27){Bubble.forceHideAll(e);}});}
var setRecordBubbleCnt={buildSetRecordAlertBubble:function(event){var param={"loadingText1":alertProp.alert.setup.loading.text(),"loadingText2":alertProp.alert.setup.loading.text(),"loadDivContainer":"outerWrapper"};scopusTab.showHideLoadingContainer(param);jQuery('.loadingTableAndChart').show().css({'top':'4%',"left":"50%"});MessageContainer.removeMsgContatiner();var setCitationAlertUrl=jQuery('input[name="setCitationAlertUrl"]').val();retrieveAlertPop(setCitationAlertUrl,event);event.preventDefault();},buildRecordBubble:function(id,data,e,hideCallback){var alertContainer="#"+id+"-data";jQuery(alertContainer).html(data);e["data"]={position:Bubble.positionRight,setDataBack:false};if(id=='loginRegPopup'||id=='saveRegPopup'){var data={position:Bubble.positionRight,setDataBack:false};data.target=$('#'+id);Bubble.show(data);}else{Bubble.showBubble(e);}
if(jQuery('#bubble-'+id).length){ScopusLoginShowHideOptional.buidConatiner('contentWrapper',id);}
if(jQuery.isFunction(hideCallback)&&id=='loginRegPopup'){e["data"].hideCallback=loginRegReset();}else if(jQuery.isFunction(hideCallback)&&id=='saveRegPopup'){e["data"].hideCallback=saveRegReset();}}}
jQuery('div.citeinfo').on('click','#btnAlertSubmit',function(){submitAlert.alertConfirmationMessage=alertProp.alert.message.record.newalert(),submitAlert.alertIdentifier='saveAsAlert',submitAlert.alertType='documentCitationAlert',submitAlert.alertFornName='DocumentAlertValidatedForm',submitAlert.checkforDuplicateNames()});function retrieveAlertPop(alertUrl,e){jQuery.ajax({type:"GET",url:alertUrl,dataType:"html",success:function(data){setRecordBubbleCnt.buildRecordBubble(e.target.id,data,e,'');setinitialValuesonTextArea();e.preventDefault();setFrequency('');jQuery('#frequency').bind('change',function(){setFrequency('change');});scopusTab.hideLoadingOverlay();submitAlert.setEllipsisQuery();}});}
jQuery(document).ready(function(){var userStatus=jQuery('#loggedinUserStatus');if(userStatus.length>0){jQuery('#profilerightinside').on("click","#saveAsAlert",setRecordBubbleCnt.buildSetRecordAlertBubble);hideBubbleAll();}else{jQuery('#profilerightinside').on("click","#saveAsAlert",function(e){jQuery('#saveAsAlert').parent().addClass('CARS_panelClass');setRecordBubbleCnt.buildRecordBubble(e.target.id,jQuery('#login_pop_container').html(),e,'');});hideBubbleAll();}
jQuery("#closeAlertPopup, #closeloginPopup").live('click',function(e){Bubble.forceHideAll(e);e.preventDefault();});var fundingTextObj=jQuery('#fundingText');if(fundingTextObj.length){jQuery('#fundingTextHead').removeClass('displayNone');jQuery('#fundingText').removeClass('displayNone');var fundTxt=fundingTextObj.text();fundingTextObj.data("fullfundtext",fundTxt);if(fundTxt.length>1000){var viewMoreObj=jQuery('<a>').attr('id','fundViewMore').text('View More');var trunFundTxt=fundTxt.substr(0,1000)+'...';fundingTextObj.html(trunFundTxt);fundingTextObj.append(viewMoreObj);jQuery('#fundViewMore').on('click',function(){$('#fundingText').html(jQuery('#fundingText').data('fullfundtext'));});}else{fundingTextObj.html(fundTxt);}}});(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}}(function($){$.ui=$.ui||{};$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false;}
return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"));}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent;},uniqueId:(function(){var uuid=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});};})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id");}});}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap='#"+mapName+"']")[0];return!!img&&visible(img);}
return(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}
if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}
$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}
return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}
return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key));}else{return removeData.call(this);}};})($.fn.removeData);}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):orig.apply(this,arguments);};})($.fn.focus),disableSelection:(function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault();});};})(),enableSelection:function(){return this.unbind(".ui-disableSelection");},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}}
return 0;}});$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return;}
if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return;}
for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=(function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){try{events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove");}}catch(e){}}
orig(elems);};})($.cleanData);$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}
if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}
proxiedPrototype[prop]=(function(){var _super=function(){return base.prototype[prop].apply(this,arguments);},_superApply=function(args){return base.prototype[prop].apply(this,args);};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||name):name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}
$.widget.bridge(name,constructor);return constructor;};$.widget.extend=function(target){var input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}
return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=widget_slice.call(arguments,1),returnValue=this;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false;}
if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args));}
this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init){instance._init();}}else{$.data(this,fullName,new object(options,this));}});}
return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widget_uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}
this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options);}
if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}
key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key];}
curOption[key]=value;}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key];}
options[key]=value;}}
this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}
return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!value);if(value){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");}}
return this;},enable:function(){return this._setOptions({disabled:false});},disable:function(){return this._setOptions({disabled:true});},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}
if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}
$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}
return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}
var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy);}else{element.bind(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+
this.eventNamespace;element.unbind(eventName).undelegate(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());this.hoverable=$(this.hoverable.not(element).get());},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover");},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus");},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}
var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}
hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}
if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}
next();});}};});var widget=$.widget;var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false;});var mouse=$.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}
this._mouseMoved=false;(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}
this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}else if(!event.which){return this._mouseUp(event);}}
if(event.which||event.button){this._mouseMoved=true;}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}
this._mouseStop(event);}
mouseHandled=false;return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});(function(){$.ui=$.ui||{};var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)];}
function parseCss(element,property){return parseInt($.css(element,property),10)||0;}
function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}
if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}
if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}
return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}
$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}
var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}
div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow||isDocument?withinElement.width():withinElement.outerWidth(),height:isWindow||isDocument?withinElement.height():withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}
options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}
targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}
pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}
if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}
if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}
atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]==="center"){position.left-=elemWidth/2;}
if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]==="center"){position.top-=elemHeight/2;}
position.left+=myOffset[0];position.top+=myOffset[1];if(!supportsOffsetFractions){position.left=round(position.left);position.top=round(position.top);}
collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}
if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}
if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}
options.using.call(this,props,feedback);};}
elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}else if(overLeft>0){position.left+=overLeft;}else if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}else if(overTop>0){position.top+=overTop;}else if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop)){position.top+=myOffset+atOffset+offset;}}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom){position.top+=myOffset+atOffset+offset;}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});}
for(i in testElementStyle){testElement.style[i]=testElementStyle[i];}
testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;supportsOffsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement);})();})();var position=$.ui.position;$.widget("ui.draggable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative();}
if(this.options.addClasses){this.element.addClass("ui-draggable");}
if(this.options.disabled){this.element.addClass("ui-draggable-disabled");}
this._setHandleClassName();this._mouseInit();},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._removeHandleClassName();this._setHandleClassName();}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return;}
this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;this._blurActiveElement(event);if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0){return false;}
this.handle=this._getHandle(event);if(!this.handle){return false;}
this._blockFrames(o.iframeFix===true?"iframe":o.iframeFix);return true;},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_blurActiveElement:function(event){var document=this.document[0];if(!this.handleElement.is(event.target)){return;}
try{if(document.activeElement&&document.activeElement.nodeName.toLowerCase()!=="body"){$(document.activeElement).blur();}}catch(error){}},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}
this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return $(this).css("position")==="fixed";}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(event);this.originalPosition=this.position=this._generatePosition(event,false);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}
this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this._normalizeRightBottom();this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}
return true;},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top};},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset();}
this.position=this._generatePosition(event,true);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false;}
this.position=ui.position;}
this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
return false;},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}
if(this.dropped){dropped=this.dropped;this.dropped=false;}
if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}
return false;},_mouseUp:function(event){this._unblockFrames();if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}
if(this.handleElement.is(event.target)){this.element.focus();}
return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({});}else{this._clear();}
return this;},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true;},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle");},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle");},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));}
if(helperIsFunction&&helper[0]===this.element[0]){this._setPositionRelative();}
if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}
return helper;},_setPositionRelative:function(){if(!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_isRootNode:function(element){return(/(html|body)/i).test(element.tagName)||element===this.document[0];},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if(this._isRootNode(this.offsetParent[0])){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0};}
var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollTop():0),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollLeft():0)};},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return;}
if(o.containment==="window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}
if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}
if(o.containment.constructor===Array){this.containment=o.containment;return;}
if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
c=$(o.containment);ce=c[0];if(!ce){return;}
isUserScrollable=/(scroll|auto)/.test(c.css("overflow"));this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-
(parseInt(c.css("borderRightWidth"),10)||0)-
(parseInt(c.css("paddingRight"),10)||0)-
this.helperProportions.width-
this.margins.left-
this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-
(parseInt(c.css("borderBottomWidth"),10)||0)-
(parseInt(c.css("paddingBottom"),10)||0)-
this.helperProportions.height-
this.margins.top-
this.margins.bottom];this.relativeContainer=c;},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left))*mod))};},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;if(!scrollIsRootNode||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};}
if(constrainPosition){if(this.containment){if(this.relativeContainer){co=this.relativeContainer.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}else{containment=this.containment;}
if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}
if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?((top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3])?top:((top-this.offset.click.top>=containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?((left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2])?left:((left-this.offset.click.left>=containment[0])?left-o.grid[0]:left+o.grid[0])):left;}
if(o.axis==="y"){pageX=this.originalPageX;}
if(o.axis==="x"){pageY=this.originalPageY;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
(this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
(this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left)))};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}
this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy();}},_normalizeRightBottom:function(){if(this.options.axis!=="y"&&this.helper.css("right")!=="auto"){this.helper.width(this.helper.width());this.helper.css("right","auto");}
if(this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"){this.helper.height(this.helper.height());this.helper.css("bottom","auto");}},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui,this],true);if(/^(drag|start|stop)/.test(type)){this.positionAbs=this._convertPositionTo("absolute");ui.offset=this.positionAbs;}
return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[];$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");if(sortable&&!sortable.options.disabled){draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=false;$.each(draggable.sortables,function(){var sortable=this;if(sortable.isOver){sortable.isOver=0;draggable.cancelHelperRemoval=true;sortable.cancelHelperRemoval=false;sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")};sortable._mouseStop(event);sortable.options.helper=sortable.options._helper;}else{sortable.cancelHelperRemoval=true;sortable._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=false,sortable=this;sortable.positionAbs=draggable.positionAbs;sortable.helperProportions=draggable.helperProportions;sortable.offset.click=draggable.offset.click;if(sortable._intersectsWith(sortable.containerCache)){innermostIntersecting=true;$.each(draggable.sortables,function(){this.positionAbs=draggable.positionAbs;this.helperProportions=draggable.helperProportions;this.offset.click=draggable.offset.click;if(this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])){innermostIntersecting=false;}
return innermostIntersecting;});}
if(innermostIntersecting){if(!sortable.isOver){sortable.isOver=1;draggable._parent=ui.helper.parent();sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",true);sortable.options._helper=sortable.options.helper;sortable.options.helper=function(){return ui.helper[0];};event.target=sortable.currentItem[0];sortable._mouseCapture(event,true);sortable._mouseStart(event,true,true);sortable.offset.click.top=draggable.offset.click.top;sortable.offset.click.left=draggable.offset.click.left;sortable.offset.parent.left-=draggable.offset.parent.left-
sortable.offset.parent.left;sortable.offset.parent.top-=draggable.offset.parent.top-
sortable.offset.parent.top;draggable._trigger("toSortable",event);draggable.dropped=sortable.element;$.each(draggable.sortables,function(){this.refreshPositions();});draggable.currentItem=draggable.element;sortable.fromOutside=draggable;}
if(sortable.currentItem){sortable._mouseDrag(event);ui.position=sortable.position;}}else{if(sortable.isOver){sortable.isOver=0;sortable.cancelHelperRemoval=true;sortable.options._revert=sortable.options.revert;sortable.options.revert=false;sortable._trigger("out",event,sortable._uiHash(sortable));sortable._mouseStop(event,true);sortable.options.revert=sortable.options._revert;sortable.options.helper=sortable.options._helper;if(sortable.placeholder){sortable.placeholder.remove();}
ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position=draggable._generatePosition(event,true);draggable._trigger("fromSortable",event);draggable.dropped=false;$.each(draggable.sortables,function(){this.refreshPositions();});}}});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;if(t.css("cursor")){o._cursor=t.css("cursor");}
t.css("cursor",o.cursor);},stop:function(event,ui,instance){var o=instance.options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("opacity")){o._opacity=t.css("opacity");}
t.css("opacity",o.opacity);},stop:function(event,ui,instance){var o=instance.options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false);}
if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset();}},drag:function(event,ui,i){var o=i.options,scrolled=false,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];if(scrollParent!==document&&scrollParent.tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if((i.overflowOffset.top+scrollParent.offsetHeight)-event.pageY<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed;}else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed;}}
if(!o.axis||o.axis!=="y"){if((i.overflowOffset.left+scrollParent.offsetWidth)-event.pageX<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed;}else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed;}}}else{if(!o.axis||o.axis!=="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}
if(!o.axis||o.axis!=="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[];$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left-inst.margins.left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top-inst.margins.top;b=t+inst.snapElements[i].height;if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){if(inst.snapElements[i].snapping){(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=false;continue;}
if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left;}}
first=(ts||bs||ls||rs);if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left;}}
if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}
min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i);});this.css("zIndex",(min+group.length));}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("zIndex")){o._zIndex=t.css("zIndex");}
t.css("zIndex",o.zIndex);},stop:function(event,ui,instance){var o=instance.options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});var draggable=$.ui.draggable;$.widget("ui.resizable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(value){return parseInt(value,10)||0;},_isNumber:function(value){return!isNaN(parseInt(value,10));},_hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}
var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize();}
this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=$();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw";}
n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("<div class='ui-resizable-handle "+hname+"'></div>");axis.css({zIndex:o.zIndex});if("se"===handle){axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");}
this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis);}}
this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show();}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=$(this.handles[i]);this._on(this.handles[i],{"mousedown":that._mouseDown});}
if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize();}
this._handles=this._handles.add(this.handles[i]);}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.mouseover(function(){if(!that.resizing){if(this.className){axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);}
that.axis=axis&&axis[1]?axis[1]:"se";}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled){return;}
$(this).removeClass("ui-resizable-autohide");that._handles.show();}).mouseleave(function(){if(o.disabled){return;}
if(!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide();}});}
this._mouseInit();},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();};if(this.elementIsWrapper){_destroy(this.element);wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove();}
this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this;},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target)){capture=true;}}
return!this.options.disabled&&capture;},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,el=this.element;this.resizing=true;this._renderProxy();curleft=this._num(this.helper.css("left"));curtop=this._num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}
this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalPosition={left:curleft,top:curtop};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio==="number")?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var data,props,smp=this.originalMousePosition,a=this.axis,dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0,trigger=this._change[a];this._updatePrevProperties();if(!trigger){return false;}
data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey){data=this._updateRatio(data,event);}
data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);props=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize();}
if(!$.isEmptyObject(props)){this._updatePrevProperties();this._trigger("resize",event,this.ui());this._applyChanges();}
return false;},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;ista=pr.length&&(/textarea/i).test(pr[0].nodeName);soffseth=ista&&this._hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)};left=(parseInt(that.element.css("left"),10)+
(that.position.left-that.originalPosition.left))||null;top=(parseInt(that.element.css("top"),10)+
(that.position.top-that.originalPosition.top))||null;if(!o.animate){this.element.css($.extend(s,{top:top,left:left}));}
that.helper.height(that.size.height);that.helper.width(that.size.width);if(this._helper&&!o.animate){this._proportionallyResize();}}
$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper){this.helper.remove();}
return false;},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height};},_applyChanges:function(){var props={};if(this.position.top!==this.prevPosition.top){props.top=this.position.top+"px";}
if(this.position.left!==this.prevPosition.left){props.left=this.position.left+"px";}
if(this.size.width!==this.prevSize.width){props.width=this.size.width+"px";}
if(this.size.height!==this.prevSize.height){props.height=this.size.height+"px";}
this.helper.css(props);return props;},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth){b.minWidth=pMinWidth;}
if(pMinHeight>b.minHeight){b.minHeight=pMinHeight;}
if(pMaxWidth<b.maxWidth){b.maxWidth=pMaxWidth;}
if(pMaxHeight<b.maxHeight){b.maxHeight=pMaxHeight;}}
this._vBoundaries=b;},_updateCache:function(data){this.offset=this.helper.offset();if(this._isNumber(data.left)){this.position.left=data.left;}
if(this._isNumber(data.top)){this.position.top=data.top;}
if(this._isNumber(data.height)){this.size.height=data.height;}
if(this._isNumber(data.width)){this.size.width=data.width;}},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(this._isNumber(data.height)){data.width=(data.height*this.aspectRatio);}else if(this._isNumber(data.width)){data.height=(data.width/this.aspectRatio);}
if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null;}
if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}
return data;},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=this._isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=this._isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=this._isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=this._isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height),dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw){data.width=o.minWidth;}
if(isminh){data.height=o.minHeight;}
if(ismaxw){data.width=o.maxWidth;}
if(ismaxh){data.height=o.maxHeight;}
if(isminw&&cw){data.left=dw-o.minWidth;}
if(ismaxw&&cw){data.left=dw-o.maxWidth;}
if(isminh&&ch){data.top=dh-o.minHeight;}
if(ismaxh&&ch){data.top=dh-o.maxHeight;}
if(!data.width&&!data.height&&!data.left&&data.top){data.top=null;}else if(!data.width&&!data.height&&!data.top&&data.left){data.left=null;}
return data;},_getPaddingPlusBorderDimensions:function(element){var i=0,widths=[],borders=[element.css("borderTopWidth"),element.css("borderRightWidth"),element.css("borderBottomWidth"),element.css("borderLeftWidth")],paddings=[element.css("paddingTop"),element.css("paddingRight"),element.css("paddingBottom"),element.css("paddingLeft")];for(;i<4;i++){widths[i]=(parseInt(borders[i],10)||0);widths[i]+=(parseInt(paddings[i],10)||0);}
return{height:widths[0]+widths[2],width:widths[1]+widths[3]};},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return;}
var prel,i=0,element=this.helper||this.element;for(;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(prel);}
prel.css({height:(element.height()-this.outerDimensions.height)||0,width:(element.width()-this.outerDimensions.width)||0});}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx){return{width:this.originalSize.width+dx};},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!=="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).resizable("instance"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&that._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:(that.size.width-soffsetw),height:(that.size.height-soffseth)},left=(parseInt(that.element.css("left"),10)+
(that.position.left-that.originalPosition.left))||null,top=(parseInt(that.element.css("top"),10)+
(that.position.top-that.originalPosition.top))||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};if(pr&&pr.length){$(pr[0]).css({width:data.width,height:data.height});}
that._updateCache(data);that._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).resizable("instance"),o=that.options,el=that.element,oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce){return;}
that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=that._num(element.css("padding"+name));});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=(that._hasScroll(ce,"left")?ce.scrollWidth:cw);height=(that._hasScroll(ce)?ce.scrollHeight:ch);that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement,continueResize=true;if(ce[0]!==document&&(/static/).test(ce.css("position"))){cop=co;}
if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+
(that._helper?(that.position.left-co.left):(that.position.left-cop.left));if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}
that.position.left=o.helper?co.left:0;}
if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+
(that._helper?(that.position.top-co.top):that.position.top);if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}
that.position.top=that._helper?co.top:0;}
isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative){that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;}else{that.offset.left=that.element.offset().left;that.offset.top=that.element.offset().top;}
woset=Math.abs(that.sizeDiff.width+
(that._helper?that.offset.left-cop.left:(that.offset.left-co.left)));hoset=Math.abs(that.sizeDiff.height+
(that._helper?that.offset.top-cop.top:(that.offset.top-co.top)));if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}}
if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}}
if(!continueResize){that.position.left=that.prevPosition.left;that.position.top=that.prevPosition.top;that.size.width=that.prevSize.width;that.size.height=that.prevSize.height;}},stop:function(){var that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&(/relative/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}
if(that._helper&&!o.animate&&(/static/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).resizable("instance"),o=that.options;$(o.alsoResize).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)});});},resize:function(event,ui){var that=$(this).resizable("instance"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:(that.size.height-os.height)||0,width:(that.size.width-os.width)||0,top:(that.position.top-op.top)||0,left:(that.position.left-op.left)||0};$(o.alsoResize).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0){style[prop]=sum||null;}});el.css(style);});},stop:function(){$(this).removeData("resizable-alsoresize");}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).resizable("instance"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost==="string"?o.ghost:"");that.ghost.appendTo(that.helper);},resize:function(){var that=$(this).resizable("instance");if(that.ghost){that.ghost.css({position:"relative",height:that.size.height,width:that.size.width});}},stop:function(){var that=$(this).resizable("instance");if(that.ghost&&that.helper){that.helper.get(0).removeChild(that.ghost.get(0));}}});$.ui.plugin.add("resizable","grid",{resize:function(){var outerDimensions,that=$(this).resizable("instance"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=(grid[0]||1),gridY=(grid[1]||1),ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&(o.maxWidth<newWidth),isMaxHeight=o.maxHeight&&(o.maxHeight<newHeight),isMinWidth=o.minWidth&&(o.minWidth>newWidth),isMinHeight=o.minHeight&&(o.minHeight>newHeight);o.grid=grid;if(isMinWidth){newWidth+=gridX;}
if(isMinHeight){newHeight+=gridY;}
if(isMaxWidth){newWidth-=gridX;}
if(isMaxHeight){newHeight-=gridY;}
if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.left=op.left-ox;}else{if(newHeight-gridY<=0||newWidth-gridX<=0){outerDimensions=that._getPaddingPlusBorderDimensions(this);}
if(newHeight-gridY>0){that.size.height=newHeight;that.position.top=op.top-oy;}else{newHeight=gridY-outerDimensions.height;that.size.height=newHeight;that.position.top=op.top+os.height-newHeight;}
if(newWidth-gridX>0){that.size.width=newWidth;that.position.left=op.left-ox;}else{newWidth=gridX-outerDimensions.width;that.size.width=newWidth;that.position.left=op.left+os.width-newWidth;}}}});var resizable=$.ui.resizable;var lastActive,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var form=$(this);setTimeout(function(){form.find(":ui-button").button("refresh");},1);},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){name=name.replace(/'/g,"\\'");if(form){radios=$(form).find("[name='"+name+"'][type=radio]");}else{radios=$("[name='"+name+"'][type=radio]",radio.ownerDocument).filter(function(){return!this.form;});}}
return radios;};$.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled");}else{this.element.prop("disabled",this.options.disabled);}
this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",activeClass=!toggleButton?"ui-state-active":"";if(options.label===null){options.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html());}
this._hoverable(this.buttonElement);this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(options.disabled){return;}
if(this===lastActive){$(this).addClass("ui-state-active");}}).bind("mouseleave"+this.eventNamespace,function(){if(options.disabled){return;}
$(this).removeClass(activeClass);}).bind("click"+this.eventNamespace,function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation();}});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus");},blur:function(){this.buttonElement.removeClass("ui-state-focus");}});if(toggleButton){this.element.bind("change"+this.eventNamespace,function(){that.refresh();});}
if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled){return false;}});}else if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed","false");});}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");lastActive=this;that.document.one("mouseup",function(){lastActive=null;});}).bind("mouseup"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).removeClass("ui-state-active");}).bind("keydown"+this.eventNamespace,function(event){if(options.disabled){return false;}
if(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER){$(this).addClass("ui-state-active");}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active");});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click();}});}}
this._setOption("disabled",options.disabled);this._resetButton();},_determineButtonType:function(){var ancestor,labelSelector,checked;if(this.element.is("[type=checkbox]")){this.type="checkbox";}else if(this.element.is("[type=radio]")){this.type="radio";}else if(this.element.is("input")){this.type="input";}else{this.type="button";}
if(this.type==="checkbox"||this.type==="radio"){ancestor=this.element.parents().last();labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length){this.buttonElement=ancestor.find(labelSelector);}}
this.element.addClass("ui-helper-hidden-accessible");checked=this.element.is(":checked");if(checked){this.buttonElement.addClass("ui-state-active");}
this.buttonElement.prop("aria-pressed",checked);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" ui-state-active "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title");}},_setOption:function(key,value){this._super(key,value);if(key==="disabled"){this.widget().toggleClass("ui-state-disabled",!!value);this.element.prop("disabled",!!value);if(value){if(this.type==="checkbox"||this.type==="radio"){this.buttonElement.removeClass("ui-state-focus");}else{this.buttonElement.removeClass("ui-state-focus ui-state-active");}}
return;}
this._resetButton();},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(isDisabled!==this.options.disabled){this._setOption("disabled",isDisabled);}
if(this.type==="radio"){radioGroup(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true");}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false");}});}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true");}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false");}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label);}
return;}
var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text){buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":(icons.primary?"-primary":"-secondary")));}
if(icons.primary){buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");}
if(icons.secondary){buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");}
if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){buttonElement.attr("title",$.trim(buttonText));}}}else{buttonClasses.push("ui-button-text-only");}
buttonElement.addClass(buttonClasses.join(" "));}});$.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset");},_init:function(){this.refresh();},_setOption:function(key,value){if(key==="disabled"){this.buttons.button("option",key,value);}
this._super(key,value);},refresh:function(){var rtl=this.element.css("direction")==="rtl",allButtons=this.element.find(this.options.items),existingButtons=allButtons.filter(":ui-button");allButtons.not(":ui-button").button();existingButtons.button("refresh");this.buttons=allButtons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end();},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");}});var button=$.ui.button;var menu=$.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true");}
this._on({"mousedown .ui-menu-item":function(event){event.preventDefault();},"click .ui-menu-item":function(event){var target=$(event.target);if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.select(event);if(!event.isPropagationStopped()){this.mouseHandled=true;}
if(target.has(".ui-menu").length){this.expand(event);}else if(!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer);}}}},"mouseenter .ui-menu-item":function(event){if(this.previousFilter){return;}
var target=$(event.currentTarget);target.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(event,target);},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.find(this.options.items).eq(0);if(!keepActiveItem){this.focus(event,item);}},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(event);}});},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(this._closeOnDocumentClick(event)){this.collapseAll(event);}
this.mouseHandled=false;}});},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat")){elem.remove();}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");},_keydown:function(event){var match,prev,character,skip,preventDefault=true;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(event);}
break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}
match=this._filterMenuItems(character);match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);match=this._filterMenuItems(character);}
if(match.length){this.focus(event,match);this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}
if(preventDefault){event.preventDefault();}},_activate:function(event){if(!this.active.is(".ui-state-disabled")){if(this.active.is("[aria-haspopup='true']")){this.expand(event);}else{this.select(event);}}},refresh:function(){var menus,items,that=this,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.parent(),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"));});menus=submenus.add(this.element);items=menus.find(this.options.items);items.not(".ui-menu-item").each(function(){var item=$(this);if(that._isDivider(item)){item.addClass("ui-widget-content ui-menu-divider");}});items.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});items.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0])){this.blur();}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role];},_setOption:function(key,value){if(key==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value);}
this._super(key,value);},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.addClass("ui-state-focus").removeClass("ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"));}
this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");if(event&&event.type==="keydown"){this._close();}else{this.timer=this._delay(function(){this._close();},this.delay);}
nested=item.children(".ui-menu");if(nested.length&&event&&(/^mouse/.test(event.type))){this._startOpening(nested);}
this.activeMenu=item.parent();this._trigger("focus",event,{item:item});},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.outerHeight();if(offset<0){this.activeMenu.scrollTop(scroll+offset);}else if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer);}
if(!this.active){return;}
this.active.removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active});},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return;}
this.timer=this._delay(function(){this._close();this._open(submenu);},this.delay);},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position);},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element;}
this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu;},this.delay);},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element;}
startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active");},_closeOnDocumentClick:function(event){return!$(event.target).closest(".ui-menu").length;},_isDivider:function(item){return!/[^\-\u2014\u2013\s]/.test(item.text());},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},next:function(event){this._move("next","first",event);},previous:function(event){this._move("prev","last",event);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active
[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);}else{next=this.active
[direction+"All"](".ui-menu-item").eq(0);}}
if(!next||!next.length||!this.active){next=this.activeMenu.find(this.options.items)[filter]();}
this.focus(event,next);},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isLastItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.find(this.options.items)
[!this.active?"first":"last"]());}},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isFirstItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.find(this.options.items).first());}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(event,true);}
this._trigger("select",event,ui);},_filterMenuItems:function(character){var escapedCharacter=character.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),regex=new RegExp("^"+escapedCharacter,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return regex.test($.trim($(this).text()));});}});var selectmenu=$.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var selectmenuId=this.element.uniqueId().attr("id");this.ids={element:selectmenuId,button:selectmenuId+"-button",menu:selectmenuId+"-menu"};this._drawButton();this._drawMenu();if(this.options.disabled){this.disable();}},_drawButton:function(){var that=this;this.label=$("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(event){this.button.focus();event.preventDefault();}});this.element.hide();this.button=$("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);$("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=$("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!that.menuItems){that._refreshMenu();}});this._hoverable(this.button);this._focusable(this.button);},_drawMenu:function(){var that=this;this.menu=$("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=$("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(event,ui){event.preventDefault();that._setSelection();that._select(ui.item.data("ui-selectmenu-item"),event);},focus:function(event,ui){var item=ui.item.data("ui-selectmenu-item");if(that.focusIndex!=null&&item.index!==that.focusIndex){that._trigger("focus",event,{item:item});if(!that.isOpen){that._select(item,event);}}
that.focusIndex=item.index;that.button.attr("aria-activedescendant",that.menuItems.eq(item.index).attr("id"));}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false;};this.menuInstance._isDivider=function(){return false;};},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());if(!this.options.width){this._resizeButton();}},_refreshMenu:function(){this.menu.empty();var item,options=this.element.find("option");if(!options.length){return;}
this._parseOptions(options);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup");item=this._getSelectedItem();this.menuInstance.focus(null,item);this._setAria(item.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"));},open:function(event){if(this.options.disabled){return;}
if(!this.menuItems){this._refreshMenu();}else{this.menu.find(".ui-state-focus").removeClass("ui-state-focus");this.menuInstance.focus(null,this._getSelectedItem());}
this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",event);},_position:function(){this.menuWrap.position($.extend({of:this.button},this.options.position));},close:function(event){if(!this.isOpen){return;}
this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",event);},widget:function(){return this.button;},menuWidget:function(){return this.menu;},_renderMenu:function(ul,items){var that=this,currentOptgroup="";$.each(items,function(index,item){if(item.optgroup!==currentOptgroup){$("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+
(item.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:item.optgroup}).appendTo(ul);currentOptgroup=item.optgroup;}
that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-selectmenu-item",item);},_renderItem:function(ul,item){var li=$("<li>");if(item.disabled){li.addClass("ui-state-disabled");}
this._setText(li,item.label);return li.appendTo(ul);},_setText:function(element,value){if(value){element.text(value);}else{element.html("&#160;");}},_move:function(direction,event){var item,next,filter=".ui-menu-item";if(this.isOpen){item=this.menuItems.eq(this.focusIndex);}else{item=this.menuItems.eq(this.element[0].selectedIndex);filter+=":not(.ui-state-disabled)";}
if(direction==="first"||direction==="last"){next=item[direction==="first"?"prevAll":"nextAll"](filter).eq(-1);}else{next=item[direction+"All"](filter).eq(0);}
if(next.length){this.menuInstance.focus(event,next);}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex);},_toggle:function(event){this[this.isOpen?"close":"open"](event);},_setSelection:function(){var selection;if(!this.range){return;}
if(window.getSelection){selection=window.getSelection();selection.removeAllRanges();selection.addRange(this.range);}else{this.range.select();}
this.button.focus();},_documentClick:{mousedown:function(event){if(!this.isOpen){return;}
if(!$(event.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length){this.close(event);}}},_buttonEvents:{mousedown:function(){var selection;if(window.getSelection){selection=window.getSelection();if(selection.rangeCount){this.range=selection.getRangeAt(0);}}else{this.range=document.selection.createRange();}},click:function(event){this._setSelection();this._toggle(event);},keydown:function(event){var preventDefault=true;switch(event.keyCode){case $.ui.keyCode.TAB:case $.ui.keyCode.ESCAPE:this.close(event);preventDefault=false;break;case $.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(event);}
break;case $.ui.keyCode.UP:if(event.altKey){this._toggle(event);}else{this._move("prev",event);}
break;case $.ui.keyCode.DOWN:if(event.altKey){this._toggle(event);}else{this._move("next",event);}
break;case $.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(event);}else{this._toggle(event);}
break;case $.ui.keyCode.LEFT:this._move("prev",event);break;case $.ui.keyCode.RIGHT:this._move("next",event);break;case $.ui.keyCode.HOME:case $.ui.keyCode.PAGE_UP:this._move("first",event);break;case $.ui.keyCode.END:case $.ui.keyCode.PAGE_DOWN:this._move("last",event);break;default:this.menu.trigger(event);preventDefault=false;}
if(preventDefault){event.preventDefault();}}},_selectFocusedItem:function(event){var item=this.menuItems.eq(this.focusIndex);if(!item.hasClass("ui-state-disabled")){this._select(item.data("ui-selectmenu-item"),event);}},_select:function(item,event){var oldIndex=this.element[0].selectedIndex;this.element[0].selectedIndex=item.index;this._setText(this.buttonText,item.label);this._setAria(item);this._trigger("select",event,{item:item});if(item.index!==oldIndex){this._trigger("change",event,{item:item});}
this.close(event);},_setAria:function(item){var id=this.menuItems.eq(item.index).attr("id");this.button.attr({"aria-labelledby":id,"aria-activedescendant":id});this.menu.attr("aria-activedescendant",id);},_setOption:function(key,value){if(key==="icons"){this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(value.button);}
this._super(key,value);if(key==="appendTo"){this.menuWrap.appendTo(this._appendTo());}
if(key==="disabled"){this.menuInstance.option("disabled",value);this.button.toggleClass("ui-state-disabled",value).attr("aria-disabled",value);this.element.prop("disabled",value);if(value){this.button.attr("tabindex",-1);this.close();}else{this.button.attr("tabindex",0);}}
if(key==="width"){this._resizeButton();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element||!element[0]){element=this.element.closest(".ui-front");}
if(!element.length){element=this.document[0].body;}
return element;},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen);},_resizeButton:function(){var width=this.options.width;if(!width){width=this.element.show().outerWidth();this.element.hide();}
this.button.outerWidth(width);},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1));},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")};},_parseOptions:function(options){var data=[];options.each(function(index,item){var option=$(item),optgroup=option.parent("optgroup");data.push({element:option,index:index,value:option.val(),label:option.text(),optgroup:optgroup.attr("label")||"",disabled:optgroup.prop("disabled")||option.prop("disabled")});});this.items=data;},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element);}});var dataSpace="ui-effects-",jQuery=$;$.effects={effect:{}};(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]];}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha);},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},"percent":{max:1},"degrees":{mod:360,floor:true}},support=color.support={},supportElem=jQuery("<p>")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1};});function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def;}
value=type.floor?~~value:parseFloat(value);if(isNaN(value)){return prop.def;}
if(type.mod){return(value+type.mod)%type.mod;}
return 0>value?0:type.max<value?type.max:value;}
function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false;}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent);}
return inst;}
return colors[string];}
color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this;}
if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined;}
var inst=this,type=jQuery.type(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array";}
if(type==="string"){return this.parse(stringParse(red)||colors._default);}
if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop);});return this;}
if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice();}});}else{each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return;}
inst[cache]=space.to(inst._rgba);}
inst[cache][prop.idx]=clamp(red[key],prop,true);});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from){inst._rgba=space.from(inst[cache]);}}});}
return this;}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same;}});}
return same;});return same;},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName);}});return used.pop();},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return;}
if(startValue===null){result[index]=endValue;}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod;}else if(startValue-endValue>type.mod/2){startValue-=type.mod;}}
result[index]=clamp((endValue-startValue)*distance+startValue,prop);}});return this[spaceName](result);},blend:function(opaque){if(this._rgba[3]===1){return this;}
var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v;}));},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?(i>2?1:0):v;});if(rgba[3]===1){rgba.pop();prefix="rgb(";}
return prefix+rgba.join()+")";},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0;}
if(i&&i<3){v=Math.round(v*100)+"%";}
return v;});if(hsla[3]===1){hsla.pop();prefix="hsl(";}
return prefix+hsla.join()+")";},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255));}
return"#"+jQuery.map(rgba,function(v){v=(v||0).toString(16);return v.length===1?"0"+v:v;}).join("");},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString();}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6;}
if(h*2<1){return q;}
if(h*3<2){return p+(q-p)*((2/3)-h)*6;}
return p;}
spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]];}
var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0;}else if(r===max){h=(60*(g-b)/diff)+360;}else if(g===max){h=(60*(b-r)/diff)+120;}else{h=(60*(r-g)/diff)+240;}
if(diff===0){s=0;}else if(l<=0.5){s=diff/add;}else{s=diff/(2-add);}
return[Math.round(h)%360,s,l,a==null?1:a];};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]];}
var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a];};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba);}
if(value===undefined){return this[cache].slice();}
var ret,type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx];}
local[prop.idx]=clamp(val,prop);});if(from){ret=color(from(local));ret[cache]=local;return ret;}else{return color(local);}};each(props,function(key,prop){if(color.fn[key]){return;}
color.fn[key]=function(value){var vtype=jQuery.type(value),fn=(key==="alpha"?(this._hsla?"hsla":"rgba"):spaceName),local=this[fn](),cur=local[prop.idx],match;if(vtype==="undefined"){return cur;}
if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value);}
if(value==null&&prop.empty){return this;}
if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);}}
local[prop.idx]=value;return this[fn](local);};});});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if(value!=="transparent"&&(jQuery.type(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&curElem&&curElem.style){try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode;}catch(e){}}
value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default");}
value=value.toRgbaString();}
try{elem.style[hook]=value;}catch(e){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true;}
jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos));};});};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value;});return expanded;}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};})(jQuery);(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jQuery.style(fx.elem,prop,fx.end);fx.setAttr=true;}};});function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string"){styles[$.camelCase(key)]=style[key];}}}else{for(key in style){if(typeof style[key]==="string"){styles[key]=style[key];}}}
return styles;}
function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value){if(!shorthandStyles[name]){if($.fx.step[name]||!isNaN(parseFloat(value))){diff[name]=value;}}}}
return diff;}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)};});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action]){animated[action+"Class"](value[action]);}});};applyClassChange();allAnimations=allAnimations.map(function(){this.end=getElementStyles(this.el[0]);this.diff=styleDifference(this.start,this.end);return this;});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo);}});this.el.animate(this.diff,opts);return dfd.promise();});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"");});});o.complete.call(animated[0]);});});};$.fn.extend({addClass:(function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.addClass),removeClass:(function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.removeClass),toggleClass:(function(orig){return function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined){if(!speed){return orig.apply(this,arguments);}else{return $.effects.animateClass.call(this,(force?{add:classNames}:{remove:classNames}),speed,easing,callback);}}else{return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing);}};})($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback);}});})();(function(){$.extend($.effects,{version:"1.11.4",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null){element.data(dataSpace+set[i],element[0].style[set[i]]);}}},restore:function(element,set){var val,i;for(i=0;i<set.length;i++){if(set[i]!==null){val=element.data(dataSpace+set[i]);if(val===undefined){val="";}
element.css(set[i],val);}}},setMode:function(el,mode){if(mode==="toggle"){mode=el.is(":hidden")?"show":"hide";}
return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height;}
switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/original.width;}
return{x:x,y:y};},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent();}
var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id;}catch(e){active=document.body;}
element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}
wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"});}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto";}});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"});}
element.css(size);return wrapper.css(props).show();},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}}
return element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1];}});return value;}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect;}
effect={effect:effect};if(options==null){options={};}
if($.isFunction(options)){callback=options;speed=null;options={};}
if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;options={};}
if($.isFunction(speed)){callback=speed;speed=null;}
if(options){$.extend(effect,options);}
speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect;}
function standardAnimationOption(option){if(!option||typeof option==="number"||$.fx.speeds[option]){return true;}
if(typeof option==="string"&&!$.effects.effect[option]){return true;}
if($.isFunction(option)){return true;}
if(typeof option==="object"&&!option.effect){return true;}
return false;}
$.fn.extend({effect:function(){var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect];if($.fx.off||!effectMethod){if(mode){return this[mode](args.duration,args.complete);}else{return this.each(function(){if(args.complete){args.complete.call(this);}});}}
function run(next){var elem=$(this),complete=args.complete,mode=args.mode;function done(){if($.isFunction(complete)){complete.call(elem[0]);}
if($.isFunction(next)){next();}}
if(elem.is(":hidden")?mode==="hide":mode==="show"){elem[mode]();done();}else{effectMethod.call(elem[0],args,done);}}
return queue===false?this.each(run):this.queue(queue||"fx",run);},show:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args);}};})($.fn.show),hide:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args);}};})($.fn.hide),toggle:(function(orig){return function(option){if(standardAnimationOption(option)||typeof option==="boolean"){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args);}};})($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit];}});return val;}});})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2);};});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Circ:function(p){return 1-Math.sqrt(1-p*p);},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15);},Back:function(p){return p*p*(3*p-2);},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/11){}
return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2);}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p);};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/2:1-easeIn(p* -2+2)/2;};});})();var effect=$.effects;}));jQuery.fn.extend({objVal:function(){if(jQuery(this).length&&jQuery(this)[0].tagName.toLowerCase()=='input'){return jQuery(this).val();}
else{return jQuery(this).html();}},searchForPlaceholder:function(controls){if(controls){var targetObj=this;var targetId=this.attr('id');if(!controls.txtFldClear){controls.txtFldClear={'enabled':true};}
if((controls.left&&controls.left.enabled)||(controls.right&&controls.right.enabled)){jQuery(this).on("showSearchPlachold",function(evenyt){var targetId=jQuery(this).attr('id');var left=jQuery('#'+targetId+'_left');var right=jQuery('#'+targetId+'_right');var clearTxtFld=jQuery('#'+targetId+'_clear');var et=jQuery(this).objVal();if(et==''){if(left.length){left.show();}
if(right.length){right.show();}
if(clearTxtFld.length){clearTxtFld.hide();}}});jQuery(this).on('keyup',controls,function(event){var et=jQuery(this).objVal();var controls=event.data;var id=jQuery(this).attr('id');var left=jQuery('#'+id+'_left');var right=jQuery('#'+id+'_right');var clearTxtFld=jQuery('#'+targetId+'_clear');if(et==''){jQuery(this).removeAttr("style");if(controls.left.enabled){left.show();}
if(controls.right.enabled){right.show();}
if(controls.txtFldClear.enabled){clearTxtFld.hide();}}
else{jQuery(this).attr("style","background: #ffffff;");if(controls.left.enabled){left.hide();}
if(controls.right.enabled){right.hide();}
if(controls.txtFldClear.enabled){clearTxtFld.show();}
if(/MSIE\s([\d.]+)/.test(navigator.userAgent)){version=new Number(RegExp.$1);if(version==8||version==9){jQuery(this).css({'filter':''});}}}});jQuery(this).on('blur',controls,function(event){var et=jQuery(this).objVal();var controls=event.data;var id=jQuery(this).attr('id');if(et==''){if(controls.left.enabled){jQuery('#'+id+'_left').show();}
if(controls.right.enabled){jQuery('#'+id+'_right').show();}
if(controls.txtFldClear.enabled){jQuery('#'+id+'_clear').hide();}}
else{jQuery(this).attr("style","background: #ffffff;");if(controls.left.enabled){jQuery('#'+id+'_left').hide();}
if(controls.right.enabled){jQuery('#'+id+'_right').hide();}
if(controls.txtFldClear.enabled){jQuery('#'+id+'_clear').show();}
if(/MSIE\s([\d.]+)/.test(navigator.userAgent)){version=new Number(RegExp.$1);if(version==8||version==9){jQuery(this).css({'filter':''});}}}});jQuery(this).on('input propertychange',function(){var et=jQuery(this).objVal();if(et!=''){jQuery('#'+targetId+'_right').hide();jQuery('#'+targetId+'_left').hide();jQuery('#'+targetId+'_clear').show();}});if(controls.left.enabled){var valueToBeShown='';if(controls.left.type=='simple'){valueToBeShown=controls.left.value;}
else if(controls.left.type=='componant'){var reference=jQuery('#'+controls.left.value);valueToBeShown=reference.objVal();reference.on('change',{"id":targetId},function(event){jQuery('#'+event.data.id+'_left').html(jQuery(this).find('option:selected').text());});};jQuery('<span id="'+targetId+'_left" class="'+controls.left.classes+'">'+valueToBeShown+'</span>').prependTo(this.parent());jQuery('#'+targetId+'_left').on('mouseup',function(){targetObj.focus();});if(targetObj.objVal()==''){jQuery('#'+targetId+'_left').show();}
else{jQuery('#'+targetId+'_left').hide();}
jQuery(targetObj).on('paste',function(e){var pastedText=undefined;if(window.clipboardData&&window.clipboardData.getData){pastedtext=window.clipboardData.getData('Text');}else{pastedText=(e.originalEvent||e).clipboardData.getData('text/plain');}
if(pastedText==""&&!pastedText.length>0){e.preventDefault();}
setTimeout(function(){jQuery('#'+targetId+'_right').hide();jQuery('#'+targetId+'_left').hide();jQuery(targetObj).attr("style","background: #ffffff;");if(/MSIE\s([\d.]+)/.test(navigator.userAgent)){version=new Number(RegExp.$1);if(version==8||version==9){jQuery(this).css({'filter':''});}}},100);});jQuery(targetObj).on('drop',function(e){jQuery(targetObj).focus();var file=e.originalEvent.dataTransfer.files[0];if(file!=undefined||file!=null){e.preventDefault();}});jQuery(targetObj).on('cut',function(){setTimeout(function(){if(targetObj.objVal()==''){jQuery('#'+targetId+'_right').show();jQuery('#'+targetId+'_left').show();jQuery(targetObj).removeAttr("style");}},100);});}
if(controls.right.enabled){var valueToBeShown='';if(controls.right.type=='simple'){valueToBeShown=controls.right.value;}
else if(controls.right.type=='componant'){var reference=jQuery('#'+controls.right.value);valueToBeShown=reference.objVal();reference.on('change',{"id":targetId},function(event){jQuery('#'+event.data.id+'_right ').html(jQuery(this).find('option:selected').text());});};jQuery('<span id="'+targetId+'_right" class="'+controls.right.classes+'">'+valueToBeShown+'</span>').prependTo(this.parent());jQuery('#'+targetId+'_right').on('mouseup',function(){targetObj.focus();});if(targetObj.objVal()==''){jQuery('#'+targetId+'_right').show();}
else{jQuery('#'+targetId+'_right').hide();}
jQuery(targetObj).on('paste',function(e){var pastedText=undefined;if(window.clipboardData&&window.clipboardData.getData){pastedtext=window.clipboardData.getData('Text');}else{pastedText=(e.originalEvent||e).clipboardData.getData('text/plain');}
if(pastedText==""&&!pastedText.length>0){e.preventDefault();}
setTimeout(function(){jQuery('#'+targetId+'_right').hide();jQuery('#'+targetId+'_left').hide();jQuery(targetObj).attr("style","background: #ffffff;");if(/MSIE\s([\d.]+)/.test(navigator.userAgent)){version=new Number(RegExp.$1);if(version==8||version==9){jQuery(this).css({'filter':''});}}},100);});jQuery(targetObj).on('drop',function(e){jQuery(targetObj).focus();var file=e.originalEvent.dataTransfer.files[0];if(file!=undefined||file!=null){e.preventDefault();}});jQuery(targetObj).on('cut',function(){setTimeout(function(){if(targetObj.objVal()==''){jQuery('#'+targetId+'_right').show();jQuery('#'+targetId+'_left').show();jQuery(targetObj).removeAttr("style");}},100);});}
if(controls.txtFldClear.enabled){if(targetIDExists(targetId)){var tooltipValue='';if(typeof(error)!='undefined'){tooltipValue=error.js.message.search.syntax.clear.icon();}
var valueToBeShown='<img id="closeicon"  src="../static/images/closeicon_inputfield.png"   ondragstart="return false"/>';var valueToBeShownToHover='<img id="closeicon"  src="../static/images/closeicon_hover.png"  ondragstart="return false"/>';if(targetId=="seachwithinresults"){jQuery('<span title="'+tooltipValue+'" id="'+targetId+'_clear" class="refineResultstxtFldClear">'+valueToBeShown+valueToBeShownToHover+'</span>').prependTo(this.parent());}else{jQuery('<span  title="'+tooltipValue+'" id="'+targetId+'_clear" class="txtFldClear">'+valueToBeShown+valueToBeShownToHover+'</span>').prependTo(this.parent());}
if(navigator.userAgent.match(/Trident\/7\./)){$('#'+targetId).addClass('ieClearIcon');}}
if(targetObj.objVal()!=''){jQuery('#'+targetId+'_clear').show();}
else{jQuery('#'+targetId+'_clear').hide();}
jQuery(targetObj).on('paste',function(e){var pastedText=undefined;if(window.clipboardData&&window.clipboardData.getData){pastedtext=window.clipboardData.getData('Text');}else{pastedText=(e.originalEvent||e).clipboardData.getData('text/plain');}
if(pastedText==""&&!pastedText.length>0){e.preventDefault();}
setTimeout(function(){jQuery('#'+targetId+'_clear').show();jQuery(targetObj).attr("style","background: #ffffff;");if(/MSIE\s([\d.]+)/.test(navigator.userAgent)){version=new Number(RegExp.$1);if(version==8||version==9){jQuery(this).css({'filter':''});}}},100);});jQuery(targetObj).on('drop',function(e){jQuery(targetObj).focus();var file=e.originalEvent.dataTransfer.files[0];if(file!=undefined||file!=null){e.preventDefault();}});jQuery(targetObj).on('cut',function(){setTimeout(function(){if(targetObj.objVal()==''){jQuery('#'+targetId+'_clear').hide();jQuery(targetObj).removeAttr("style");}},100);});jQuery('#'+targetId+'_clear').click(function(e){var txtboxid=jQuery(this).attr('id').replace('_clear','');jQuery('#'+txtboxid).val('').removeAttr("style");var left=jQuery('#'+txtboxid+'_left');var right=jQuery('#'+txtboxid+'_right');if(left.length){left.show();}
if(right.length){right.show();}
if(targetId=="searchTerms"){if(jQuery.trim(jQuery("#searchTerms").val())==""){jQuery("#searchTerms").val('');jQuery("#searchTermsSubmit").removeClass("searchWithBtnAct");jQuery("#searchTermsSubmit").attr("disabled",true);}}
if(targetId=="seachwithinresults"){if(jQuery.trim(jQuery("#seachwithinresults").val())==""){jQuery("#seachwithinresults").val('');jQuery("#search_within_submit").removeClass("searchWithBtnAct");jQuery("#search_within_submit").attr("disabled",true);}}
jQuery(this).hide();});}}}
function targetIDExists(targetID){var targetIDSArray=["searchfield","emailAddress","emailCTO","emailId","userEmailId","combinedSearch"];for(var i=0;i<targetIDSArray.length;i++){if(targetIDSArray[i]===targetID){return false;break;}}
return true;}}});var Bubble={positionRight:"R",positionLeft:"L",positionCenter:"C",positionLeftDown:"LD",positionRightLeft:"RL",positionUnknown:"U",isBubbleVisible:{},elementIds:[],setDataBack:true,hideCallback:''};Bubble.showBubble=function(event){event.data.target=event.currentTarget;Bubble.show(event.data);if(jQuery.isFunction(event.preventDefault)){event.preventDefault();}};Bubble.show=function(data){var $position=data.position;if(typeof data.setDataBack!='undefined'){Bubble.setDataBack=data.setDataBack;}
if(typeof data.hideCallback!='undefined'){Bubble.hideCallback=data.hideCallback;}
var $element=jQuery(data.target),elementId=$element.attr("id"),$bubble=jQuery("#bubble-"+elementId),$bubbleContent=jQuery("#bubbleContent-"+elementId),$bubbleArrow=jQuery("#bubbleArrow-"+elementId),$dataElement=jQuery("#"+elementId+"-data");if(Bubble.isBubbleVisible[elementId]){Bubble.isBubbleVisible[elementId]=!Bubble.isBubbleVisible[elementId];if($dataElement.size()>0){var contentData=$bubbleContent.html();$dataElement.html(contentData);$bubbleContent.html('');var arrayIndex=jQuery.inArray(elementId,Bubble.elementIds);if(arrayIndex>-1){Bubble.elementIds.splice(arrayIndex,1);}}
if(jQuery.isFunction(Bubble.hideCallback)){Bubble.hideCallback();}}else{Bubble.isBubbleVisible[elementId]=true;if($bubble.length===0){$bubble=jQuery("<span>").attr("id","bubble-"+elementId).addClass("bubble");$element.parent().append($bubble);$bubbleContent=jQuery("<span>").attr("id","bubbleContent-"+elementId).addClass("bubble-content");$bubbleArrow=jQuery("<span>").attr("id","bubbleArrow-"+elementId).addClass("bubble-arrow");$bubble.append($bubbleContent).append($bubbleArrow);}
$bubbleArrow.removeClass("bubble-arrow-right");$bubbleArrow.removeClass("bubble-arrow-left");if($dataElement.size()>0){var contentData=$dataElement.html();$bubbleContent.html(contentData);$dataElement.html('');}
else{$bubbleContent.html("No data available to display");}
if(jQuery.inArray(elementId,Bubble.elementIds)==-1){Bubble.elementIds.push(elementId);}
if($position===Bubble.positionLeft){Bubble.setLeft({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}
else if($position===Bubble.positionRight){Bubble.setRight({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}
else if($position===Bubble.positionCenter){Bubble.setCenter({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}
else if($position===Bubble.positionLeftDown){Bubble.setLeftDown({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}
else if($position===Bubble.positionRightLeft){Bubble.setRightLeft({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}
else{Bubble.setWithElementLocation({$element:$element,$bubbleArrow:$bubbleArrow,$bubble:$bubble,$bubbleContent:$bubbleContent});}}
$bubble.toggle();};Bubble.hide=function(e){var elementId=e.data.elementId;if(Bubble.isBubbleVisible[elementId]){Bubble.isBubbleVisible[elementId]=!Bubble.isBubbleVisible[elementId];var $bubble=jQuery("#bubble-"+elementId),$bubbleContent=jQuery("#bubbleContent-"+elementId);if(Bubble.setDataBack){var data=$bubbleContent.html(),$dataElement=jQuery("#"+elementId+"-data");$dataElement.html(data);}
$bubbleContent.html('');var arrayIndex=jQuery.inArray(elementId,Bubble.elementIds);if(arrayIndex>-1){Bubble.elementIds.splice(arrayIndex,1);}
$bubble.toggle();}
if(jQuery.isFunction(Bubble.hideCallback)){Bubble.hideCallback();}};Bubble.forceHideAll=function(e){var bubbleCnt=Bubble.elementIds.length;for(var i=0;i<bubbleCnt;i++){var elementId=Bubble.elementIds[i];e["data"]={'elementId':elementId};Bubble.hide(e);}};Bubble.hideAll=function(e){var bubbleCnt=Bubble.elementIds.length;for(var i=0;i<bubbleCnt;i++){var elementId=Bubble.elementIds[i];if(!jQuery(e.target).closest('#'+elementId)[0]&&!jQuery(e.target).closest('#bubble-'+elementId)[0]){e["data"]={'elementId':elementId};Bubble.hide(e);}}};Bubble.setRight=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var bubbleWidth=data.$bubble.outerWidth();var right=jQuery(element).position().left-(bubbleWidth-(data.$element.outerWidth()));data.$bubbleArrow.addClass("bubble-arrow-right");data.$bubbleArrow.css({left:(bubbleWidth-32)+"px"});data.$bubble.css({top:top+"px",left:right+"px"});};Bubble.setCenter=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var center=parseInt(data.$element.outerWidth()/2);var bubbleWidth=data.$bubble.outerWidth();var left=jQuery(element).position().left+center;var bubbleCenter=left-(bubbleWidth/2);data.$bubbleArrow.css({left:(bubbleWidth/2)+"px"});data.$bubbleArrow.addClass("bubble-arrow-center")
data.$bubble.css({top:top+"px",left:bubbleCenter+"px"});};Bubble.setLeftDown=function(data){var element=data.$element.get(0);var bottom=jQuery(element).position().top+data.$element.outerHeight();var center=parseInt(data.$element.outerWidth()/2);var bubbleWidth=data.$bubble.outerWidth();var bubbleHeight=data.$bubble.outerHeight();var left=jQuery(element).position().left+center;var bubbleCenter=left-(bubbleWidth/2);data.$bubbleArrow.css({'left':Math.floor(bubbleWidth/4),'top':(bubbleHeight+11)});data.$bubbleArrow.addClass("bubble-arrow-center")
data.$bubble.css({bottom:bottom,left:bubbleCenter,top:'auto'});};Bubble.setLeft=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var bubbleWidth=data.$bubble.outerWidth();var right=jQuery(element).position().left-12;data.$bubbleArrow.css({width:bubbleWidth+"px",left:5+"px"});data.$bubble.css({top:top+"px",left:right+"px"});};Bubble.setRightLeft=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var bubbleWidth=data.$bubble.outerWidth();var right=jQuery(element).position().left-(bubbleWidth*.88);data.$bubbleArrow.css({left:(bubbleWidth*.86)});data.$bubble.css({top:top+"px",left:right+"px"});};Bubble.setWithElementLocation=function(data){var $element=data.$element.get(0);var top=$element.position().top;var left=$element.position().left;var height=$element.outerHeight();var width=$element.outerWidth();var bubbleWidth=$bubble.outerWidth();var bubbleLeft=(left+(width/2))-bubbleWidth/2;var arrowLeft=(bubbleWidth/2.5);$bubble.css({top:(top+height)+"px",left:bubbleLeft+"px"});$bubbleArrow.css("left",arrowLeft+"px");if(bubbleWidth>width){var windowWidth=jQuery(window).width();var right=windowWidth-(left+width);if(right<bubbleWidth){bubbleLeft=windowWidth-(bubbleWidth+right);$bubble.css({left:bubbleLeft+"px"});$bubbleArrow.css({left:(bubbleWidth)+"px"});$bubbleArrow.addClass("bubble-arrow-right");}
else if(bubbleLeft<bubbleWidth){bubbleLeft=left;var arrowLeft=left-4;$bubbleArrow.css({left:arrowLeft+"px"});$bubbleArrow.addClass("bubble-arrow-left");$bubble.css({left:bubbleLeft+"px"});}}};MendeleyImporterApi={};(function(api){var data={},bookmarkletUrl=MendeleybookmarkletUrl;init();function init(){api.open=open;api.close=close;api.setOpenedWithApi=getSetter('openedWithApi');api.getOpenedWithApi=getGetter('openedWithApi');var methods=['HostId','UserIdentityCallback','DataCallback'];for(var i=0,l=methods.length;i<l;i++){var key=methods[i];api['register'+key]=getSetter(key);api['get'+key]=getGetter(key);}}
function getGetter(key){return function(){return data[key];};}
function getSetter(key){return function(value){data[key]=value;};}
function open(){this.setOpenedWithApi(true);document.getElementsByTagName('body')[0].appendChild(document.createElement('script')).setAttribute('src',bookmarkletUrl);}
function close(){try{document.getElementById('mendeley-bookmarklet-close').click();}catch(e){}}})(MendeleyImporterApi);function Cookie(name){this.$name=name;var reExtraSpace=/^\s*(.*?)\s*$/;var allcookies=document.cookie;if(allcookies=="")return;var cookies=allcookies.split(';');var cookie=null;var str="";for(var i=0;i<cookies.length;i++){str=cookies[i];str=str.replace(reExtraSpace,"$1");if(str.substring(0,name.length+1)==(name+"=")){cookie=str;break;}}
if(cookie==null)return;var cookieval=cookie.substring(name.length+1);var a=cookieval.split('&');for(var i=0;i<a.length;i++)
a[i]=a[i].split('_');for(var i=0;i<a.length;i++){this[a[i][0]]=decodeURIComponent(a[i][1]);}}
Cookie.prototype.store=function(daysToLive,path,domain,secure){var cookieval="";for(var prop in this){if((prop.charAt(0)=='$')||((typeof this[prop])=='function'))
continue;if(cookieval!="")cookieval+='&';cookieval+=prop+'_'+encodeURIComponent(this[prop]);}
var cookie=this.$name+'='+cookieval;if(daysToLive||daysToLive==0){cookie+="; max-age="+(daysToLive*24*60*60);}
if(path)cookie+="; path="+path;if(domain)cookie+="; domain="+domain;if(secure)cookie+="; secure";if(daysToLive==0)cookie+="; expires=Wed, 18 Jul 2001 07:42:30 UTC"
document.cookie=cookie;}
Cookie.prototype.remove=function(path,domain,secure){for(var prop in this){if(prop.charAt(0)!='$'&&typeof this[prop]!='function')
delete this[prop];}
this.store(0,path,domain,secure);}
Cookie.prototype.enabled=function(){if(navigator.cookieEnabled!=undefined)return navigator.cookieEnabled;if(Cookie.enabled.cache!=undefined)return Cookie.enabled.cache;document.cookie="testcookie=test; max-age=10000";var cookies=document.cookie;if(cookies.indexOf("testcookie=test")==-1){return Cookie.enabled.cache=false;}
else{document.cookie="testcookie=test; max-age=0";return Cookie.enabled.cache=true;}}
function Cookie_getCookies(match)
{var cookieArray=document.cookie.split(";");var a=new Array();for(var i=0;i<cookieArray.length;i++)
{var name=new String(cookieArray[i].substring(0,cookieArray[i].indexOf("=")));name=name.trim();if(!match)
{a.push(new Cookie(name));}
else if(name.indexOf(match)>-1)
{a.push(new Cookie(name));}}
return a;}
Cookie.getCookies=Cookie_getCookies;var isSvgSupported=!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect;var exitSurvey={esLink:'',esChance:0.25,surveyCookieId:'SCES',autosuggestSurveyCookieId:'SCAES',autoSuggestEnableCookie:'enableAutoSuggest',surveyInvite:function(surveyID){var cookieID='';if(surveyID==='exitSurveyDialog'){cookieID=exitSurvey.surveyCookieId;}else if(surveyID==='autoSuggestSurveyDialog'){cookieID=exitSurvey.autosuggestSurveyCookieId;}
if(exitSurvey.getCookie(cookieID)===undefined){exitSurvey.showSurvey(surveyID,cookieID);}},checkMathRandomSurvey:function(surveyID,cookieID){jQuery("#"+surveyID).css({'display':'block'});exitSurvey.setSurveyDialogPos();jQuery("#"+surveyID).delay(2000).animate({"bottom":"+=250px"},1000,"swing",function(){exitSurvey.setCookie(cookieID,"true",180);});jQuery("#"+surveyID+".yL").click(surveyID,exitSurvey.surveyAccept);jQuery("#"+surveyID+".nL, #"+surveyID+" #closeWindow").click(surveyID,exitSurvey.surveyClose);},showSurvey:function(surveyID,cookieID){if(jQuery('#randomautoSuggestVal').length&&jQuery('#randomautoSuggestVal').val()==='true'){var mathRandom=Math.random();if(mathRandom<=exitSurvey.esChance){exitSurvey.checkMathRandomSurvey(surveyID,cookieID);}}
else{exitSurvey.checkMathRandomSurvey(surveyID,cookieID);}},setSurveyDialogPos:function(surveyID){if(jQuery('#outerWrapper').length>0){jQuery("#"+surveyID).css({'right':jQuery(window).width()-(jQuery('#outerWrapper').offset().left+jQuery('#outerWrapper').outerWidth())});}},surveyAccept:function(e){e.preventDefault();if(exitSurvey.getCookie(exitSurvey.autosuggestSurveyCookieId)!==undefined){exitSurvey.setCookie(exitSurvey.autoSuggestEnableCookie,"true",1);}
var page="http://"+window.location.hostname;var windowprops="width=900,height=600,location=no,toolbar=no,menubar=no,scrollbars=yes,resizable=yes";var PopWindow=window.open(page,"",windowprops);try{PopWindow.blur();PopWindow.focus();if(PopWindow){exitSurveyHTML=exitSurvey.gHTML();PopWindow.document.write(exitSurveyHTML);PopWindow.document.close();}
exitSurvey.surveyClose(e);}catch(err){exitSurvey.surveyClose(e);}
basicSrchAutoSugg.enableAutoSuggest();},surveyClose:function(e){if(e){e.preventDefault();}
jQuery("#"+e.data).css('display','none');},gHTML:function(){var wH="";wH+='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">';wH+="<html>";wH+="<head>";wH+="<title>Feedback</title>";wH+='<style type="text/css">';wH+="body { margin: 0; padding: 0; font-family: Arial, Verdana, helvetica, sans-serif; height: 100%; font-size: 75%; color: #5C5C5C;}";wH+=".logoHeader { height: 64px;}.logoScopusImg { width: 75px; position: absolute; padding-left: 2%; padding-top: 15px; padding-right: 14%;}";wH+=".logoScopusImg img { height: 25px;}.sBody { padding: 20px 40px;}.sInfoMsg{width:0;overflow:hidden;line-height: 14px;font-size:0;}.sSubHeading { font-size: 14px;}.sHeading { font-size: 20px;}";wH+=".sButton input { height: 30px; margin: 0; color: #5c5c5c; background: #eee; border: 1px solid #c9c9c9;}.sButton { font-size: 13px; font-weight: bold; margin: 20px 0;}";wH+=".sText { font-size: 13px;}.navigation { background-color: #026370; height: 5px;} ";wH+=".sInfoMsgContainer { background-color: #ebf7fd; background-image: url('/static/images/info.png'); background-position: 5px 4px; background-repeat: no-repeat; border: 1px solid #46c7f4; border-radius: 4px; color: #5c5c5c; margin: 10px 0; padding: 6px 5px 6px 30px;}";wH+="</style>";wH+="</head>";wH+="<body>";wH+='<div>';wH+='<div class="logoHeader" >';wH+='<div class="logoScopusImg" >';wH+='<img alt="Scopus Logo" src="../static/images/scopusLogoOrange.svg"/>';wH+='</div>';wH+='</div>';wH+='<div class="navigation"></div>';wH+='<div class="sBody">';wH+='<div class="sHeading">'+basic.SURVEY_POPUP_CONFIRMATION_HEADING()+' <br/><br/></div>';wH+='<div class="sInfoMsgContainer" role="alert">';wH+='<span class="sInfoMsg">'+basic.SURVEY_POPUP_CONFIRMATION_INFO_MSG()+'</span><span class="sSubHeading">'+basic.SURVEY_POPUP_CONFIRMATION_INFORMATION()+'</span> <br/><br/>'+basic.SURVEY_POPUP_CONFIRMATION_FIREFOX_INFO();wH+="</div>";wH+="</div>";wH+="</div>";wH+='<script type="text/javascript">';wH+="var intl;";wH+="function loadSurvey() {";wH+="clearInterval(intl);";wH+="window.resizeTo(900,600);";wH+='this.location="'+exitSurvey.esLink+'";';wH+="}";wH+="var lastseen = window.opener.location.hostname;";wH+="function CheckParent() {";wH+="try {";wH+="var host = window.opener.location.hostname;";wH+="if (host != lastseen){";wH+="lastseen = host;";wH+="}";wH+="return;";wH+="} catch(error){";wH+="clearInterval(intl);";wH+="moveTo(screen.width/2-450,screen.height/2-300);";wH+="this.focus();";wH+='alert("Click Ok to begin your survey");';wH+='this.location="'+exitSurvey.esLink+'";';wH+="var match = document.cookie.match('enableAutoSuggest=([^;]*)');";wH+="if (match) {";wH+="document.cookie = 'enableAutoSuggest=false; max-age=0 ; expires=Wed, 18 Jul 2001 07:42:30 UTC; path=/';";wH+="}";wH+="}";wH+="}";wH+='intl = setInterval("CheckParent()", 500);';wH+="</script>";wH+="</body>";wH+="</html>";return wH;},setCookie:function(c_name,value,expiration){var exdate=new Date();exdate.setDate(exdate.getDate()+expiration);var c_value=escape(value)+("; expires="+exdate.toUTCString()+"; path=/");document.cookie=c_name+"="+c_value;},getCookie:function(c_name){var match=document.cookie.match(c_name+'=([^;]*)');return match?match[1]:undefined;},svgSupport:function(){if(!isSvgSupported){if(typeof jQuery('.surveylogoScopusImg img').attr('src')==='undefined'){document.getElementsByTagName("img")[0].src='/static/images/ScopusWhite.png';}else{jQuery('.surveylogoScopusImg img').attr('src','/static/images/ScopusWhite.png');}
jQuery('.surveylogoScopusImg').css({'padding-top':'11px'});jQuery('.surveylogoScopusImg img').css({'height':'auto'});}},init:function(surveyID){if(surveyID==='exitSurveyDialog'){exitSurvey.esLink=jQuery('#exitSurveyLink').val();}else if(surveyID==='autoSuggestSurveyDialog'){exitSurvey.esLink=jQuery('#autoSuggestSurveyLink').val();}
exitSurvey.surveyInvite(surveyID);exitSurvey.svgSupport();}};var isSvgSupported=!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect;var loginPopoutOpened=false;var logoutPopoutOpened=false;var helpMenuPopoutOpened=false;var header={buildHelpMenuBubble:function(obj){Bubble.setRight=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var bubbleWidth=data.$bubble.outerWidth();var right=jQuery(element).position().left-(bubbleWidth-(data.$element.width()));data.$bubbleArrow.addClass("bubble-arrow-right");if(jQuery(element).attr('id')=='helpMenuLnk'){data.$bubbleArrow.css({left:(bubbleWidth-31)+"px"});data.$bubble.css({top:top+"px",left:(right+25)+"px"});}
else{data.$bubbleArrow.css({left:(bubbleWidth-32)+"px"});data.$bubble.css({top:top+"px",left:right+"px"});}};obj.click(function(e){e["data"]={position:Bubble.positionRight,setDataBack:true};if(jQuery('#bubble-helpMenuLnk').is(':visible')){Bubble.forceHideAll(e);}
else{Bubble.showBubble(e);}
e.preventDefault();});},formProfileAccessLinks:function(){jQuery('#profileAccessCnt').html(jQuery('#CARS_SETTINGS_TEMPLATE #modify-profile-group'));jQuery('#profileAccessCnt form+div').remove();jQuery('#myScopusCnt').html(jQuery('#CARS_SETTINGS_TEMPLATE #settings-app-links-top #scopusTopLinks ul'));},getSettingsTemplate:function(){var settingsTemplate=jQuery.get("../settings/template.uri");settingsTemplate.done(function(response){jQuery('#CARS_SETTINGS_TEMPLATE').html(response);header.formProfileAccessLinks();});settingsTemplate.error();settingsTemplate.always();},getMyScopusLinkData:function(){var settingsData=jQuery.get("../customer/settings.uri");settingsData.done(function(response){header.getSettingsTemplate();});settingsData.error();settingsData.always();},setMenuNavPos:function(){jQuery(window).scroll(function(event){var isInitFixedHeader=jQuery('#mainNav').hasClass('mainNavFxd');if(jQuery('div.cib_Container').is(':visible')){var cibPos=jQuery('div.cib_Container:visible').closest('#cib_Overlay').position().top;}
if(jQuery('span#bubble-showAllPageBubble').is(':visible')){var bubPos=jQuery('span#bubble-showAllPageBubble:visible').closest('#bubble-showAllPageBubble').position().top;}
if(jQuery(window).scrollTop()>jQuery('.mainNavSect').offset().top){if(!jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('#mainNav').addClass('mainNavFxd');}}
else{jQuery('#mainNav').removeClass('mainNavFxd');}
if(jQuery('div.cib_Container').is(':visible')){var isRefineOverlayPresent=false;for(counter=0;counter<15;counter++){if(jQuery("#overlayHeading_"+counter).is(':visible')){isRefineOverlayPresent=true;break;}}
if(!isRefineOverlayPresent){if(isInitFixedHeader&&!jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('div.cib_Container:visible').closest('#cib_Overlay').css({'top':cibPos+62});}
if(!isInitFixedHeader&&jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('div.cib_Container:visible').closest('#cib_Overlay').css({'top':cibPos-62});}}}
if(jQuery('span#bubble-showAllPageBubble').is(':visible')){if(isInitFixedHeader&&!jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('span#bubble-showAllPageBubble:visible').closest('#bubble-showAllPageBubble').css({'top':bubPos+64});}
if(!isInitFixedHeader&&jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('span#bubble-showAllPageBubble:visible').closest('#bubble-showAllPageBubble').css({'top':bubPos-64});}}});},setEllipsisUserName:function(){jQuery('#logout_username').css({'width':''});var headerWidth=jQuery('#scopusSciverseMasthead').width();var logoSectionWidth=jQuery('.logoScopusImg').outerWidth();var rightSectionTotalWidth=jQuery('.rgtDivisions').width();var getuserNameWidth=jQuery('#logout_username').width();var rightSectionWidth=rightSectionTotalWidth-getuserNameWidth;var calculatedWidth=headerWidth-logoSectionWidth-rightSectionWidth;if(getuserNameWidth>calculatedWidth){jQuery('#logout_username').css({'width':calculatedWidth}).addClass('regUserEllipsis');}
else{jQuery('#logout_username').removeClass('regUserEllipsis');}
if(!jQuery.browser.mozilla){jQuery('#logout_username').css({'margin-right':'-2px'});}
else{jQuery('#logout_username').css({'margin-right':''});}},adjustLoginPreview:function(){if(jQuery('#login_reglink').css('display')=='none'){jQuery('#login-panel.CARS_panelClass a#login_loginlink').css({'margin-left':'-12px'});}
else{jQuery('#login-panel.CARS_panelClass a#login_loginlink').css({'margin':'0'});}},productLnkSep:function(){if(jQuery('.hdrTopLnk ul li').length==2){jQuery('.prodSep').css({'display':'none'});}
else{jQuery('.prodSep').css({'display':'block'});}},svgSupport:function(){if(!isSvgSupported){if(isPreviewPage){if(typeof jQuery('.logoScopusPreviewImg img').attr('src')=='undefined'){document.getElementsByTagName("img")[0].src='../static/images/preview/scopuspreviewOrange.png';}else{jQuery('.logoScopusPreviewImg img').attr('src','../static/images/preview/scopuspreviewOrange.png');}}
else{if(typeof jQuery('.logoScopusImg img').attr('src')=='undefined'){document.getElementsByTagName("img")[0].src='../static/images/scopusLogoOrange.png';}else{jQuery('.logoScopusImg img').attr('src','../static/images/scopusLogoOrange.png');}}
jQuery('.logoScopusImg, .logoScopusPreviewImg').css({'padding-top':'15px'});if(jQuery('.modalOverlayHdr').length){jQuery('.modalOverlayHdr .logoScopusImg').css({'padding-top':'0'});}}},closeHelpPopout:function(){jQuery('#header #helpMenuLnk-data').hide();if(helpMenuPopoutOpened){jQuery('#helpMenuLnk').focus();helpMenuPopoutOpened=false;}},closeLoginPopout:function(){if(jQuery('#header #login_pop_container').hasClass('CARS_displayInline')){jQuery('#header #login_loginlink').trigger("click");header.removeLoginPopoutOuterContents();if(loginPopoutOpened){jQuery('#header #login_loginlink').focus();loginPopoutOpened=false;}}},closeLogoutPopout:function(){if(jQuery('#header #logout_pop').hasClass('CARS_displayInline')){jQuery('#header #logout_username_link').trigger("click");header.removeLogoutPopoutOuterContents();if(logoutPopoutOpened){jQuery('#header #logout_username_link').focus();logoutPopoutOpened=false;}}},removeLoginPopoutOuterContents:function(){var cnt=jQuery("#login-panel .custom-modal-top-border").contents();jQuery("#login-panel .custom-modal-arrow").replaceWith(cnt);},removeLogoutPopoutOuterContents:function(){var cnt=jQuery("#header #logout_user .custom-modal-top-border").contents();jQuery("#header #logout_user .custom-modal-arrow").replaceWith(cnt);},detectIE:function(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0){return true;}
var trident=ua.indexOf('Trident/');if(trident>0){return true;}
var edge=ua.indexOf('Edge/');if(edge>0){return true;}
return false;},addAccessibilityToLoginPopout:function(){jQuery('#login_pop_container').attr({'role':'dialog','aria-labelledby':'login_popout_heading_id'});jQuery("#header #login_pop_container_logform .CARS_groupTitle").attr({'role':'heading','aria-level':'3','id':'login_popout_heading_id','tabindex':'-1'});jQuery(".login-close-icon").on('keydown',function(e){if((e.keyCode||e.which)===9){if(e.shiftKey){jQuery('#header #login_pop_container #login_pop_container_socialform:last-child').focus();}else{jQuery('#header #login_pop_container #login_popout_heading_id').focus();}}});jQuery("#header #login_pop_container #username").on('keydown',function(event){if(event.shiftKey&&event.keyCode===9){jQuery('#header #login_pop_container #login-close-placeholder').focus();}});},addAccessibilityToLogoutPopout:function(){jQuery("#header #logout_pop .userPopoutTitle").focus();jQuery("#logout_pop .custom-logout-popout .userPopoutTitle").on('keydown',function(e){if((e.keyCode||e.which)===9){if(e.shiftKey){jQuery("#logout_pop .custom-logout-popout #login-close-placeholder").focus();}else{jQuery("#userPath>form:first-child").find("a").focus();}}});jQuery("#header .custom-logout-popout .close").on('keydown',function(e){if((e.keyCode||e.which)===9){if(e.shiftKey){}else{jQuery("#header #logout_username_link").focus();}}});},addAccessibilityToHelpPopout:function(){jQuery("#header #headerHelpLinks .helpMenuList>li:first-child>a").focus();jQuery("#header #headerHelpLinks a.close").on('keydown',function(e){if((e.keyCode||e.which)===9){if(e.shiftKey){jQuery(e.target).find("a").focus();}else{jQuery("#helpMenuLnk").focus();}}});jQuery("#header #headerHelpLinks .helpMenuList>li:first-child>a ").on('keydown',function(event){if(event.shiftKey&&event.keyCode===9){jQuery("#header #headerHelpLinks #help-close-placeholder").focus();}});},init:function(){if(jQuery('.mainNavSect').length>0){header.setMenuNavPos();}
jQuery('#helpMenuLnk').on('click',function(e){header.closeLoginPopout();header.closeLogoutPopout();jQuery('#helpMenuLnk-data').toggle();header.removeLoginPopoutOuterContents();helpMenuPopoutOpened=true;header.addAccessibilityToHelpPopout();});jQuery('body').die("click").on('click',function(e){if(!jQuery(e.target).closest('#exportTrigger')[0]){Bubble.hideAll(e);}});if(jQuery('#login_reglink').length>0){header.adjustLoginPreview();}
header.svgSupport();if(jQuery('.scopusScivalBanner').length>0){header.productLnkSep();}
jQuery('#header #helpMenu a.close').on('click',function(e){header.closeHelpPopout();});jQuery(document).on("keyup",function(e){var code=e.keyCode||e.which;if(code===27){header.closeHelpPopout();header.closeLoginPopout();header.closeLogoutPopout();}});jQuery("body").click(function(e){if(jQuery(e.target).closest("a").attr('id')!=="helpMenuLnk"&&!jQuery(e.target).parents().andSelf().is('#helpMenuLnk-data')){header.closeHelpPopout();}
if(jQuery(e.target).closest("a").attr('id')!=="login_loginlink"&&!jQuery(e.target).parents().andSelf().is('#login_pop_container')&&!jQuery(e.target).closest("a").hasClass("not-signed-in-user-link")){header.closeLoginPopout();}
if(jQuery(e.target).closest("a").attr('id')!=="logout_username_link"&&jQuery(e.target).attr('id')!=="logout_username"&&!jQuery(e.target).parents().andSelf().is('#logout_pop,#logout_text_content')){header.closeLogoutPopout();}});}};function dateFromISO8601(isoDateString){var parts=isoDateString.match(/\d+/g);var isoTime=Date.UTC(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);var isoDate=new Date(isoTime);return isoDate;}
var modalOverlay={drawOverlay:function(){jQuery("#modalOverlay-dialog").dialog({modal:true,width:567,height:352,zIndex:200000}).removeClass("displayNone");jQuery(".ui-dialog .ui-dialog-titlebar").hide();jQuery("#modalOverlay-dialog").dialog("close").dialog("open");jQuery("body").css({'overflow':'hidden'});modalOverlay.modalOverlayPos();jQuery("#modalOverlay-dialog").on("keydown",function(e){if(e.keyCode==27)
modalOverlay.remindMeLater();});},modalOverlayPos:function(){var winHeight=jQuery(window).height();var modalOverlayHeight=jQuery('.modalOverlayPopUp').height();var totalTopVal=(winHeight-modalOverlayHeight)/2;var setTopPos=totalTopVal-24;var winWidth=jQuery(window).width();var modalOverlayWidth=jQuery('#modalOverlay-dialog').parent().width();var totalLeftVal=(winWidth-modalOverlayWidth)/2;var setLeftPos=totalLeftVal;if(jQuery("#modalOverlay-dialog").parent().hasClass('ui-dialog')){jQuery("#modalOverlay-dialog").parent().css({'position':'absolute','top':setTopPos,'left':setLeftPos,'z-index':'200002'});}},setOpacityModalOverlay:function(){jQuery('#modalOverlay-dialog').parent().prev().css({'background-color':'#000000','opacity':'0.5','z-index':'200001'});},getOrCreateOverlayCookie:function(name){var overlayCookies=Cookie.getCookies(name);if(overlayCookies.length==0){overlayCookie=new Cookie(name);}else{overlayCookie=overlayCookies[0];}
return overlayCookie;},acceptOverlay:function(){modalOverlayCookie=modalOverlay.getOrCreateOverlayCookie("sc_overlay_ok");modalOverlayCookie.showOverlay=false;modalOverlayCookie.ts=jQuery("#overlayShownTime").val();modalOverlayCookie.store(365,"../default.htm");overlayRemindCookie=modalOverlay.getOrCreateOverlayCookie("sc_overlay_remind");overlayRemindCookie.store(0,"../default.htm");modalOverlay.overlayClose();},remindMeLater:function(){modalOverlayCookie=modalOverlay.getOrCreateOverlayCookie("sc_overlay_ok");modalOverlayCookie.showOverlay=true;modalOverlayCookie.ts=jQuery("#overlayShownTime").val();modalOverlayCookie.store(365,"../default.htm");overlayRemindCookie=modalOverlay.getOrCreateOverlayCookie("sc_overlay_remind");overlayRemindCookie.remindLater=true;var remindMeLaterHours=jQuery("#remindMeLaterHours").val();if(parseInt(remindMeLaterHours)>0){overlayRemindCookie.store(parseInt(remindMeLaterHours)/24,"../default.htm");}else{overlayRemindCookie.store(1,"../default.htm");}
modalOverlay.overlayClose();},overlayClose:function(){jQuery("#modalOverlay-dialog").dialog("close");jQuery("body").css({'overflow':'inherit'});},init:function(){var messageUpdatedTimeStr=jQuery("#overlayUpdatedTime").val();var messageShownTimeStr=jQuery("#overlayShownTime").val();var modalOverlayCookies=Cookie.getCookies("sc_overlay_ok");if(modalOverlayCookies.length){showOverlay=modalOverlayCookies[0].showOverlay=="true";messageShownTimeStr=modalOverlayCookies[0].ts;}else{showOverlay=true;}
var overlayRemindCookies=Cookie.getCookies("sc_overlay_remind");if(overlayRemindCookies.length){showOverlay=false;}
if(!showOverlay&&messageUpdatedTimeStr!=""&&messageShownTimeStr!=""){var messageUpdatedTime=dateFromISO8601(messageUpdatedTimeStr);var d=dateFromISO8601(messageShownTimeStr);var messageShownTime=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),0,0,0);if(messageUpdatedTime>messageShownTime){showOverlay=true;}}
if(showOverlay){modalOverlay.drawOverlay();modalOverlay.setOpacityModalOverlay();jQuery(".modalOverlayOuterCnt a").on("click",modalOverlay.acceptOverlay);}}};jQuery(document).ready(function(){(function($){$.InFieldLabels=function(label,field,options){var base=this;base.$label=$(label);base.label=label;base.$field=$(field);base.field=field;base.$label.data("InFieldLabels",base);base.showing=true;base.init=function(){var initialSet;base.options=$.extend({},$.InFieldLabels.defaultOptions,options);setTimeout(function(){if(base.$field.val()!==""){base.$label.addClass('active');base.showing=false;}else{base.$label.removeClass('active');base.showing=true;}},200);base.$field.focus(function(){base.fadeOnFocus();}).blur(function(){base.checkForEmpty(false);}).bind('keydown.infieldlabel',function(e){base.hideOnChange(e);}).bind('paste',function(){base.removeClass('active');}).change(function(){base.checkForEmpty();}).bind('onPropertyChange',function(){base.checkForEmpty();}).bind('keyup.infieldlabel',function(){base.checkForEmpty();});if(base.options.pollDuration>0){initialSet=setInterval(function(){if(base.$field.val()!==""){base.$label.addClass('active');base.showing=false;clearInterval(initialSet);}},base.options.pollDuration);}};base.fadeOnFocus=function(){if(base.showing){base.$label.addClass('active');base.showing=false}};base.checkForEmpty=function(blur){if(base.$field.is(':focus')){base.$label.addClass('active');base.showing=false}
else if(base.$field.is()){base.$label.removeClass('active');}
else if(base.$field.val()===""){base.$label.removeClass('active');base.showing=true}
else if(base.showing){base.$label.addClass('active');}};base.prepForShow=function(){if(!base.showing){base.$label.removeClass('active');}};base.hideOnChange=function(e){if((e.keyCode===16)||(e.keyCode===9)){return;}
if(base.showing){base.$label.addClass('active');base.showing=true;}
base.$field.unbind('keydown.infieldlabel');};base.init();};$.InFieldLabels.defaultOptions={fadeOpacity:0.5,fadeDuration:300,pollDuration:0,enabledInputTypes:["text","search","tel","url","email","password","number","textarea"],className:false};$.fn.inFieldLabels=function(options){var allowed_types=options&&options.enabledInputTypes||$.InFieldLabels.defaultOptions.enabledInputTypes;return this.each(function(){var for_attr=$(this).attr('for'),field,restrict_type;if(!for_attr){return;}
field=document.getElementById(for_attr);if(!field){return;}
restrict_type=$.inArray(field.type,allowed_types);if(restrict_type===-1&&field.nodeName!=="TEXTAREA"){return;}
(new $.InFieldLabels(this,field,options));});};}(jQuery));jQuery("label").inFieldLabels();});jQuery(window).resize(function(){if(jQuery('#logout_username').length>0){}
if(jQuery("#modalOverlay-dialog").length>0){modalOverlay.modalOverlayPos();}
if(jQuery('#exitSurveyDialog').length>0){exitSurvey.setSurveyDialogPos();}});jQuery(document).ready(function(){if(typeof String.prototype.trim!=='function'){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');}}
Cookie.prototype.store=function(daysToLive,path,domain,secure){var cookieval="";for(var prop in this){if((prop.charAt(0)=='$')||((typeof this[prop])=='function'))
continue;if(cookieval!="")cookieval+='&';cookieval+=prop+'_'+encodeURIComponent(this[prop]);}
var cookie=this.$name+'='+cookieval;if(daysToLive&&daysToLive>0){var d=new Date();d.setTime(d.getTime()+daysToLive*24*60*60*1000);cookie+="; max-age="+(daysToLive*24*60*60)+"; expires="+d.toGMTString();}else if(daysToLive==0){cookie+="; max-age=0 ; expires=Wed, 18 Jul 2001 07:42:30 UTC"}else if(daysToLive<0){}
if(path)cookie+="; path="+path;if(domain)cookie+="; domain="+domain;if(secure)cookie+="; secure";document.cookie=cookie;}
header.init();if(jQuery('#modalOverlay-dialog').length>0){modalOverlay.init();}
if(jQuery('#exitSurveyDialog').length>0){exitSurvey.init('exitSurveyDialog');}
if(jQuery('#autoSuggestSurveyDialog').length>0){exitSurvey.init('autoSuggestSurveyDialog');}
var _this=this;_this.init=function(){jQuery('.toggleIcon').on("click",function(e){if(!keyPressed){_this.toggleMenu();}});};jQuery('.userOptionCnt .profileAccess').click(function(){if(!jQuery(this).hasClass("not-signed-in-user-link")){if(jQuery(this).next().hasClass('spineAccordianCollapsed')){jQuery(this).next().removeClass('spineAccordianCollapsed');jQuery(this).attr('aria-expanded','true');jQuery(this).removeClass('collapsed').addClass('expanded');}
else{jQuery(this).next().addClass('spineAccordianCollapsed');jQuery(this).attr('aria-expanded','false');jQuery(this).removeClass('expanded').addClass('collapsed');}}});_this.toggleMenu=function(){var spine=jQuery('.sidebarMenu');if(jQuery("body").hasClass("sidebarActive")){setTimeout(function(){jQuery("body").removeClass("sidebarActive");if(jQuery('#header .sidebarMenu .regLnk').find(jQuery('#header .sidebarMenu .regLnk #guestAccessPage')).length>0){jQuery('#carsLoginSpine').html(jQuery('#header .sidebarMenuHeader .user span:first-child').contents());jQuery('#header .sidebarMenuHeader .user span:first-child').empty();}
jQuery('#header .headerContainer .regLnk').html(jQuery('#header .sidebarMenu .regLnk').contents());jQuery('#header .sidebarMenu .regLnk').empty();jQuery('#header .headerContainer .regLnk').css('display','inline-block');spine.css("display","none");jQuery("#headerHamburger a").focus();});}
else{spine.css("display","inline-block");setTimeout(function(){jQuery('#header .headerContainer .regLnk').css('display','none');jQuery('#header .sidebarMenu .regLnk').html(jQuery('#header .headerContainer .regLnk').contents());jQuery('#header .headerContainer .regLnk').empty();if(jQuery('#header .sidebarMenu .regLnk').find(jQuery('#header .sidebarMenu .regLnk #guestAccessPage')).length>0){jQuery('#header .sidebarMenuHeader .user span:first-child').replaceWith(jQuery('#carsLoginSpine').contents());jQuery('#carsLoginSpine').empty();}
jQuery("body").addClass("sidebarActive");jQuery("#header .user").attr('tabindex',-1).focus();});};}
_this.init();jQuery('#header .headerContainer  #login_loginlink').on('click',function(e){header.removeLoginPopoutOuterContents();if(jQuery('#login_pop_container').hasClass('CARS_displayInline')){header.closeHelpPopout();jQuery('<div/>',{'class':'custom-modal-arrow'}).insertAfter('#header #login_maincontroller+.CARS_clear');jQuery('<div/>',{'class':'custom-modal-top-border'}).appendTo('#login-panel .custom-modal-arrow');jQuery('#header #login_pop_container').appendTo('#login-panel .custom-modal-top-border');header.addAccessibilityToLoginPopout();window.setTimeout(function(){jQuery('#header #login_pop_container #username').focus();},50);loginPopoutOpened=true;}});jQuery('#header .headerContainer  #logout_username_link').on('click',function(e){header.removeLogoutPopoutOuterContents();if(jQuery('#logout_pop').hasClass('CARS_displayInline')){jQuery('<div/>',{'class':'custom-modal-arrow'}).insertAfter('#header #logout_username_link+.CARS_clear');jQuery('<div/>',{'class':'custom-modal-top-border'}).appendTo('#header #logout_user .custom-modal-arrow');jQuery('#header #logout_pop').appendTo('#header #logout_user .custom-modal-top-border');logoutPopoutOpened=true;header.addAccessibilityToLogoutPopout();}});var registerIcon=jQuery('<span />').addClass('icon-BGS10 navigate-right-link-white');jQuery('#header #login_reglink').append(registerIcon);var closeIcon=jQuery('<a>',{'class':'iconSmall close pull-right','href':'javascript:void(0);','title':'Close window','aria-label':'Close','html':'&nbsp;'});var placeholderForCorrectFocus=jQuery('<span>',{'id':'login-close-placeholder','tabindex':'-1'});closeIcon.insertAfter(jQuery('#header #login_pop_container #login_pop_container_socialform'));placeholderForCorrectFocus.insertAfter(closeIcon);jQuery('#header #login_pop_container .close').addClass('login-close-icon');var requiredFieldsText=jQuery('<div>',{'class':'requiredFieldsText','displaystyle':':red','html':'*<span class="greyText">=required fields</span>'});requiredFieldsText.appendTo(jQuery("#header #login_pop_container #login_pop_container_logform"));var logOutPopOutOuterDiv=jQuery('<div>',{'class':'custom-logout-popout',});jQuery('#header #userPath').appendTo(logOutPopOutOuterDiv);logOutPopOutOuterDiv.appendTo('#header #logout_pop');closeIcon.insertAfter(jQuery('#header #logout_user #logout_pop #userPath'));placeholderForCorrectFocus.insertAfter(jQuery('#header #logout_user #logout_pop a.close'));jQuery('#header #login_loginlink').removeAttr("aria-expanded");var userPopoutTitleDiv=jQuery('<div>',{'class':'userPopoutTitle','tabindex':'0','html':'My organization'});userPopoutTitleDiv.insertBefore(jQuery('#header #logout_user #logout_pop #userPath'));jQuery('#header #login_pop_container .close').on('click',function(e){header.closeLoginPopout();});jQuery('#header #logout_pop .close').on('click',function(e){header.closeLogoutPopout();});var logoutLink=jQuery('#logout-panel #logout_logoutlink');logoutLink.appendTo(jQuery('#header #logout_pop #userPath'));logoutLink.css("display","inline-block");if(jQuery('#logout_user').length>0){jQuery("#header .personalAccess a").removeClass("not-signed-in-user-link");if(jQuery('#CARS_SETTINGS_TEMPLATE #settings-panel').contents().length===0){header.getMyScopusLinkData();}else{header.formProfileAccessLinks();}
if(!jQuery("#broughtToYouCnt .libraryBannerCont>#banner-top").length>0){jQuery("#broughtToYouCnt .libraryBannerCont").remove();}
if(!jQuery("#broughtToYouCnt .librCatl>a").length>0){jQuery("#broughtToYouCnt .librCatl").remove();}
if(!jQuery("#broughtToYouCnt li").length>0){jQuery("#broughtToYouCnt").parent().remove();}}
jQuery(".not-signed-in-user-link").on("click",function(){if(!jQuery('#login_pop_container').hasClass('CARS_displayInline')){jQuery("#header #login_loginlink")[0].onclick();jQuery("#header #login_loginlink").click();jQuery("#header #login_loginlink")[0].onclick();}})
jQuery("#logout_username_expand,#logout_username_collapse").hover(function(){jQuery("#logout_username,#logout_text_content").addClass("hovered");},function(){jQuery("#logout_username,#logout_text_content").removeClass("hovered");});jQuery("#logout_username_link").on('focus',function(){jQuery("#logout_username,#logout_text_content").addClass("hovered");}).on('blur',function(){jQuery("#logout_username,#logout_text_content").removeClass("hovered");});var isIE=header.detectIE();if(isIE){jQuery("#header li.regLnk").addClass("ieSpecific");jQuery("#header").addClass("ie");}
jQuery("#header #login_submit_btn").on("click",function(e){var errorCount=0;var focusInput=null;jQuery("#errorMsgContainerAlert").remove();var accessibileAlertDiv=jQuery('<div>',{'id':'errorMsgContainerAlert','role':'alert','aria-atomic':'true','aria-live':'assertive'});if(!jQuery("#header #username").val()){accessibileAlertDiv.append("username field is empty");errorCount++;focusInput=jQuery('#header #login_pop_container #username');if(jQuery('#userNameError').hasClass("displayNone")){jQuery("#userNameError").removeClass("displayNone").insertAfter(jQuery('#header #login_username'));}}else{if(!jQuery('#userNameError').hasClass("displayNone")){jQuery('#userNameError').addClass("displayNone");}}
if(!jQuery("#header #login_password-password,#header #password").val()){accessibileAlertDiv.append("password field is empty");errorCount++;if(focusInput===null){focusInput=jQuery('#header #login_pop_container #password,#header #login_pop_container #login_password-password');}
if(jQuery('#passwordError').hasClass("displayNone")){jQuery("#passwordError").removeClass("displayNone").insertAfter(jQuery('#header #login_password'));}}else{if(!jQuery('#passwordError').hasClass("displayNone")){jQuery('#passwordError').addClass("displayNone");}}
if(errorCount>0){jQuery("body").prepend(accessibileAlertDiv);focusInput.focus();e.preventDefault();}});jQuery("#header #logout_username,#header #logout_text_content").on("click",function(e){if(!jQuery('#logout_pop').hasClass('CARS_displayInline')){jQuery("#header #logout_username_link")[0].onclick();jQuery("#header #logout_username_link").click();jQuery("#header #logout_username_link")[0].onclick();}else{header.closeLogoutPopout();}});jQuery(".userOptionCnt>a").on("click",function(e){var otherAccordians=jQuery(".userOptionCnt>a").not(this);otherAccordians.each(function(index){if(jQuery(this).hasClass("expanded")){jQuery(this).removeClass("expanded").addClass("collapsed").attr("aria-expanded","false");jQuery(this).next().addClass("spineAccordianCollapsed");}});});jQuery("#logout_username,#logout_text_content").hover(function(){jQuery("#logout_username_link").addClass("hovered");},function(){jQuery("#logout_username_link").removeClass("hovered");});var keysdown={};var keyPressed=false;jQuery(".toggleIcon").keydown(function(e){if(keysdown[e.keyCode]){return;}
keysdown[e.keyCode]=true;if(e.keyCode===13){keyPressed=true;_this.toggleMenu();}else{keyPressed=false;}});jQuery(document).keyup(function(e){delete keysdown[e.keyCode];keyPressed=false;});});jQuery("#sourceBrowseId").on('click',function(event){if(typeof(Storage)!=="undefined"){localStorage.setItem("tabClicked","Search for a source");}});var $=jQuery.noConflict();var isoCountries={'AF':'Afghanistan','AX':'Aland Islands','AL':'Albania','DZ':'Algeria','AS':'American Samoa','AD':'Andorra','AO':'Angola','AI':'Anguilla','AQ':'Antarctica','AG':'Antigua And Barbuda','AR':'Argentina','AM':'Armenia','AW':'Aruba','AU':'Australia','AT':'Austria','AZ':'Azerbaijan','BS':'Bahamas','BH':'Bahrain','BD':'Bangladesh','BB':'Barbados','BY':'Belarus','BE':'Belgium','BZ':'Belize','BJ':'Benin','BM':'Bermuda','BT':'Bhutan','BO':'Bolivia','BA':'Bosnia And Herzegovina','BW':'Botswana','BV':'Bouvet Island','BR':'Brazil','IO':'British Indian Ocean Territory','BN':'Brunei Darussalam','BG':'Bulgaria','BF':'Burkina Faso','BI':'Burundi','KH':'Cambodia','CM':'Cameroon','CA':'Canada','CV':'Cape Verde','KY':'Cayman Islands','CF':'Central African Republic','TD':'Chad','CL':'Chile','CN':'China','CX':'Christmas Island','CC':'Cocos (Keeling) Islands','CO':'Colombia','KM':'Comoros','CG':'Congo','CD':'Congo, Democratic Republic','CK':'Cook Islands','CR':'Costa Rica','CI':'Cote D\'Ivoire','HR':'Croatia','CU':'Cuba','CY':'Cyprus','CZ':'Czech Republic','DK':'Denmark','DJ':'Djibouti','DM':'Dominica','DO':'Dominican Republic','EC':'Ecuador','EG':'Egypt','SV':'El Salvador','GQ':'Equatorial Guinea','ER':'Eritrea','EE':'Estonia','ET':'Ethiopia','FK':'Falkland Islands (Malvinas)','FO':'Faroe Islands','FJ':'Fiji','FI':'Finland','FR':'France','GF':'French Guiana','PF':'French Polynesia','TF':'French Southern Territories','GA':'Gabon','GM':'Gambia','GE':'Georgia','DE':'Germany','GH':'Ghana','GI':'Gibraltar','GR':'Greece','GL':'Greenland','GD':'Grenada','GP':'Guadeloupe','GU':'Guam','GT':'Guatemala','GG':'Guernsey','GN':'Guinea','GW':'Guinea-Bissau','GY':'Guyana','HT':'Haiti','HM':'Heard Island & Mcdonald Islands','VA':'Holy See (Vatican City State)','HN':'Honduras','HK':'Hong Kong','HU':'Hungary','IS':'Iceland','IN':'India','ID':'Indonesia','IR':'Iran, Islamic Republic Of','IQ':'Iraq','IE':'Ireland','IM':'Isle Of Man','IL':'Israel','IT':'Italy','JM':'Jamaica','JP':'Japan','JE':'Jersey','JO':'Jordan','KZ':'Kazakhstan','KE':'Kenya','KI':'Kiribati','KR':'Korea','KW':'Kuwait','KG':'Kyrgyzstan','LA':'Lao People\'s Democratic Republic','LV':'Latvia','LB':'Lebanon','LS':'Lesotho','LR':'Liberia','LY':'Libyan Arab Jamahiriya','LI':'Liechtenstein','LT':'Lithuania','LU':'Luxembourg','MO':'Macao','MK':'Macedonia','MG':'Madagascar','MW':'Malawi','MY':'Malaysia','MV':'Maldives','ML':'Mali','MT':'Malta','MH':'Marshall Islands','MQ':'Martinique','MR':'Mauritania','MU':'Mauritius','YT':'Mayotte','MX':'Mexico','FM':'Micronesia, Federated States Of','MD':'Moldova','MC':'Monaco','MN':'Mongolia','ME':'Montenegro','MS':'Montserrat','MA':'Morocco','MZ':'Mozambique','MM':'Myanmar','NA':'Namibia','NR':'Nauru','NP':'Nepal','NL':'Netherlands','AN':'Netherlands Antilles','NC':'New Caledonia','NZ':'New Zealand','NI':'Nicaragua','NE':'Niger','NG':'Nigeria','NU':'Niue','NF':'Norfolk Island','MP':'Northern Mariana Islands','NO':'Norway','OM':'Oman','PK':'Pakistan','PW':'Palau','PS':'Palestinian Territory, Occupied','PA':'Panama','PG':'Papua New Guinea','PY':'Paraguay','PE':'Peru','PH':'Philippines','PN':'Pitcairn','PL':'Poland','PT':'Portugal','PR':'Puerto Rico','QA':'Qatar','RE':'Reunion','RO':'Romania','RU':'Russian Federation','RW':'Rwanda','BL':'Saint Barthelemy','SH':'Saint Helena','KN':'Saint Kitts And Nevis','LC':'Saint Lucia','MF':'Saint Martin','PM':'Saint Pierre And Miquelon','VC':'Saint Vincent And Grenadines','WS':'Samoa','SM':'San Marino','ST':'Sao Tome And Principe','SA':'Saudi Arabia','SN':'Senegal','RS':'Serbia','SC':'Seychelles','SL':'Sierra Leone','SG':'Singapore','SK':'Slovakia','SI':'Slovenia','SB':'Solomon Islands','SO':'Somalia','ZA':'South Africa','GS':'South Georgia And Sandwich Isl.','ES':'Spain','LK':'Sri Lanka','SD':'Sudan','SR':'Suriname','SJ':'Svalbard And Jan Mayen','SZ':'Swaziland','SE':'Sweden','CH':'Switzerland','SY':'Syrian Arab Republic','TW':'Taiwan','TJ':'Tajikistan','TZ':'Tanzania','TH':'Thailand','TL':'Timor-Leste','TG':'Togo','TK':'Tokelau','TO':'Tonga','TT':'Trinidad And Tobago','TN':'Tunisia','TR':'Turkey','TM':'Turkmenistan','TC':'Turks And Caicos Islands','TV':'Tuvalu','UG':'Uganda','UA':'Ukraine','AE':'United Arab Emirates','GB':'United Kingdom','US':'United States','UM':'United States Outlying Islands','UY':'Uruguay','UZ':'Uzbekistan','VU':'Vanuatu','VE':'Venezuela','VN':'Viet Nam','VG':'Virgin Islands, British','VI':'Virgin Islands, U.S.','WF':'Wallis And Futuna','EH':'Western Sahara','YE':'Yemen','ZM':'Zambia','ZW':'Zimbabwe'};var ctoId;var stateKey;var maxYearRange;var MessageContainer={WARNING_MSG:"warningMsgContainer",ERROR_MSG:"errorMessageContainer",INFO_MSG:"infoMsgContainer",CONFIRM_MSG:"confirmMsgContainer",messageType:"",msgContent:"",parentContainerObj:$(".contentContainer"),removeMessages:function(){var confirmationMessage=$('#confirmMsgContainer');if(confirmationMessage.length>0){$(confirmationMessage).remove();}
var exportSettingsSaveMessage=$('.txtZoneInfoMsgContainer');if(exportSettingsSaveMessage.length>0){$(exportSettingsSaveMessage).remove();}
var warningMessage=$('#warningMsgContainer');if(warningMessage.length>0){$(warningMessage).remove();}
var warningMessageObj=$('.warningMsgContainer');if(warningMessageObj.length>0){$(warningMessageObj).remove();}
var errorMessage=$('#errorMessageContainer');if(errorMessage.length>0){$(errorMessage).remove();}},removeMsgContatiner:function(){if(MessageContainer.messageType){$('#'+MessageContainer.messageType).remove();}},insertMsgContainer:function(){if(MessageContainer.msgContent){MessageContainer.removeMsgContatiner();var messageType=MessageContainer.messageType!==""?MessageContainer.messageType:MessageContainer.INFO_MSG;var msgObj=$("<div>",{'id':messageType,'html':'<span></span>','role':'alert'});msgObj.append(MessageContainer.msgContent);var parentObj=MessageContainer.parentContainerObj.length>0?MessageContainer.parentContainerObj:$(".contentContainer");parentObj.prepend(msgObj);jQuery(document).scrollTop(msgObj);msgObj.focus();}}};(function($){$.fn.handleBrowserButtons=function(){var tabs=$('#tabs'),tab_a_selector='ul.ui-tabs-nav a';tabs.tabs({event:'change'});tabs.find(tab_a_selector).click(function(){var state={},id=$(this).closest('#tabs').attr('id'),idx=$(this).parent().prevAll().length;state[id]=idx;$.bbq.pushState(state);});$(window).bind('hashchange',function(e){tabs.each(function(){var idx=$.bbq.getState(this.id,true)||0;$(this).find(tab_a_selector).eq(idx).triggerHandler('change');});});$(window).trigger('hashchange');};$.fn.altMetric=function(options){$.fn.altMetric.helper.notInISSNListPreview(options);var opts=$.extend({},$.fn.altMetric.defaults,options);opts.labels=$.fn.altMetric.localizedLabel(opts);opts.container=$(this).addClass("altMet");$.fn.altMetric.helper.ordinalObj=opts.labels.common.number;if(opts.hasOwnProperty('configurations')){$.fn.altMetric.tabKeys=$.fn.altMetric.helper.getKeys(opts.configurations);}
if(options.hasOwnProperty('externalConfigurations')){opts['externalConfigurations']=options.externalConfigurations;if(options.externalConfigurations.hasOwnProperty('openGlobalhelp')){$.fn.altMetric.openGlobalhelp=options.externalConfigurations.openGlobalhelp;$.fn.altMetric.helpPageIds=options.externalConfigurations.helpPageIds;}
if(options.externalConfigurations.hasOwnProperty('addKeyevent')){$.fn.altMetric.addKeyevent=options.externalConfigurations.addKeyevent;}
if(options.externalConfigurations.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues=options.externalConfigurations.metricValues;}}
if(opts.hasOwnProperty('isRight')&&opts.isRight){var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var dataCounts=altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var percentiles=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var contextForScore=percentiles.length>0&&percentiles[0].hasOwnProperty('context_for_score')?percentiles[0].context_for_score:{};var countsLength=$.fn.altMetric.helper.getKeyCount(dataCounts);var contextForScoreLen=$.fn.altMetric.helper.getKeyCount(contextForScore);if($.fn.altMetric.hasOwnProperty('buildRightModule')&&((countsLength===1&&!dataCounts.hasOwnProperty('citations'))||(countsLength>1)||contextForScoreLen>0)){$.fn.altMetric.buildRightModule(opts);if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_merticsSidebar');}}}else if(opts.hasOwnProperty('data')){$.fn.altMetric.drawHeader(opts);$.fn.altMetric.drawContent(opts);$.fn.altMetric.drawGreyContent(opts);$.fn.altMetric.drawTabs(opts);jQuery(".previewDisable,.previewDisable a").prop("onclick",null).removeAttr("href").removeAttr("onclick").die("click").off("click");}else if(opts.hasOwnProperty('url')){}
return this;};$.fn.altMetric.helper={ordinalObj:'',isIE8:$.browser.msie&&+$.browser.version===8,switchTab:function(tabIndex){$($.fn.altMetric.tabs).find('ul.ui-tabs-nav a').eq(tabIndex.newIndex).trigger('click');$($.fn.altMetric.tabs).find('ul.ui-tabs-nav a').eq(tabIndex.newIndex).focus();},notInISSNListPreview:function(options){var isPreview=ScopusAltMetric.paramData.data.isPreview;var articleData=options.data.hasOwnProperty('articleData')?options.data.articleData:[];var metrics=options.data.altMetricData.metrics;var issn=articleData.hasOwnProperty('issn')?articleData.issn:0;var newIssn=0;if(issn!==0){newIssn=[issn.slice(0,4),"-",issn.slice(4)].join('');}
var sourceIssnArray=ScopusAltMetric.paramData.data.sourceIssnArray;var notInISSNListPreview=false;if(isPreview==="true"){options.isPreview=true;if(jQuery.inArray(newIssn,sourceIssnArray)==-1){notInISSNListPreview=true;}
options.notInISSNListPreview=notInISSNListPreview;}},hideTab:function(tabIndex){var tabObj=$($.fn.altMetric.tabs);var disabled=tabObj.tabs("option","disabled");if(disabled){disabled.push(tabIndex);}else{disabled=[tabIndex];}
tabObj.tabs("option","disabled",disabled);},ordinalSuffix:function(number){var mod=number%10;var numberSpan=number;var suffix;var ordinalObj=$.fn.altMetric.helper.ordinalObj;if(mod===1&&number!==11){suffix=ordinalObj.first(numberSpan);}else if(mod===2&&number!==12){suffix=ordinalObj.second(numberSpan);}else if(mod===3&&number!==13){suffix=ordinalObj.third(numberSpan);}else{suffix=ordinalObj.fourth(numberSpan);}
return suffix;},sortArrayWithArray:function(reference,tosort){var sortedArray=[];$.each(reference,function(index,value){var indexValueOfArray=tosort.indexOf(value);if(indexValueOfArray!==-1){sortedArray.push(value);tosort.splice(indexValueOfArray,1);}});$.merge(sortedArray,tosort);return sortedArray;},drawFeedStream:function(data){var verticalLine=$('<div>',{'class':"altmet_engage_line"});var title=$('<a>',{'class':"altmet_overview_post_title",'text':data.feedStream.anchor.content,'title':data.feedStream.anchor.titleAttr,'target':"_blank",'href':data.feedStream.anchor.url});var auName=$('<div>',{'class':"altmet_overview_src_title",'text':data.feedStream.secondLineTitle});var auDate=$('<div>',{'class':"altmet_overview_date",'text':data.feedStream.feedDetails});verticalLine.append(title).append(auName).append(auDate);data.container.append(verticalLine);return verticalLine;},drawFeedStreamSocial:function(data){var feedStreamObj=$('<div>',{'class':"altmet_feedStream"});var pictUrl=data.feedStream.imageUrl;var pictAlt=data.feedStream.imageAlt;var imageObj=$('<img>',{'src':pictUrl,'width':50,'height':50,'alt':pictAlt,'class':'altmet_feedStreamImg'});var descriptionObj=$('<div>',{'class':"altmet_feedStreamDesc"});var clearObj=$('<div>',{'class':"clear"});var titleObj=$('<div>',{'class':"altmet_feedTitle"});var summaryObj=$('<div>',{'class':"altmet_feedSummary",'html':data.feedStream.summary});var summaryObjClass="altmet_feedSummary"+"_"
+data.feedStream.tweet_id;summaryObj.addClass(summaryObjClass);var nameObj=$('<span>',{'class':"altmet_feedName",'text':data.feedStream.authorName});var handleObj=$('<span>',{'class':"altmet_handle",'text':data.feedStream.id_on_source!==''?'@'
+data.feedStream.id_on_source:''});var timeStampObj=$('<a>',{'class':"altmet_timeStamp",'text':data.feedStream.feedTimeStamp,'href':data.feedStream.anchor.url,'title':data.feedStream.timeStampTitle,'target':'_blank'});if(data.feedStream.authorName!==''){titleObj.append(nameObj);};if(data.feedStream.id_on_source!==''&&data.feedStream.source==='twitter'){titleObj.append(handleObj);};if(data.feedStream.feedTimeStamp!==''){titleObj.append(timeStampObj);}
descriptionObj.append(titleObj).append(summaryObj);feedStreamObj.append(imageObj).append(descriptionObj).append(clearObj).addClass('social');data.container.append(feedStreamObj);return feedStreamObj;},drawLisForStream:function(dataStream,data,liContainer){var drawRowCount=data.hasOwnProperty('drawRowCount')?data.drawRowCount:10;var tweetIds=[];$.each(dataStream,function(index,value){var streamContainer=$('<li>',{'class':"altmet_streamContainer streamRow"
+index}).addClass(data.section);var authorName=value.hasOwnProperty('author')&&value.author.hasOwnProperty('name')?value.author.name:'';var feedTimeStamp=$.fn.altMetric.helper.isToday(value.posted_on)?$.fn.altMetric.helper.getHourString(value.posted_on):$.fn.altMetric.helper.isThisYear(value.posted_on)?$.fn.altMetric.helper.getDayString(value.posted_on):$.fn.altMetric.helper.getDateString(value.posted_on);var summary=value.hasOwnProperty('summary')?value.summary:'';summary=summary.replace(/\\n/g,"<br />");if(value.summary===undefined){if(typeof tweet_id!==undefined&&data.source==="twitter"){tweetIds.push(value.tweet_id);}}
var regex=/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.\+\-]*(\?\S+)?)?)?)/ig;var replacedSummary=summary.replace(regex,"<a href='$1' target='_blank' title='Content link'>$1</a>");var streamData={'container':streamContainer,'feedStream':{'anchor':{'content':value.hasOwnProperty('title')?value.title:'','titleAttr':data.anchorTitle((value.hasOwnProperty('title')?value.title:'')),'url':value.hasOwnProperty('url')?value.url:''},'authorName':authorName,'feedTimeStamp':feedTimeStamp,'imageUrl':value.hasOwnProperty('author')&&value.author.hasOwnProperty('image')?value.author.image:'../static/images/altMetric/UserImage50x50.png','imageAlt':'Picture of '+authorName,'id_on_source':value.hasOwnProperty('author')&&value.author.hasOwnProperty('id_on_source')?value.author.id_on_source:'','summary':replacedSummary,'timeStampTitle':data.timeStampTitle,'source':data.source,'secondLineTitle':value.hasOwnProperty('author')&&value.author.hasOwnProperty('name')?value.author.name:'','feedDetails':$.fn.altMetric.getDateString(value.posted_on),'tweet_id':value.hasOwnProperty('tweet_id')?value.tweet_id:''}};if(index>=drawRowCount){streamContainer.addClass("streamRowGtDefault");}
liContainer.append(streamContainer);var isSocial=data.hasOwnProperty('isSocial')?data.isSocial:false;var streamContent;if(isSocial){streamContent=$.fn.altMetric.helper.drawFeedStreamSocial(streamData);}else{streamContent=$.fn.altMetric.helper.drawFeedStream(streamData);var streamSummaryContainer=$('<div>',{'class':"altmet_streamSummary",'text':value.summary});streamContent.after(streamSummaryContainer);}
lastIndex=index;if(index+1===drawRowCount){return false;}});$.fn.altMetric.helper.drawTweets(tweetIds);},drawTweets:function(tweetIds){if(!(jQuery.isEmptyObject(tweetIds))){var metricData=jQuery.get("../metrics/twitter.uri",{"tweetIds":tweetIds.toString()});metricData.done(function(response){var sinTweet=response;$.each(sinTweet.tweetStatus,function(index,value){var feedSummaryClass=".altmet_feedSummary"+"_"
+value.tweetId;$(feedSummaryClass).html(value.tweetSummary);});});}},drawFullFeedStream:function(data){var container=data.container;var defaultDisplayCount=data.hasOwnProperty('defaultDisplayCount')?data.defaultDisplayCount:20;var totalFeedCount=data.totalFeedCount;var streamUL=container.find(".altmet_list.altmet_streamUL");if(!streamUL.length){streamUL=$('<ul>',{'class':"altmet_list altmet_streamUL"}).addClass(data.section);}
container.append(streamUL);var dataStream=data.stream;data.drawRowCount=defaultDisplayCount;$.fn.altMetric.helper.drawLisForStream(dataStream,data,streamUL);if(totalFeedCount>defaultDisplayCount){dataStream.splice(0,defaultDisplayCount);var viewMoreLink=$('<a>',{'class':"altmet_viewMoreLink",'href':'#viewMore','text':data.viewMore.label(),'title':data.viewMore.title()}).addClass(data.section);var viewMoreContainer=$('<div>',{'class':"altmet_viewMoreLess"}).data('dataStream',dataStream).append(viewMoreLink).addClass(data.source);container.append(viewMoreContainer);viewMoreLink.off('click.'+data.section).on('click.'+data.section,{'param':data},$.fn.altMetric.helper.view10More);}
return streamUL;},setNextPageData:function(data){var postType=data.postType;$(".altmet_viewMoreLess."+postType).data('dataStream',data.altMetricData.results[postType]);},view10More:function(event){event.preventDefault();var data=event.data;var defaultDisplayCount=data.param.hasOwnProperty('defaultDisplayCount')?data.param.defaultDisplayCount:20;var ulObj=$(this).parent().parent().find(".altmet_streamUL");var startIndex=ulObj.find("li:visible:last").index();var hasMoreIndex=-1;var objToShow=ulObj.find("li:gt("+startIndex+"):lt(10)");if(objToShow.length){objToShow.show('slow');hasMoreIndex=ulObj.find("li:hidden:last").index();}else{var dataContainer=$(this).parent();var viewMoreData=dataContainer.data('dataStream');if(viewMoreData.length>0){data.param.drawRowCount=10;$.fn.altMetric.helper.drawLisForStream(viewMoreData,data.param,ulObj);var spliceCount=viewMoreData.length>10?10:viewMoreData.length;viewMoreData.splice(0,spliceCount);dataContainer.data('dataStream',viewMoreData);if(viewMoreData.length===0){var page=Math.ceil((startIndex+1)/30,1);data.param.getNextPage(page,data.param.source,$.fn.altMetric.helper.setNextPageData);}}}
if(startIndex===(defaultDisplayCount-1)){var viewLessLink=$('<a>',{'class':"altmet_viewLessLink",'href':'#viewLess','text':data.param.viewLess.label(),'title':data.param.viewLess.title()});$(this).parent().append(viewLessLink);viewLessLink.off('click.'+data.param.section).on('click.'+data.param.section,{'param':data.param},$.fn.altMetric.helper.viewLess);$.fn.altMetric.helper.view10More.startIndexes=[];}
$.fn.altMetric.helper.view10More.startIndexes.push(startIndex);var displayedLiCount=(ulObj.find("li:last").index()+1);if(displayedLiCount===data.param.totalFeedCount&&hasMoreIndex===-1){$(this).hide();}},viewLess:function(event){event.preventDefault();var data=event.data.param;var defaultDisplayCount=data.hasOwnProperty('defaultDisplayCount')?data.defaultDisplayCount:20;var ulObj=$(this).parent().parent().find(".altmet_streamUL");var startIndex=$.fn.altMetric.helper.view10More.startIndexes.pop();ulObj.find("li:gt("+(startIndex)+"):lt(10)").hide('slow');$(this).parent().find('.altmet_viewMoreLink').show();if(startIndex===(defaultDisplayCount-1)||$.fn.altMetric.helper.view10More.startIndexes.length===0){$(this).remove();}},processMapData:function(options,source){var data=options.data.altMetricData;var countryValues;var srcCount;if(source==="Mendeley"){countryValues=data.counts.countries.mendeley;srcCount=data.counts.sources.mendeley;}else{countryValues=data.counts.countries.twitter;srcCount=data.counts.sources.twitter;}
var tempData=[];var mapData=[];$.each(countryValues,function(key,value){var percentage=$.fn.altMetric.helper.getPercentile(value,srcCount);value=parseInt(value);if(percentage>0){var countryData={"hc-key":key.toLowerCase(),"value":percentage,'count':value};mapData.push(countryData);tempData.push({'value':value,'percentage':percentage});}});tempData.sort(function(a,b){return a.value-b.value;});options.mapDataExtreams={'min':tempData[0],'max':tempData[tempData.length-1]};options.mapData=mapData;return options;},drawTooltip:function(obj,source,options){var mendSingular=options.labels.sidebar.mendeleyReaders.mendeleyText.singular();var mendPlural=options.labels.sidebar.mendeleyReaders.mendeleyText.plural();var title=(source==="Mendeley")?$.fn.altMetric.helper.getSingularPlural(obj.point.count,mendSingular,mendPlural):$.fn.altMetric.helper.getSingularPlural(obj.point.count,"tweet","tweets");return'<div class="hoverDataWraper" style="border:1px solid '
+obj.point.color
+';"><span class="hoverDataFirstInfoIcon hoverDataFirstInfo">&nbsp'
+obj.point.name+'</span><span class="hoverDataSecInfo">'
+obj.point.value
+'%</span><span class="hoverDataThirdInfo">'
+obj.point.count+'&nbsp'+title+'</span></div>';},getDateString:function(isoDateString,format){var parts=isoDateString.match(/\d+/g);if(typeof format==='undefined'){format='dd MM yy';}
var isoTime=Date.UTC(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);return $.datepicker.formatDate(format,new Date(isoTime));},getDayString:function(isoDateString){var parts=isoDateString.match(/\d+/g);var format='dd MM';var isoTime=Date.UTC(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);return $.datepicker.formatDate(format,new Date(isoTime));},getHourString:function(isoDateString){var parts=isoDateString.match(/\d+/g);var isoTime=Date.UTC(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);return new Date(isoTime).getHours();},isToday:function(isoDateString){var parts=isoDateString.match(/\d+/g);var isoTime=Date.UTC(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);var checkDate=new Date(isoTime);var today=new Date();return today.getFullYear()===checkDate.getFullYear()&&today.getMonth()===checkDate.getMonth()&&today.getDate()===checkDate.getDate();},isThisYear:function(isoDateString){var parts=isoDateString.match(/\d+/g);var isoTime=Date.UTC(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);var checkDate=new Date(isoTime);var today=new Date();return today.getFullYear()===checkDate.getFullYear();},getKeys:function(object){var keys=[];if($.fn.altMetric.helper.isIE8&&!jQuery.isEmptyObject(object)){for(var key in object){if(key!==''){keys.push(key);}}}else if(!jQuery.isEmptyObject(object)){keys=Object.keys(object);}
return keys;},getKeyCount:function(object){return $.fn.altMetric.helper.getKeys(object).length;},getSingularPlural:function(count,singular,plural){return count>1?plural:singular;},getMendSingularPlural:function(count,singular,plural){return count===0||count>1?plural:singular;},getMentionSources:function(mention,sources,options){var subHeading;if(mention>1&&sources>1){subHeading=options.labels.tabs.overview.socialActivity.subHeading(mention,sources);}else if(mention>1&&sources===1){subHeading=options.labels.tabs.overview.socialActivity.singleSource(mention,sources);}else{subHeading=options.labels.tabs.overview.socialActivity.singleMention(mention,sources);}
return subHeading;},getReaderSource:function(reader,sources,options){var subHeading;if(reader>1&&sources>1){subHeading=options.labels.tabs.overview.scholarlyActivity.heading(reader,sources);}else if(reader>1&&sources===1){subHeading=options.labels.tabs.overview.scholarlyActivity.singleSource(reader,sources);}else{subHeading=options.labels.tabs.overview.scholarlyActivity.singleReader(reader,sources);}
return subHeading;},demoProgressBar:function(container,number){$(container).progressbar({'value':number});},sortByDesc:function(options,mendCount,secondSort){var array=[];if(!$.isEmptyObject(options)){for(i in options){if(options[i]!==""){array.push({demoGraphData:i,number:$.fn.altMetric.helper.getPercentile(options[i],mendCount)});}}
array.sort(function(i,j){if(j.number-i.number==0&&secondSort){return i.demoGraphData<j.demoGraphData?-1:i.demoGraphData>j.demoGraphData?1:0;}else{return j.number-i.number;}});}
return array;},getCountryName:function(countryCode){if(isoCountries.hasOwnProperty(countryCode)){return isoCountries[countryCode];}else{return countryCode;}},getPercentile:function(number,sources){return Math.round((number/sources)*100);},isOnlyHK:function(data,source){var countryValues=data.counts.countries[source];var countries=$.fn.altMetric.helper.getKeyCount(countryValues);return countries===1&&countryValues.hasOwnProperty('HK');},removeWeibo:function(options){var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var dataCounts=altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var buckets=dataCounts.hasOwnProperty("buckets")?dataCounts.buckets:{};if(!$.isEmptyObject(buckets)){var sact=buckets.hasOwnProperty("social_activity")?buckets.social_activity:{};var sactDB=(!$.isEmptyObject(sact)&&sact.hasOwnProperty("break_down"))?sact.break_down:{};var weiboCnt=sactDB.hasOwnProperty('weibo')?sactDB.weibo:0;if(weiboCnt>0){sact.total=sact.total-weiboCnt;delete sactDB['weibo'];}}},removeUrlParam:function(url,parameter){var urlparts=url.split('?');if(urlparts.length>=2){var prefix=encodeURIComponent(parameter)+'=';var pars=urlparts[1].split(/[&;]/g);for(var i=pars.length;i-->0;){if(pars[i].lastIndexOf(prefix,0)!==-1){pars.splice(i,1);}}
url=urlparts[0]+'?'+pars.join('&');return url;}else{return url;}},changeHelpLink:function(event){var helpIndex=$(".metric_help_icon").attr("data-helpindex");event.preventDefault();$.fn.altMetric.openGlobalhelp(helpIndex);}};$.fn.altMetric.bubble={addBubbleContent:function(options){var metricURL='../../www.snowballmetrics.com';var snowballCommonLabels=options.labels.common.snowballBubble;var params=options.params;var bubbleContainer=params.targetElement;var targetElementObjId=params.bubbleDataTarget;var dynamicTextObj=params.dynamicTextObj;var bubbleObjId=targetElementObjId+'-data';var bubbleDataObj=$("<div>",{'id':bubbleObjId,'class':'bubble-source-data'});var snowBallBubbleIcon=$("<a>",{'class':'altmet_bubbleSnowBallIcon','href':metricURL,'target':'_blank','title':snowballCommonLabels.headingSnowBubbleIconTitle()});var snowBallDefaultContainerObj=$("<span>",{'id':'snowBallMertricsTextDiv','class':'altmet_snowBallBubble_defaultContent'});var snowBallDefaultMetricLinkTxt=["<a href='",metricURL,"' target='_blank' title='"
+snowballCommonLabels.headingSnowBubbleIconTitle(),"'>"];var snowBallDefaultMetricTxt='<span class="altmet_snowball_Metrics">';var snowBallDefaultTextObj=$("<span>",{'class':"altmet_snowBallBubbleText",'html':snowballCommonLabels.defaultContent(snowBallDefaultMetricTxt,snowBallDefaultMetricLinkTxt.join(''),'</a><span class="hidden-label">opens in a new window</span>','</span>')});var snowBallLearnMoreLinkTxt=["<a class='altmet_learnMoreLink' href='#' title='",options.labels.tabs.scholarlyActivity.headingSnowBubbleHelpTitle(),"' onclick='$.fn.altMetric.bubble.showLearnMore(event);'>"];var snowBallLearnMoreTextObj=$("<span>",{'class':"altmet_snowball_learnmore",'html':snowballCommonLabels.learnMoreContent(snowBallLearnMoreLinkTxt.join(''),'</a><span class="hidden-label">opens in a new window</span>')});snowBallDefaultContainerObj.append(snowBallBubbleIcon).append(snowBallDefaultTextObj).append(snowBallLearnMoreTextObj);bubbleDataObj.append(dynamicTextObj);bubbleDataObj.append(dynamicTextObj).append(snowBallDefaultContainerObj);bubbleContainer.append(bubbleDataObj);params={'snowballIconId':targetElementObjId,'bubbleContainer':bubbleContainer,'bubblePosition':options.params.bubblePosition,'setDataBack':params.setDataBack};$.fn.altMetric.bubble.showBubble(params);},addBubbleContentWithoutSnow:function(options){var snowballCommonLabels=options.labels.common.snowballBubble;var params=options.params;var bubbleContainer=params.targetElement;var targetElementObjId=params.bubbleDataTarget;var dynamicTextObj=params.dynamicTextObj;var bubbleObjId=targetElementObjId+'-data';var bubbleDataObj=$("<div>",{'id':bubbleObjId,'class':'bubble-source-data'});var snowBallDefaultContainerObj=$("<span>",{'id':'snowBallMertricsTextDiv','class':'altmet_snowBallBubble_defaultContent','role':'alert'});var snowBallLearnMoreLinkTxt=["<a class='altmet_learnMoreLink' href='#' title='",options.labels.tabs.scholarlyActivity.headingSnowBubbleHelpTitle(),"' onclick='$.fn.altMetric.bubble.showLearnMore(event);'>"];var snowBallLearnMoreTextObj=$("<span>",{'class':"altmet_snowball_learnmore",'html':snowballCommonLabels.learnMoreContent(snowBallLearnMoreLinkTxt.join(''),'</a>')});snowBallDefaultContainerObj.append(snowBallLearnMoreTextObj);bubbleDataObj.append(dynamicTextObj);bubbleDataObj.append(dynamicTextObj).append(snowBallDefaultContainerObj);bubbleContainer.append(bubbleDataObj);params={'snowballIconId':targetElementObjId,'bubbleContainer':bubbleContainer,'bubblePosition':options.params.bubblePosition,'setDataBack':params.setDataBack};$.fn.altMetric.bubble.showBubble(params);},showLearnMore:function(event){event.preventDefault();var helpId;var helpPageIds=$.fn.altMetric.helpPageIds;if(typeof helpPageIds!=='undefined'){if($(event.target).closest("#metrics_help_icon_bubbleContainer").length||$(event.target).closest("#altmet_aboutsnowball_bubbleContainer").length){helpId=$.fn.altMetric.helpPageIds.aboutAltMet;}else if($(event.target).closest("#overview").length){helpId=$.fn.altMetric.helpPageIds.overview;}else if($(event.target).closest("#citations").length){helpId=$.fn.altMetric.helpPageIds.citations;}else if($(event.target).closest("#scholarlyActivity").length){helpId=$.fn.altMetric.helpPageIds.scholarlyActivity;}else if($(event.target).closest("#scholarlyCommentary").length){helpId=$.fn.altMetric.helpPageIds.scholarlyCommentary;}else if($(event.target).closest("#massMedia").length){helpId=$.fn.altMetric.helpPageIds.massMedia;}else if($(event.target).closest("#socialActivity").length){helpId=$.fn.altMetric.helpPageIds.socialActivity;}else if($(event.target).closest("#FWCIsnowballBubbleContainer").length){helpId=$.fn.altMetric.helpPageIds.FWCI;}else{helpId=$.fn.altMetric.helpPageIds.dataProvidedBy;}}
$.fn.altMetric.openGlobalhelp(helpId);},showBubble:function(params){var snowballIconId=params.snowballIconId;var bubbleContainer=params.bubbleContainer;var snowballIconObj="#"+snowballIconId;$(snowballIconObj).unbind("click").bind("click",{position:Bubble[params.bubblePosition],setDataBack:true,},Bubble.showBubble);bubbleContainer.bind("mouseleave",{'elementId':snowballIconId},$.fn.altMetric.bubble.hideBubble);},hideBubble:function(event){var snowballIconId=event.data.elementId;var snowballBubbleObj="#bubble-"+snowballIconId;if($(snowballBubbleObj).text().length>0){event["data"]={'elementId':snowballIconId};Bubble.hide(event);}}};$.fn.altMetric.defaults={"configurations":{"overview":{"isDefault":true},"citations":{},"scholarlyActivity":{},"scholarlyCommentary":{},"massMedia":{},"socialActivity":{}},"labels":{"common":{"pageHeading":function(){return"Metric details";},"backToArticleLink":function(){return"Back to article";},"backToArticleLinkTitle":function(){return"Back to author details page";},"articleNo":function(){return"Article Number";},"volume":function(){return"Volume";},"issue":function(){return"Issue";},"email":function(){return"Email";},"emailTitle":function(){return"Email this page";},"snowballBubble":{"defaultContent":function(){return"Metrics displaying this icon are compiled according to {0}Snowball Metrics{1}, a collaboration between industry and academia.";},"learnMoreContent":function(){return"{0}Learn more{1} about article metrics in Scopus.";},"headingSnowBubbleIconTitle":function(){return"View the Snowball Metric Website (opens in a new window)";},"headingSnowBubbleHelpTitle":function(){return"View Scopus help file (opens in a new window)";},"snowballMetricsText":function(){return"Snowball Metrics";},"snowballMetricsLabel":function(){return"About Snowball Metrics";},"snowballMetricsTitle":function(){return"Learn more about Snowball Metrics";}}},"email":{"emailBubbleDesc":function(){return"Send to:";},"emailBubbleDescUserMail":function(){return"Your email address:";},"emailBubbleHeader":function(){return"Email metric details";},"emailFormatLabel":function(){return"E-mail format:";},"emailFormatValueHTML":function(){return"HTML";},"emailFormatValueTEXT":function(){return"TEXT";},"sendButtonLabel":function(){return"Send";},"closeButtonTitle":function(){return"Close";},"emailTitleToolTip":function(){return"Enter the email addresses you would like these details sent to. Multiple Email address can be separated by commas.";},"emailUsrTitle":function(){return"Enter your email address";},"emailWaterMarkUserMail":function(){return"Email address";},"emailWaterMarkSentToMail":function(){return"Email address, email address,";},"textRadioToolTip":function(){return"Choose text Format";},"htmlRadioToolTip":function(){return"Choose HTML Format";},"privacyPolicy":function(){return"Privacy policy";},"privacyPolicyToolTip":function(){return"View Elsevier's privacy policy.(opens in a new window)";},"errormessage":function(){return"One or more of the email addresses entered is not valid. Please check your entries before sending.";},"conformationmessage":function(){return"The email has been sent.";}},"tabs":{'overview':{'title':function(){return'Overview';},'subTitle':function(){return'';},'nameTitle':function(){return'';},'citationcardheader':function(){return'Citation Count';},'citationcardcountdesc':function(){return'Cited by in Scopus';},'heading1':function(){return'Overview';},'heading2':function(){return'Engagement highlights';},'cards':{'mendeley':{'header':function(){return'Mendeley';},'countdesc':function(){return'Readers';}},'twitter':{'header':function(){return'Twitter';},'countdesc':function(){return'Tweets';}},'facebook':{'header':function(){return'Facebook';},'countdesc':function(){return'Posts';}},'f1000':{'header':function(){return'F1000Prime';},'countdesc':function(){return'Review';}},'googleplus':{'header':function(){return'Google +';},'countdesc':function(){return'Posts';}},'other':{'header':function(){return'Other sources';},'countdesc':function(){return'Posts';}},'poweredBy':function(param0,param1){return'Twitter and Facebook data are provided by'
+param0+'Altmetric.com'+param1;},'poweredByTitle':function(){return'Learn more about Altmetrics (opens in a new window)';}},'content':{}},'citations':{'title':function(){return'Citations';},'subTitle':function(){return'';},'nameTitle':function(){return'';},'graph':{'dateRangeText':function(){return'Date range:';},'dateRangeToText':function(){return' to ';},'citationGraphStart':function(){return'Citation graph start';},'citationGraphEnd':function(){return'Citation graph end';},'excludeSelfCitationsText':function(){return'Exclude self citations';},'excludeAuthorsToolTip':function(){return'Selecting this option will exclude both the self citations of the author as well as citations by all co-authors.';},'excludeBookCitationsText':function(){return'Exclude citations from books';},'excludeBooksToolTip':function(){return'Selecting this option will exclude citations from non-serial books and book chapters.';},'updateCitationsGraphOffText':function(){return'Select to update the graph';},'updateCitationsGraphText':function(){return'Update';},'updateCitationsGraphEditText':function(){return'Edit the data for this graph.';},'highChartYTitle':function(){return'Citations';},'highChartXTitle':function(){return'Years';},'citedByCountsText':function(){return'Citations';},'citedByText':function(){return'Cited by';},'exportText':function(){return'Export';},'exportToolTip':function(){return'Export the citation overview to a spreadsheet.';},'exportConfirmationText':function(){return'The citation overview has been downloaded as a comma separated file(.csv).';},'startYearGreaterThanEndYear':function(){return'The start year in the date range you specified is later than the end year. Please make sure the start year is earlier or equal to the end year.';},'dateRangeTooGreat':function(){return'You have selected a year range of more than {0} years. The citation overview page can display up to {1} years. Please select a shorter range to display on the page.';},'authorsExcludedConfirmation':function(){return'Self citations of all authors are excluded.';},'booksExcludedConfirmation':function(){return'Citations from books are excluded.';},'chartDataToolTip':function(){return'Click point to view document list';}},'cards':{'citation':{'header':function(){return'Citation Count';},'desc':function(){return'Cited by in Scopus';},'snowballIconTitle':function(){return'Learn more about Citation Count and Snowball Metrics';},'snowballBubbleHeader':function(){return'Citation Count';},'snowballBubbleText':function(){return'Citation count shows how many times a publication has been cited.';}},'benchmark':{'header':function(){return'Citation Benchmarking';},'desc':function(){return'Compared to {0} articles of the same age and document type';},'percentile':function(){return'percentile';}},'fwci':{'header':function(){return'Field-weighted Citation Impact';},'desc':function(){return'Average citation count in the field relative to 1';},'snowballIconTitle':function(){return'Learn more about Field-Weighted Citation Impact and Snowball Metrics';},'snowballBubbleHeader':function(){return'Field-weighted Citation Impact';},'snowballBubbleText':function(){return'Field-Weighted Citation Impact shows how the citations received by the publication compare with the world average for similar publications:';},'snowballBubbleListText1':function(){return'In the same discipline';},'snowballBubbleListText2':function(){return'Of the same age';},'snowballBubbleListText3':function(){return'Of the same publication-type';},'snowballBubbleAddlText':function(){return'An average publication has a Field-Weighted Citation Impact of 1.';}}},'content':{}},'scholarlyActivity':{'title':function(){return'Scholarly Activity';},'subTitle':function(){return'Mendeley, CiteULike, etc.';},'nameTitle':function(){return'';},'snowballIconTitle':function(){return'Learn more about Scholarly Activity and Snowball Metrics';},'snowballMetrics':function(){return'About Snowball Metrics';},'snowballMetricsTitle':function(){return'Learn more about Snowbal Metrics';},'sources1':function(){return'{0} readers from 2 sources';},'sources2':function(){return'Indirect measurement of activity by people using scholarly platforms such as Mendeley, and CiteULike.';},'headingSnowBubbleIconTitle':function(){return'View the Snowball Metric Website (opens in a new window)';},'headingSnowBubbleText2':function(){return'Scholarly activity shows the number of times that a publication has been posted in online tools that are typically used by academic scholars, such as Mendeley, and CiteULike.';},'headingSnowBubbleText3':function(){return'Metrics displaying this icon are compiled according to';},'headingSnowBubbleText4':function(){return'Snowball Metrics';},'headingSnowBubbleText5':function(){return', a collaboration between industry and academia.';},'headingSnowBubbleText6':function(){return'Learn more';},'headingSnowBubbleText7':function(){return'about article metrics in Scopus.';},'headingSnowBubbleHelpTitle':function(){return'View Scopus help file (opens in a new window)';},'content':{}},'scholarlyCommentary':{'title':function(){return'Scholarly commentary';},'subTitle':function(){return'Blogs, Reviews, Wikipedia, etc.';},'nameTitle':function(){return'';},'scholCommSnowBubbleText2':function(){return'Scholarly Commentary shows the number of times a publication has been commented on in online tools typically used by academic scholars, such as blogs and Faculty of 1000 reviews.';},'scholCommCaptionText':function(){return'Mentions in scientific blogs, websites and publications';},'postTitleText':function(){return'Link to post (Opens in a new window)';},'viewAllText':function(){return'View all Scholarly Commentary';},'snowballIconTitle':function(){return'Learn more about Scholarly Commentary and Snowball Metrics';},'content':{}},'massMedia':{'title':function(){return'Mass Media';},'subTitle':function(){return'';},'nameTitle':function(){return'';},'content':{}},'socialActivity':{'title':function(){return'Social Activity';},'subTitle':function(){return'Twitter, Facebook, etc.';},'nameTitle':function(){return'';},'snowballIconTitle':function(){return'Learn more about Social Activity and Snowball Metrics';},'snowballMetrics':function(){return'About Snowball Metrics';},'snowballMetricsTitle':function(){return'Learn more about Snowbal Metrics';},'headingSnowBubbleIconTitle':function(){return'View the Snowball Metric Website (opens in a new window)';},'headingSnowBubbleText2':function(){return'Social activity shows the number of times a publication has stimulated a social media post on platforms used by the general public, such as in Twitter, Facebook, and delicio.us.';},'sources1':function(){return'{0} Mentions from 3 sources';},'sources2':function(){return'Mentions characterized by rapid, brief engagement on platforms used by the general population, such as Twitter, Facebook and Google +.';},'content':{}}}},data:{}};$.fn.altMetric.localizedLabel=function(){var altmedLabel=$(window['altMetric']);if(altmedLabel.length){return altMetric.labels;}else{return $.fn.altMetric.defaults.labels;}};$.fn.altMetric.mendeleyExportOpen=function(event){event.preventDefault();var container=$('#altmetricCnt');var eid=$(container).attr('data-eid');window.location='/onclick/mendeleyexport.uri?eid='+eid
+'&pageUrl='+encodeURIComponent(window.location);};$.fn.altMetric.tabKeys=[];$.fn.altMetric.getDynamicBubbleContent=function(param){var headingsnowBallBubbleText2Obj=jQuery("<span>",{'class':"altmet_snowBallBubble_dynamicText","html":param.dynamicSnowBubbleText});var massMediadynamicTextObj=jQuery("<span>",{'id':"dynamicTextContainer-"+param.secion,'class':'dynamicTextContainer'});if(param.title!==undefined){var headingsnowBallBubbleText1Obj=jQuery("<span>",{'class':"altmet_snowBallBubble_dynamicHeader","text":param.title()});return massMediadynamicTextObj.append(headingsnowBallBubbleText1Obj).append(headingsnowBallBubbleText2Obj);}else{return massMediadynamicTextObj.append(headingsnowBallBubbleText2Obj);}};$.fn.altMetric.drawHeader=function(options){var headerObj=$("<h2>",{"text":options.labels.common.pageHeading()});var headerContainerObj=$("<div>",{'class':"altmet_mainHeading"});headerContainerObj.append(headerObj);options.container.append(headerContainerObj);var helpIcon=$('<a>',{'class':"metric_help_icon",'href':"#",'data-helpindex':$.fn.altMetric.helpPageIds.overview,'title':options.labels.common.help.tooltip(options.labels.tabs.overview.title())});$(helpIcon).on("click",$.fn.altMetric.helper.changeHelpLink);headerContainerObj.append(helpIcon);var emailLink=$("<a>",{'href':'#email','class':'altmet_email icon','title':options.labels.common.emailTitle(),'text':options.labels.common.email(),'aria-haspopup':"true",'id':'pubEmail'});headerContainerObj.append(emailLink);options.emailLinkObj=emailLink;options.emailZone="emailIcon";if(options.isPreview===true){emailLink.addClass("previewDisable");emailLink.addClass("altmet_emailDisabled");emailLink.removeClass("altmet_email");}
emailLink.off("click.email").on("click.email",{'options':options},$.fn.altMetric.email);};$.fn.altMetric.drawContent=function(options){var contentObj=$("<div>",{'class':'altmet_content'});var tabObj=$("<div>",{'class':'altmet_tabWraper'});contentObj.append(tabObj);options.container.append(contentObj);};$.fn.altMetric.drawGreyContent=function(options){var articleData=options.data.articleData;var contentObj=$("div.altmet_content");var descObj=$("<div>",{'class':"altmet_article"});contentObj.prepend(descObj);var artTitleObj=$("<div>",{'class':"altmet_artTitle"});descObj.append(artTitleObj);var artTitle=$("<h3>",{'text':articleData.title,'title':articleData.title});artTitleObj.append(artTitle);var backTitle=options.labels.common.backToArticleLinkTitle();var originParam='&origin='
+options.externalConfigurations.backToArticleLinkOrigin;var backToArticleLinkUrl=(options.externalConfigurations.backToArticleURL)
+originParam;var backLink=$("<a>",{'href':backToArticleLinkUrl,'title':backTitle,'text':options.labels.common.backToArticleLink()});artTitleObj.append(backLink);if(options.notInISSNListPreview===false){backLink.remove();}
var authorListObj=$("<div>",{'class':"altmet_authorList"});var artVolObj=$("<div>",{'class':"altmet_artVol"});descObj.append(authorListObj).append(artVolObj);if(articleData.hasOwnProperty('authors')&&articleData.authors.length){var authorCount=articleData.authors.length;$.each(articleData.authors,function(index,authorName){var authorObj=$("<span>");if(index===(authorCount-1)||index<4){authorObj.text(authorName.replace(/,/g,''));if(index<4&&index!==(authorCount-1)){authorObj.append(', ');}}else if(index===4){authorObj.text("(...), ");}else{authorObj='';}
authorListObj.append(authorObj);});}
if(articleData.hasOwnProperty("year")&&articleData.year!==""){var artDateSpan=$("<span class='year'>");artDateSpan.text('(').append(articleData.year).append(') ');artVolObj.append(artDateSpan);}
if(articleData.hasOwnProperty("sourceTitle")&&articleData.sourceTitle!==""){var srcTitleSpan=$("<span class='sourceTitle'>").append(articleData.sourceTitle).append(', ');artVolObj.append(srcTitleSpan);}
if(articleData.hasOwnProperty("volume")&&articleData.volume!==""){var artVolSpan=$("<span class='volume'>").append(articleData.volume);if(!articleData.hasOwnProperty("issue")||articleData.issue===""){artVolSpan.append(', ');}
artVolObj.append(artVolSpan);}
if(articleData.hasOwnProperty("issue")&&articleData.issue!==""){var artIssueSpan=$("<span class='issue'>").append('(').append(articleData.issue).append(')').append(', ');artVolObj.append(artIssueSpan);}
if(articleData.hasOwnProperty("articleNo")&&articleData.articleNo!==""){var artNoObj=$("<span class='articleNo'>").append(options.labels.common.articleNo());artNoObj.append("&nbsp;").append(articleData.articleNo).append(', ');artVolObj.append(artNoObj);}
if(articleData.hasOwnProperty("pageRange")&&articleData.pageRange!==""){var pageRangeSpan=$("<span class='pageRange'>").append(options.labels.common.pageRange()).append("&nbsp;").append(articleData.pageRange);artVolObj.append(pageRangeSpan);}};$.fn.altMetric.helper.providedByText=function(options){var selectAnchorTitle=options.labels.tabs.providedByTitle();var selectAnchor=['<a href="#providedBy" onClick="$.fn.altMetric.bubble.showLearnMore(event);" title="',selectAnchorTitle,'">'];var altmetricLink=["<a href='../../https@altmetric.com/default.htm' title='",options.labels.tabs.overview.cards.poweredByTitle(),"' target='_blank'>"];var providedByTxt=options.labels.tabs.providedBy(selectAnchor.join(''),altmetricLink.join(''),'</a>','</a>');var providedByObj=$('<div>',{'class':'altmet_providedBy','html':providedByTxt});options.objDivTabCnt.append(providedByObj);};$.fn.altMetric.drawTabs=function(options){var data=options.labels.tabs;var configurations=options.configurations;var containerObj=$(".altmet_tabWraper");var tabObj=$("<div>",{'id':'tabs'});containerObj.append(tabObj);tabObj.addClass("altmet_tabs");var objUL=$('<ul>',{'role':'tablist'});var objDivTabCnt=$('<div>',{'class':'altmet_tabContetContainer'});tabObj.append(objUL);tabObj.append(objDivTabCnt);var defaultTab="";var selectedIndex=0;var index=0;$.each(configurations,function(key,keyValue){if(options.notInISSNListPreview===true&&(key==="scholarlyCommentary"||key==="socialActivity")){return false;}
var configValue=keyValue;var value=data[key];var objLI=$('<li>',{'id':key+'Tab','role':'tab'});objUL.append(objLI);var aObj=$('<a>',{'href':'#'+key,'id':'a'+key,'data-id':key,'title':value.title(),'role':'presentation','text':value.title()});objLI.append(aObj);if(value.subTitle!==""){var subObj=$('<div>',{'class':'altmet_sub','text':value.subTitle});}
aObj.append(subObj);var tabContentContainer=$('<div>',{'id':key});objDivTabCnt.append(tabContentContainer);if(configValue.hasOwnProperty("isDefault")&&configValue.isDefault){defaultTab=key;selectedIndex=index;options.tabUI={};options.tabUI["newPanel"]=tabContentContainer;}
index++;});options.objDivTabCnt=objDivTabCnt;$.fn.altMetric.helper.providedByText(options);$.fn.altMetric.tabs=$(tabObj).data({"options":options}).tabs({"beforeActivate":$.fn.altMetric.buildTab,"active":selectedIndex,"activate":$.fn.altMetric.tabLoad});objUL.find("li").attr("tabindex",0);objUL.find("li a").attr("tabindex",-1);if(defaultTab!==""){$.fn.altMetric.buildTabContent(options,defaultTab);}
tabObj.append($.fn.handleBrowserButtons);};$.fn.altMetric.buildTab=function(event,ui){var tabObj=$(".altmet_tabs");var options=tabObj.data("options");options.tabUI=ui;var selectedTab=ui.newPanel.attr('id');$.fn.altMetric.buildTabContent(options,selectedTab);};$.fn.altMetric.buildTabContent=function(options,selectedTab){$.fn.altMetric.helper.removeWeibo(options);switch(true){case("overview"===selectedTab):if(typeof options.tabUI.oldPanel!=='undefined'){$.fn.altMetric.addKeyevent(options.data.eid,options.tabUI.oldPanel.attr('id'),options.tabUI.newPanel.attr('id'));}
$.fn.altMetric.buildOverviewTab(options);$(".metric_help_icon").attr("data-helpindex",$.fn.altMetric.helpPageIds.overview);$(".metric_help_icon").prop("title",options.labels.common.help.tooltip(options.labels.tabs.overview.title()));break;case("citations"===selectedTab):$.fn.altMetric.addKeyevent(options.data.eid,options.tabUI.oldPanel.attr('id'),options.tabUI.newPanel.attr('id'));$.fn.altMetric.buildCitationsTab(options);$(".metric_help_icon").attr("data-helpindex",$.fn.altMetric.helpPageIds.citations);$(".metric_help_icon").prop("title",options.labels.common.help.tooltip(options.labels.tabs.citations.title()));break;case("scholarlyActivity"===selectedTab):$.fn.altMetric.addKeyevent(options.data.eid,options.tabUI.oldPanel.attr('id'),options.tabUI.newPanel.attr('id'));$.fn.altMetric.buildTab.buildScholarlyActivityTab(options);$(".metric_help_icon").attr("data-helpindex",$.fn.altMetric.helpPageIds.scholarlyActivity);$(".metric_help_icon").prop("title",options.labels.common.help.tooltip(options.labels.tabs.scholarlyActivity.title()));break;case("scholarlyCommentary"===selectedTab):$.fn.altMetric.addKeyevent(options.data.eid,options.tabUI.oldPanel.attr('id'),options.tabUI.newPanel.attr('id'));$.fn.altMetric.buildScholarlyCommentaryTab(options);$(".metric_help_icon").attr("data-helpindex",$.fn.altMetric.helpPageIds.scholarlyCommentary);$(".metric_help_icon").prop("title",options.labels.common.help.tooltip(options.labels.tabs.scholarlyCommentary.title()));break;case("massMedia"===selectedTab):$.fn.altMetric.addKeyevent(options.data.eid,options.tabUI.oldPanel.attr('id'),options.tabUI.newPanel.attr('id'));$.fn.altMetric.buildMassMediaTab(options);$(".metric_help_icon").attr("data-helpindex",$.fn.altMetric.helpPageIds.massMedia);$(".metric_help_icon").prop("title",options.labels.common.help.tooltip(options.labels.tabs.massMedia.title()));break;case("socialActivity"===selectedTab):$.fn.altMetric.addKeyevent(options.data.eid,options.tabUI.oldPanel.attr('id'),options.tabUI.newPanel.attr('id'));$.fn.altMetric.buildSocialActivityTab(options);$(".metric_help_icon").attr("data-helpindex",$.fn.altMetric.helpPageIds.socialActivity);$(".metric_help_icon").prop("title",options.labels.common.help.tooltip(options.labels.tabs.socialActivity.title()));break;default:if(typeof console!=="undefined"){console.log("Click on an invalid tab - "+selectedTab);}}};$.fn.altMetric.tabLoad=function(event,ui){var selectedTab=ui.newPanel.attr('id');if("scholarlyActivity"===selectedTab&&typeof $.fn.altMetric.scholarlyActivityMap!=="undefined"){$($.fn.altMetric.scholarlyActivityMap[0]).highcharts().reflow();}else if("socialActivity"===selectedTab&&typeof $.fn.altMetric.socialActivityMap!=="undefined"){$($.fn.altMetric.socialActivityMap[0]).highcharts().reflow();}else if("citations"===selectedTab){$(ui.newPanel).find(".altmet_card.citationBenchMark .altmet_cardCountDesc").each(function(index,obj){if($(obj).height()>30){$(obj).addClass('txtSmaller');};});}};$.fn.altMetric.tabContentHeader=function(params){var returnObj;var headerContent=$("<div>",{'class':"altmet_tab_heading"});var headerObj=$("<h3>",{"html":params.content});headerContent.append(headerObj);if(params.hasOwnProperty('hasSnowFlakes')&&params.hasSnowFlakes){var headerContainerObj=$("<div>",{'class':"altmet_headerContent"});var snowFlakes=$('<span>',{'id':'heading'+params.source+'BubbleContainer'});var snowFlakesIcon=$('<a>',{'id':'altmet'+params.source+'heading','aria-haspopup':'true','class':'altmet_heading_snow','href':'#'+params.source+'SnowBall','title':params.snowballIconTitle()});snowFlakes.append(snowFlakesIcon);headerContainerObj.append(snowFlakes).append(headerContent);returnObj=headerContainerObj;params.container.append(headerContainerObj);var bubbleParams={'dynamicTextObj':params.dynamicTextObj,'bubblePosition':'positionLeft','targetElement':snowFlakes,'bubbleDataTarget':'altmet'+params.source+'heading'};options={params:bubbleParams,labels:params.labels};$.fn.altMetric.bubble.addBubbleContent(options);}else{returnObj=headerContent;params.container.append(headerContent);}
return returnObj;};$.fn.altMetric.buildOverviewTab=function(options){var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};if(!$.fn.altMetric.buildOverviewTab.hasOwnProperty("isTabDrawn")){var tabContainer=options.tabUI.newPanel;var tabContent=$('<div>',{'class':"altmet_panelContent"});tabContainer.append(tabContent);var overviewHeader=$('<div>',{'class':"altmet_overviewtab_innerheader altmet_overview_header"});$.fn.altMetric.tabContentHeader({'container':overviewHeader,'content':options.labels.tabs.overview.title});var contentRow1=$('<div>',{'class':"altmet_cardContainer altmet_overview"});var engagementHeader=$('<div>',{'class':"altmet_overviewtab_innerheader altmet_engagement_Header"});$.fn.altMetric.tabContentHeader({'container':engagementHeader,'content':options.labels.tabs.overview.heading2()});var contentRow2=$('<div>',{'class':"altmet_engagement"});tabContent.append(overviewHeader);options.params={'container':tabContent,'section':'overview'};$.fn.altMetric.aboutSnowBall(options);tabContent.append(contentRow1);options.cardContainer=contentRow1;$.fn.altMetric.buildOverviewTab.buildCards(options);if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('pcr');}
var counts=altMetricData.counts;var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var data=$.fn.altMetric.helper.getKeys(buckets);if(data.length>0){tabContent.append(engagementHeader).append(contentRow2);options.engageData=data;var engageLayout=$('<div>',{'class':"altmet_container"});contentRow2.append(engageLayout);options.layout=engageLayout;$.fn.altMetric.buildOverviewTab.createEngagementHighlights(options);}else{$.fn.altMetric.helper.hideTab(2);$.fn.altMetric.helper.hideTab(3);$.fn.altMetric.helper.hideTab(4);$.fn.altMetric.helper.hideTab(5);}
$.fn.altMetric.buildOverviewTab.isTabDrawn=true;if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_overview');}}};$.fn.altMetric.buildOverviewTab.createEngagementHighlights=function(options){var layout=options.layout;var data=options.engageData;var engOrder=['scholar_activity','social_activity','scholar_commentary','mass_media'];var tabOrder=['scholar_activity','scholar_commentary','mass_media','social_activity'];var bucketArray=[];var engItems=$('<div>',{'class':"almet_Items"});layout.append(engItems);$.each(data,function(index,item){var itemContainer=$('<div>',{'class':"altmet_enghigh"});var orderIndex=engOrder.indexOf(item);if(orderIndex!==-1){bucketArray[orderIndex]=itemContainer;}
if(bucketArray.length){var orderedItems=$.map(bucketArray,function(n){if(typeof n!=='undefined'){return n;}});engItems.append(orderedItems);}
if(item==='scholar_activity'){options.scholarlyactcontainer=itemContainer;$.fn.altMetric.buildOverviewTab.drawscholarlyactivity(options);}
if(item==="social_activity"&&options.notInISSNListPreview!==true){options.socialActObj=itemContainer;$.fn.altMetric.buildOverviewTab.drawSocialActivity(options);}
if(item==="scholar_commentary"&&options.notInISSNListPreview!==true){options.engScholComm=itemContainer;$.fn.altMetric.buildOverviewTab.drawScholCommentary(options);}
if(item==="mass_media"&&options.notInISSNListPreview!==true){options.engMassMedia=itemContainer;$.fn.altMetric.buildOverviewTab.drawMassMedia(options);}});engItems.find('.altmet_enghigh:even').addClass('even');engItems.find('.altmet_enghigh:odd').addClass('odd');jQuery.grep(tabOrder,function(el){if(jQuery.inArray(el,data)===-1){$.fn.altMetric.helper.hideTab(jQuery.inArray(el,tabOrder)+2);}});};$.fn.altMetric.buildOverviewTab.buildCards=function(options){var cardContainer=options.cardContainer;var articleData=options.data.articleData;var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:[];var metrics=options.data.altMetricData.metrics;var citationCardRow=$('<div>',{'class':"altmet_cardRow altmet_largeCard"});var smallCardRow=$('<div>',{'class':"altmet_cardRow"});cardContainer.append(citationCardRow).append(smallCardRow);if(articleData.hasOwnProperty('citedbyCount')){var isAnchor=false;if((articleData.citedbyCount)>0){isAnchor=true;}else{$.fn.altMetric.helper.hideTab(1);}
var citationcardSnowBallBubbleContainerObj=$('<span>',{'id':'citationSnowBallBubbleContainer','html':'<a id="citationcard_SnowBall_icon" aria-haspopup="true" class="altmet_heading_snow" title="'
+options.labels.tabs.overview.cards.citation.snowballIconTitle()
+'" href="#"></a>'});var citationCard=$.fn.altMetric.helper.drawCards({source:"citation",count:articleData.citedbyCount,container:citationCardRow,cards:0,header:options.labels.tabs.overview.citationcardheader(),countDesc:options.labels.tabs.overview.citationcardcountdesc(),'isAnchor':isAnchor});citationCard.addClass('citationCard').attr("title",options.labels.tabs.overview.cards.citation.title());if(!isAnchor){citationCard.addClass('citationCard').removeAttr("title");}
citationCard.on('click.citationcard',function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':1});});citationCardRow.append(citationcardSnowBallBubbleContainerObj);var dynParams={'section':'overviewCitationCard','title':options.labels.tabs.overview.citationcardheader,'dynamicSnowBubbleText':options.labels.tabs.overview.cards.citation.snowballBubbleText};var citaionCarddynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':citaionCarddynamicTextObj,'bubblePosition':'positionRightLeft','targetElement':citationcardSnowBallBubbleContainerObj,'bubbleDataTarget':"citationcard_SnowBall_icon"};options.params=params;$.fn.altMetric.bubble.addBubbleContent(options);}else{$.fn.altMetric.helper.hideTab(1);}
if(metrics.hasOwnProperty('fwci')){var snowBallContainer1=$('<span>',{'id':'fwciSnowBall1Container','html':'<a id="fwcicard_SnowBall_icon" aria-haspopup="true" class="altmet_card_snow" title="'
+options.labels.tabs.overview.cards.fwci.snowballIconTitle()
+'" href="#"></a>'});var snowBallBubbleContainer=$('<span>',{'id':'fwciSnowBallBubbleContainer','style':'display: block'});var fwciCard1=$.fn.altMetric.helper.drawCards({source:'fwci',count:metrics.fwci.toFixed(2),container:citationCardRow,cards:0,header:options.labels.tabs.overview.cards.fwci.header(),'isAnchor':true});fwciCard1.addClass('fwciCard').attr("title",options.labels.tabs.overview.cards.citation.title());fwciCard1.on('click.fwciCard',function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':1});});citationCardRow.append(snowBallContainer1);var snowballBubbleHeader=$("<div>",{'class':"altmet_snowBallBubbleHeader","text":options.labels.tabs.overview.cards.fwci.snowballBubbleHeader()});var snowballBubbleText=$("<span>",{'class':"altmet_snowBallBubbleText","text":options.labels.tabs.overview.cards.fwci.snowballBubbleText()});var objUL=$('<ul>',{'class':"altmet_snowBallBubbleText altmet_snowBallBubbleListText"});var objLI1=$('<li>',{'text':options.labels.tabs.overview.cards.fwci.snowballBubbleListText1()});objUL.append(objLI1);var objLI2=$('<li>',{'text':options.labels.tabs.overview.cards.fwci.snowballBubbleListText2()});objUL.append(objLI2);var objLI3=$('<li>',{'text':options.labels.tabs.overview.cards.fwci.snowballBubbleListText3()});objUL.append(objLI3);var snowballBubbleAddlText=$("<span>",{'class':"altmet_snowBallBubbleText","text":options.labels.tabs.overview.cards.fwci.snowballBubbleAddlText()});snowBallBubbleContainer.append(snowballBubbleHeader).append(snowballBubbleText).append(objUL).append(snowballBubbleAddlText);params={'dynamicTextObj':snowBallBubbleContainer,'bubblePosition':'positionRightLeft','targetElement':snowBallContainer1,'bubbleDataTarget':"fwcicard_SnowBall_icon"};options.params=params;$.fn.altMetric.bubble.addBubbleContent(options);}
var percentiles=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var contextForScore=percentiles.length>0&&percentiles[0].hasOwnProperty('context_for_score')?percentiles[0].context_for_score:{};var citBenchMark=contextForScore.hasOwnProperty('citations')?contextForScore.citations:0;var benchmarkType=percentiles.length>0&&percentiles[0].hasOwnProperty('benchmark_type')?percentiles[0].benchmark_type:'';var compareType=percentiles.length>0&&percentiles[0].hasOwnProperty('subject_description')?percentiles[0].subject_description:'';var countDesc=benchmarkType==='doctype'?options.labels.tabs.overview.cards.citationBenchMark.docDesc(compareType):options.labels.tabs.overview.cards.citationBenchMark.articleDesc(compareType);var countText;if(citBenchMark>0){countText=['<span class="altmet_citBMCntTxt">',$.fn.altMetric.helper.ordinalSuffix(citBenchMark),' ',options.labels.tabs.overview.cards.citationBenchMark.percentile(),'</span>'];}else{countText=['<span class="altmet_insuffDataTxt">',options.labels.tabs.scholarlyActivity.progressbar.insuffDataText(),'</span>'];}
var card=$.fn.altMetric.helper.drawCards({source:"citationBenchMark",count:citBenchMark,container:citationCardRow,cards:0,header:options.labels.tabs.overview.citationbenchmarkcardheader(),countDesc:countDesc,'isAnchor':true});var progressbarContainer=$('<div>',{'class':"altmet_progressbarContainer citationBenchMark"});$.fn.altMetric.helper.demoProgressBar(progressbarContainer,citBenchMark);card.find(".altmet_cardCount").html(countText.join('')).after(progressbarContainer);card.attr("title",options.labels.tabs.overview.cards.citation.title());card.on('click.citationcard',function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':1});});var citationBenchmarkingHelpIcon=$("<span>",{"id":"citationBenchmarkingHelpIconBubbleContainer",'html':'<a id="citation_help_icon_bubbleContainar"  aria-haspopup="true" class= "citation_helpIcon" title="'
+options.labels.tabs.overview.benchmark.icontooltiptext()+'"href="#"></a>'});var citationBenchMarkingSnowBallBubbleContainer=$('<span>',{'id':'citationBenchMarkingSnowBallBubbleContainer ','style':'display: block'});citationCardRow.children('.citationBenchMark').append(citationBenchmarkingHelpIcon);var citationBenchBubbleHeader=$("<div>",{'class':"altmet_citation_HelpIconText","text":options.labels.tabs.overview.citationbenchmarkcardheader()});var citationBenchmarkDynamicText=$('<span>',{'class':"altmet_citation_helpIcon",'text':options.labels.tabs.citations.benchmarkBubble()});var objUl=$('<ul>',{'class':"altmet_citation_helpIcon altmet_snowBallBubbleListText "});var objLi1=$('<li>',{'text':options.labels.tabs.citations.benchmarkBubble1()});objUl.append(objLi1);var objLi2=$('<li>',{'text':options.labels.tabs.citations.benchmarkBubble2()});objUl.append(objLi2);var objLi3=$('<li>',{'text':options.labels.tabs.citations.benchmarkBubble3()});objUl.append(objLi3);var citationDynamicText1=$('<span>',{'class':"altmet_citation_helpIcon",'text':options.labels.tabs.citations.benchmarkBubble4()});citationBenchMarkingSnowBallBubbleContainer.append(citationBenchBubbleHeader).append(citationBenchmarkDynamicText).append(objUl).append(citationDynamicText1);var params={'dynamicTextObj':citationBenchMarkingSnowBallBubbleContainer,'bubblePosition':'positionRightLeft','targetElement':citationBenchmarkingHelpIcon,'bubbleDataTarget':"citation_help_icon_bubbleContainar"};options.params=params;$.fn.altMetric.bubble.addBubbleContentWithoutSnow(options);$('#citationBenchmarkingHelpIconBubbleContainer').on('click',function(e){e.stopPropagation();});$(card).find(".altmet_cardCountDesc").each(function(index,obj){if($(obj).height()>30){$(obj).addClass('txtSmaller');};});options.smallCardContainer=smallCardRow;$.fn.altMetric.buildOverviewTab.buildCards.drawSmallCards(options);};$.fn.altMetric.helper.getdata=function(options){var results={"counts":options.data.altMetricData.counts};results.buckets=results.counts.hasOwnProperty("buckets")?results.counts.buckets:{};results.discipline=results.counts.hasOwnProperty("discipline")?results.counts.discipline:{};results.sources=results.counts.hasOwnProperty("sources")?results.counts.sources:{};results.status=results.counts.hasOwnProperty("status")?results.counts.status:{};results.scholarActivity=results.buckets.hasOwnProperty("scholar_activity")?results.buckets.scholar_activity:{};results.mendeleyCount=(results.scholarActivity.hasOwnProperty("break_down")&&results.scholarActivity.break_down.hasOwnProperty("mendeley"))?results.scholarActivity.break_down.mendeley:0;results.scoActciteulikeCount=(results.scholarActivity.hasOwnProperty("break_down")&&results.scholarActivity.break_down.hasOwnProperty("citeulike"))?results.scholarActivity.break_down.citeulike:0;results.scoActTotalCount=(!$.isEmptyObject(results.scholarActivity)&&results.scholarActivity.hasOwnProperty("total"))?results.scholarActivity.total:0;return results;};$.fn.altMetric.buildOverviewTab.drawscholarlyactivity=function(options){var results=$.fn.altMetric.helper.getdata(options);var buckets=results.buckets,discipline=results.discipline,sources=results.sources,status=results.status,scholarActivity=results.scholarActivity,mendeleyCount=results.mendeleyCount,scoActciteulikeCount=results.scoActciteulikeCount,scoActTotalCount=results.scoActTotalCount,mendeleyCount=results.mendeleyCount;var schActContainer=options.scholarlyactcontainer;var scoActHeader=$('<h4>',{'html':options.labels.tabs.scholarlyActivity.title()});var sourcesCount=scholarActivity.hasOwnProperty('break_down')?$.fn.altMetric.helper.getKeys(options.data.altMetricData.counts.buckets.scholar_activity.break_down).length:0;var headText='<span id="scoactivityBubbleContainer"><a id="scoactivity_heading_icon" aria-haspopup="true" class="altmet_heading_snow" title="'
+options.labels.tabs.scholarlyActivity.snowballIconTitle()
+'" href="#"></a></span>';var scoActHeading=$('<div>',{'class':"altmet_overview_subHeading",'html':headText});scoActHeading.append(scoActHeader);schActContainer.append(scoActHeading);var subTitle=$.fn.altMetric.helper.getReaderSource(scoActTotalCount,sourcesCount,options);if(options.notInISSNListPreview===true&&scoActciteulikeCount>0){subTitle=$.fn.altMetric.helper.getReaderSource(mendeleyCount,1,options);}
var count=$('<span>',{'class':"altmet_overview_count",'text':" - "+subTitle});options.scoActBubbleWraper=scoActHeading;$.fn.altMetric.buildOverviewTab.drawscholarlyactivity.addBubbleContent(options);scoActHeading.append(count);var schActDetContainer=$('<div>',{'class':"altmet_detail_caption"});var scoActCaption=$('<div>',{'class':"altmet_overview_caption",'text':options.labels.tabs.overview.scholarlyActivity.subHeading()});schActDetContainer.append(scoActCaption);schActContainer.append(schActDetContainer);var mendeleyContainer=$('<div>',{'class':"altmet_detail_caption almet_mendeley_caption",'id':"overview_mendeley_cont"});var mendeleyImagecont='<span class="scoact_mendeley" title="Information from Mendeley"><span class="hidden-label">InformationfromMendeley</span></span>';mendeleyContainer.append(mendeleyImagecont);var mendeleyListCont=$("<ul>",{'class':'overview_mendeley_list'});if(mendeleyCount>0){var singular=options.labels.tabs.overview.scholarlyActivity.mendeleyCountText2(mendeleyCount);var plural=options.labels.tabs.overview.scholarlyActivity.mendeleyCountText1(mendeleyCount);var mendContainerList=$("<li>",{});var mendeleyCountleftCont=$('<span>',{'text':options.labels.tabs.overview.scholarlyActivity.mendeleyText()});var mendeleyListRightCont=$('<span>',{'text':$.fn.altMetric.helper.getSingularPlural(mendeleyCount,singular,plural)});mendContainerList.append(mendeleyCountleftCont);mendContainerList.append(mendeleyListRightCont);mendeleyListCont.append(mendContainerList);}else{var containerList0=$("<li>",{});var mendeleyListleftCont0=$('<span>',{'text':options.labels.tabs.overview.scholarlyActivity.zeroMendTxt(),'class':'saveMendeleyTextCont'});containerList0.append(mendeleyListleftCont0);mendeleyListCont.append(containerList0);}
if(mendeleyCount>0){var disciplineList=discipline.hasOwnProperty("mendeley")?discipline.mendeley:{};var mendCount=sources.hasOwnProperty("mendeley")?sources.mendeley:0;var sortList=$.fn.altMetric.helper.sortByDesc(disciplineList,mendCount,false);var topDisSortData=(sortList[0]!==undefined&&sortList[0].hasOwnProperty("demoGraphData"))?sortList[0].demoGraphData:"";if(topDisSortData!==""){var containerList1=$("<li>",{});var mendeleyDisSortLeftCont=$('<span>',{'text':options.labels.tabs.overview.scholarlyActivity.disciplineText()});var mendeleyDisSortCont=$('<span>',{'class':"mendeleyRightList",'text':topDisSortData.replace(/_/g,' ')});containerList1.append(mendeleyDisSortLeftCont);containerList1.append(mendeleyDisSortCont);}
mendeleyListCont.append(containerList1);var statusList=status.hasOwnProperty("mendeley")?status.mendeley:{};sortList=$.fn.altMetric.helper.sortByDesc(statusList,mendCount,false);var topDemoSortData=(sortList[0]!==undefined&&sortList[0].hasOwnProperty("demoGraphData"))?sortList[0].demoGraphData:"";if(topDemoSortData!==""){var containerListempt=$("<li>",{});var mendeleyDemoleftCont=$('<span>',{'text':options.labels.tabs.overview.scholarlyActivity.demographText()});var mendeleyDemoRightCont=$('<span>',{'class':"mendeleyRightList",'text':topDemoSortData.replace(/_/g,' ')});containerListempt.append(mendeleyDemoleftCont);containerListempt.append(mendeleyDemoRightCont);mendeleyListCont.append(containerListempt);}}
var containerList=$("<li>",{});if($('#addToMendeleyEnabled').length>0){var mendeleySaveMendLink=$('<a>',{'title':options.labels.tabs.overview.scholarlyActivity.mendeleyLinkToolTxt(),'text':options.labels.tabs.overview.scholarlyActivity.MendeleyLink(),'href':'#saveToMendely'});mendeleySaveMendLink.on('click',function(event){$.fn.altMetric.mendeleyExportOpen(event);});if(options.isPreview===true){mendeleySaveMendLink.addClass("previewDisable");}
containerList.append(mendeleySaveMendLink);}
mendeleyListCont.append(containerList);mendeleyContainer.append(mendeleyListCont);schActContainer.append(mendeleyContainer);if(scoActciteulikeCount>0){var singular=options.labels.tabs.overview.scholarlyActivity.citeulikeCountText2(scoActciteulikeCount);var plural=options.labels.tabs.overview.scholarlyActivity.citeulikeCountText1(scoActciteulikeCount);var citeuContainer=$('<div>',{'class':"overview_citeulike"});var citeulikeImagecont='<span title="Information from CiteULike" class="scoact_citeulike"><span class="hidden-label">InformationfromCiteULike</span></span>';var citeulikeListCont=$("<ul>",{'class':'overview_citeulike_list'});var citecontList=$("<li>",{'class':'altmet_demoData1'});var citeulikeListleftCont=$('<span>',{'text':options.labels.tabs.overview.scholarlyActivity.citeulikeText()});var citeulikeListRightCont=$('<span>',{'text':$.fn.altMetric.helper.getSingularPlural(scoActciteulikeCount,singular,plural)});citecontList.append(citeulikeListleftCont);citecontList.append(citeulikeListRightCont);citeulikeListCont.append(citecontList);citeuContainer.append(citeulikeImagecont);citeuContainer.append(citeulikeListCont);schActContainer.append(citeuContainer);}
if(buckets.hasOwnProperty('scholar_activity')){var scholarActTotal=options.data.altMetricData.counts.buckets.scholar_activity.total;var scholarActText=subTitle;var altMetricData=options.data.altMetricData;var percentiles=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var contextScoreCheck=percentiles.length>0&&percentiles[0].hasOwnProperty('context_for_score')?percentiles[0].context_for_score:{};var scholarActProgressData=(!$.isEmptyObject(contextScoreCheck)&&contextScoreCheck.hasOwnProperty("scholar_activity"))?contextScoreCheck.scholar_activity:0;if(scholarActProgressData>0){var scholarActBecnchCont;if(scoActciteulikeCount>0){scholarActBecnchCont=$('<div>',{'class':'scohlar_benchMark_cont altmet_detail_caption'});}else{scholarActBecnchCont=$('<div>',{'class':'altmet_detail_caption'});}
schActContainer.append(scholarActBecnchCont);options.benchmarkContainer=scholarActBecnchCont;var progressBarDescription=options.labels.tabs.overview.scholarlyActivity.benchMarkScholarText();$.fn.altMetric.helper.benchmark(options,{socialActText:scholarActText,socActProgressData:scholarActProgressData,socialActTotal:scholarActTotal,benchIconId:"schBenchMark_help_icon",progressBarDesc:progressBarDescription});}
var linkContainer=$('<div>',{'class':"altmet_view_link altmet_detail_caption",'style':"padding-left : 28px"});var viewDetailLink=$('<a>',{'text':options.labels.tabs.overview.scholarlyActivity.viewAllText(),'href':"#viewAllSCHA",'title':options.labels.tabs.overview.scholarlyActivity.viewAllText()});$(viewDetailLink).on("click",viewDetailLink,$.fn.altMetric.buildOverviewTab.drawscholarlyactivity.viewAllScholarlyActivity);linkContainer.append(viewDetailLink);schActContainer.append(linkContainer);if(options.notInISSNListPreview===true&&scoActciteulikeCount>0){citeuContainer.remove();scholarActBecnchCont.remove();}}else{$.fn.altMetric.helper.hideTab(2);}};$.fn.altMetric.buildOverviewTab.drawscholarlyactivity.viewAllScholarlyActivity=function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':2});};$.fn.altMetric.buildOverviewTab.drawscholarlyactivity.addBubbleContent=function(options){var scoActBubbleWraper=options.scoActBubbleWraper;var headingsnowballObj=scoActBubbleWraper.find("#scoactivityBubbleContainer");var dynParams={'section':'overviewScholAct','title':options.labels.tabs.scholarlyActivity.title,'dynamicSnowBubbleText':options.labels.tabs.scholarlyActivity.headingSnowBubbleText2};var scholActdynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':scholActdynamicTextObj,'bubblePosition':'positionLeft','targetElement':headingsnowballObj,'bubbleDataTarget':"scoactivity_heading_icon"};options.params=params;$.fn.altMetric.bubble.addBubbleContent(options);};$.fn.altMetric.buildOverviewTab.buildCards.drawSmallCards=function(options){var maxCards=6;var hasOtherSourceCard=false;var massmediFlag=false;var totalCards;var defaultScholArray=['blogs','pubpeer','f1000','wikipedia','qa','youtube'];var defaultSocialArray=['twitter','facebook','googleplus','reddit','pinterest','linkedin'];if(!$.isEmptyObject(options.data.altMetricData)&&options.data.altMetricData.hasOwnProperty("counts")){var counts=options.data.altMetricData.counts;var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var sources=counts.hasOwnProperty("sources")?counts.sources:{};var massmediaitemsCount=sources.hasOwnProperty("news")?sources.news:0;var scholarActivity=buckets.hasOwnProperty("scholar_activity")?buckets.scholar_activity:{};var mendelyCount=(scholarActivity.hasOwnProperty("break_down")&&scholarActivity.break_down.hasOwnProperty("mendeley"))?scholarActivity.break_down.mendeley:0;var scholarCommentary=buckets.hasOwnProperty("scholar_commentary")?buckets.scholar_commentary:{};var scholarCommentaryBD=(!$.isEmptyObject(scholarCommentary)&&scholarCommentary.hasOwnProperty("break_down"))?scholarCommentary.break_down:{};var socialActivity=buckets.hasOwnProperty("social_activity")?buckets.social_activity:{};var socialActivityBD=(!$.isEmptyObject(socialActivity)&&socialActivity.hasOwnProperty("break_down"))?socialActivity.break_down:{};var scholarCommentaryKeys=$.isEmptyObject(scholarCommentaryBD)?[]:$.fn.altMetric.helper.getKeys(scholarCommentaryBD);var scholarCommentaryCount=scholarCommentaryKeys.length;var socialActivityKeys=$.isEmptyObject(socialActivityBD)?[]:$.fn.altMetric.helper.getKeys(socialActivityBD);var socialActivityCount=socialActivityKeys.length;scholarCommentaryKeys=$.fn.altMetric.helper.sortArrayWithArray(defaultScholArray,scholarCommentaryKeys);socialActivityKeys=$.fn.altMetric.helper.sortArrayWithArray(defaultSocialArray,socialActivityKeys);var smallCardContainer=options.smallCardContainer;if(massmediaitemsCount!==0){totalCards=scholarCommentaryCount+socialActivityCount+1;}else{totalCards=scholarCommentaryCount+socialActivityCount;}
var mendelyCardHeader=options.labels.tabs.overview.cards.mendeley.header();var massmediaCardHeader=options.labels.tabs.massMedia.title();var singular=options.labels.tabs.overview.cards.mendeley.countdesc.single();var plural=options.labels.tabs.overview.cards.mendeley.countdesc();var mendelyCardCountdesc=$.fn.altMetric.helper.getMendSingularPlural(mendelyCount,singular,plural);var massMediaSingular=options.labels.tabs.overview.massMedia.countdesc();var massMediaPlural=options.labels.tabs.overview.massMedia.countdescs();var massmediaCardCountdesc=$.fn.altMetric.helper.getSingularPlural(massmediaitemsCount,massMediaSingular,massMediaPlural);maxCards--;hasOtherSourceCard=totalCards>maxCards;var totalCardWitnMed=totalCards+1;var cardsCount=totalCardWitnMed>6?6:totalCardWitnMed<3?3:totalCardWitnMed;var menFlag=true;var hasMassMediaCard=false;if(mendelyCount===0){menFlag=false;}
options.smallCard={'source':"mendeley",'count':mendelyCount,'container':smallCardContainer,cards:cardsCount,'header':mendelyCardHeader,'countDesc':mendelyCardCountdesc,'isAnchor':menFlag};var mendeleycard=$.fn.altMetric.helper.drawCards(options.smallCard);var tabName=options.labels.tabs.overview.cards.smallCard.activity.scholar_activity();mendeleycard.addClass('citationCard').attr("title",options.labels.tabs.overview.cards.smallCard.title(mendelyCardHeader,tabName));mendeleycard.on('click.mendeleycard',function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':2});});var lastCard=mendeleycard;if(massmediaitemsCount!==0&&options.notInISSNListPreview===false){hasMassMediaCard=true;massmediFlag=true;options.massmediaCard={'source':"massmedia",'count':massmediaitemsCount,'container':smallCardContainer,cards:cardsCount,'header':massmediaCardHeader,'countDesc':massmediaCardCountdesc,'isAnchor':massmediFlag};var massmediaCard=$.fn.altMetric.helper.drawCards(options.massmediaCard);tabName=options.labels.tabs.massMedia.title();massmediaCard.addClass('citationCard').attr("title",options.labels.tabs.overview.cards.smallCard.title(massmediaCardHeader,tabName));massmediaCard.on('click.massmediaCard',function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':4});});lastCard=massmediaCard;maxCards--;}
var scholarlyCards=0;var socactCards=0;var otherSourceBubbleObj=[];options.otherSourceCard={'source':'otherCard','count':0,'container':smallCardContainer,cards:cardsCount,'header':options.labels.tabs.overview.cards.other.header(),'countDesc':options.labels.tabs.overview.cards.wikipedia.countdesc(),'sources':0,'isAnchor':true};tabName=options.labels.tabs.overview.cards.smallCard.activity.scholar_commentary();$.each(scholarCommentaryKeys,function(index,key){var value=scholarCommentaryBD[key];var smallCardProp=options.labels.tabs.overview.cards[key];var header=typeof smallCardProp!=='undefined'?smallCardProp.header():key;var otherSchCountObj,otherSchAnchorObj;if(maxCards<=1&&hasOtherSourceCard){options.otherSourceCard.count=options.otherSourceCard.count
+value;options.otherSourceCard.sources++;otherSchCountObj=$('<li>',{'class':'altmet_otherSrc_title'}).addClass(key);otherSchAnchorObj=$('<a>',{'class':'altmet_anchor','data-count':value,'title':options.labels.tabs.overview.cards.other.anchor.schTitle(value,header),'text':value+' '+header,'onclick':"$.fn.altMetric.helper.switchTab({'oldIndex':0, 'newIndex': 3});return false;"});otherSourceBubbleObj.push(otherSchCountObj.append(otherSchAnchorObj));}else if((socialActivityCount>2&&scholarlyCards===2)||(socialActivityCount===2&&scholarlyCards===3)){options.otherSourceCard.count=options.otherSourceCard.count
+value;options.otherSourceCard.sources++;otherSchCountObj=$('<li>',{'class':'altmet_otherSrc_title'}).addClass(key);otherSchAnchorObj=$('<a>',{'class':'altmet_anchor','data-count':value,'title':options.labels.tabs.overview.cards.other.anchor.schTitle(value,header),'text':value+' '+header,'onclick':"$.fn.altMetric.helper.switchTab({'oldIndex':0, 'newIndex': 3});return false;"});otherSourceBubbleObj.push(otherSchCountObj.append(otherSchAnchorObj));maxCards++;}else{var countDesc=(value>1)&&typeof smallCardProp!=='undefined'?smallCardProp.countdesc():typeof smallCardProp!=='undefined'?smallCardProp.countdesc.single():key;if(key==="qa"){if(value>1){countDesc=countDesc
+" "
+options.labels.tabs.overview.cards.qa.posts();}else{countDesc=countDesc
+" "
+options.labels.tabs.overview.cards.qa.post.singular();}
if(cardsCount===3){header=options.labels.tabs.overview.cards.qa.detailHeader();}else if(cardsCount===4){header=options.labels.tabs.overview.cards.qa.detailHeader();}}
options.smallCard={'source':key,'count':value,'container':smallCardContainer,cards:cardsCount,'header':header,'countDesc':countDesc,'isAnchor':true};var scholarCard=$.fn.altMetric.buildOverviewTab.buildCards.drawSmallCards.buildSmallCard(options);scholarCard.attr("title",options.labels.tabs.overview.cards.smallCard.title(header,tabName));scholarCard.on('click.scholarlycard',function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':3});});lastCard=scholarCard;if(options.notInISSNListPreview===true){scholarCard.remove();}
scholarlyCards++;};maxCards--;});if(maxCards>0){tabName=options.labels.tabs.overview.cards.smallCard.activity.social_activity();$.each(socialActivityKeys,function(index,key){var value=socialActivityBD[key];var smallCardProp=options.labels.tabs.overview.cards[key];var header=typeof smallCardProp!=='undefined'?smallCardProp.header():key;if(maxCards<=1&&hasOtherSourceCard){options.otherSourceCard.count=options.otherSourceCard.count
+value;options.otherSourceCard.sources++;var otherSocCountObj=$('<li>',{'class':'altmet_otherSrc_title'}).addClass(key);var otherSocAnchorObj=$('<a>',{'class':'altmet_anchor','data-count':value,'title':options.labels.tabs.overview.cards.other.anchor.soaTitle(value,header),'text':value+' '
+header,'onclick':"$.fn.altMetric.helper.switchTab({'oldIndex':0, 'newIndex': 5});return false;"});otherSourceBubbleObj.push(otherSocCountObj.append(otherSocAnchorObj));}else{var countDesc1;if(value>1){countDesc1=typeof smallCardProp!=='undefined'?smallCardProp.countdesc():key;}else{countDesc1=typeof smallCardProp!=='undefined'?smallCardProp.countdesc.single():key;}
options.smallCard={'source':key,'count':value,'container':smallCardContainer,cards:cardsCount,'header':header,'countDesc':countDesc1,'isAnchor':true};var socialCard=$.fn.altMetric.buildOverviewTab.buildCards.drawSmallCards.buildSmallCard(options);socialCard.attr("title",options.labels.tabs.overview.cards.smallCard.title(header,tabName));socialCard.on('click.socialActcard',function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':5});});lastCard=socialCard;if(options.notInISSNListPreview===true){socialCard.remove();}
socactCards++;}
maxCards--;});};if(hasOtherSourceCard){var otherSourceCount=options.otherSourceCard.sources;var otherMentionCount=options.otherSourceCard.count;if(otherSourceCount>0&&otherMentionCount>0){options.otherSourceCard.header=options.otherSourceCard.sources
+" "+options.otherSourceCard.header;lastCard=$.fn.altMetric.buildOverviewTab.buildCards.drawSmallCards.buildOtherSourceCard(options);lastCard.attr("title",options.labels.tabs.overview.cards.other.subTitle(otherMentionCount));lastCard.attr("id","altmet_otherMentions");var otherItemContainer=$("<div>",{'id':'altmet_otherMentions-data',"class":"bubble-source-data"});var otherSrcTxt=$('<span>',{'class':'altmet_additionalSourcesTxt','text':options.labels.tabs.overview.cards.other.header()});var popupText=['<span class="altmet_addlMen_txt">',otherMentionCount,'&nbsp;',options.labels.recordpage.sidebar.otherSource.text(otherSourceCount,''),'</span>'];otherSrcTxt.append(popupText.join(''));otherSourceBubbleObj.sort(function(i,j){var count1=i.find('a').attr('data-count');var count2=j.find('a').attr('data-count');return count2-count1;});if(otherSourceBubbleObj.length){var otherSourceObj=$.map(otherSourceBubbleObj,function(n){if(typeof n!=='undefined'){return n;}});}
var otherItemObj=$('<ul>',{'class':'altmet_otherSource_list'}).append(otherSourceObj);otherSrcTxt.append(otherItemObj);otherItemContainer.append(otherSrcTxt);$('#altmet_otherMentions').append(otherItemContainer);$('#altmet_otherMentions').unbind("click.addnlsrcBubble").bind("click.addnlsrcBubble",{position:Bubble['positionLeft']},Bubble.showBubble);$('.altmet_cards6').bind("mouseleave",{'elementId':"altmet_otherMentions"},$.fn.altMetric.bubble.hideBubble);}};lastCard.addClass('lastCard');if(options.notInISSNListPreview===true){lastCard.remove();}};};$.fn.altMetric.buildOverviewTab.buildCards.drawSmallCards.buildSmallCard=function(options){return $.fn.altMetric.helper.drawCards(options.smallCard);};$.fn.altMetric.buildOverviewTab.buildCards.drawSmallCards.buildOtherSourceCard=function(options){return $.fn.altMetric.helper.drawCards(options.otherSourceCard);};$.fn.altMetric.buildOverviewTab.drawMassMedia=function(options){var counts=options.data.altMetricData.counts;var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};if(buckets.hasOwnProperty("mass_media")){var massHeader=$('<h4>',{'html':options.labels.tabs.massMedia.title()});var engMM=options.engMassMedia;var headText='<span id="massmedia_bubbleContainer"><a id="massmedia_heading_icon" class="altmet_heading_snow"'
+'title="'
+options.labels.tabs.massMedia.snowballIconTitle()
+'" href="#"></a></span>';var massHeading=$('<div>',{'class':"altmet_overview_subHeading",'html':headText});massHeading.append(massHeader);engMM.append(massHeading);var countno=options.data.altMetricData.counts.buckets.mass_media.total;var sourceCount=options.data.altMetricData.counts.users.news;var headerDescription;if(countno>1&&sourceCount>1){headerDescription=options.labels.tabs.massMedia.countdesc1;}else if(countno>1){headerDescription=options.labels.tabs.massMedia.countdesc2;}else{headerDescription=options.labels.tabs.massMedia.countdesc3;}
var count=$('<span>',{'class':"altmet_overview_count",'text':" - "+headerDescription(countno,sourceCount)});massHeading.append(count);options.massHeadingContainer=massHeading;$.fn.altMetric.buildOverviewTab.drawMassMedia.addBubbleContent(options);var massDetContainer=$('<div>',{'class':"altmet_detail_caption"});engMM.append(massDetContainer);var massCaption=$('<div>',{'class':"altmet_overview_caption",'text':options.labels.tabs.overview.massMedia.captionText()});massDetContainer.append(massCaption);var streamData={'container':massDetContainer,'feedStream':{'anchor':{'content':options.data.altMetricData.posts.news[0].title,'titleAttr':options.labels.tabs.scholarlyCommentary.postTitleText(options.data.altMetricData.posts.news[0].title),'url':options.data.altMetricData.posts.news[0].url},'secondLineTitle':options.data.altMetricData.posts.news[0].author.name,'feedDetails':$.fn.altMetric.getDateString(options.data.altMetricData.posts.news[0].posted_on)}};$.fn.altMetric.helper.drawFeedStream(streamData);var linkContainer=$('<div>',{'class':"altmet_view_link"});var viewDetailLink=$('<a>',{'text':options.labels.tabs.massMedia.viewAllText,'href':"#viewAllMM",'title':options.labels.tabs.massMedia.viewAllText});linkContainer.append(viewDetailLink);massDetContainer.append(linkContainer);$(viewDetailLink).on("click",viewDetailLink,$.fn.altMetric.buildOverviewTab.drawMassMedia.viewAllMassMedia);}else{$.fn.altMetric.helper.hideTab(4);}};$.fn.altMetric.buildOverviewTab.drawMassMedia.viewAllMassMedia=function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':4});};$.fn.altMetric.buildOverviewTab.drawSocialActivity=function(options){var engSA=options.socialActObj;var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var users=counts.hasOwnProperty('users')?counts.users:{};var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var socialActivity=buckets.hasOwnProperty("social_activity")?buckets.social_activity:{};var socialActivityBD=(!$.isEmptyObject(socialActivity)&&socialActivity.hasOwnProperty("break_down"))?socialActivity.break_down:{};var defaultSocialArray=['twitter','facebook','googleplus','reddit','linkedin','pinterest'];var socialActivityKeys=$.isEmptyObject(socialActivityBD)?[]:$.fn.altMetric.helper.getKeys(socialActivityBD);var socialActivityCount=socialActivityKeys.length;socialActivityKeys=$.fn.altMetric.helper.sortArrayWithArray(defaultSocialArray,socialActivityKeys);var socialActTotal=(!$.isEmptyObject(socialActivity)&&socialActivity.hasOwnProperty("total"))?socialActivity.total:0;var socialActText=$.fn.altMetric.helper.getMentionSources(socialActTotal,socialActivityCount,options);var percentiles=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var contextScoreCheck=percentiles.length>0&&percentiles[0].hasOwnProperty('context_for_score')?percentiles[0].context_for_score:{};var socActProgressData=(!$.isEmptyObject(contextScoreCheck)&&contextScoreCheck.hasOwnProperty("social_activity"))?contextScoreCheck.social_activity:0;if(buckets.hasOwnProperty('social_activity')){var socHeader=$('<h4>',{'html':options.labels.tabs.overview.socialActivity.heading()});var headText='<span id="socialActBubbleContainer"> <a id="social_heading_icon" class="altmet_heading_snow" '
+'title="'
+options.labels.tabs.socialActivity.snowballIconTitle()
+'" href="#"></a></span>';var socialHeading=$('<div>',{'class':"altmet_overview_subHeading",'html':headText});socialHeading.append(socHeader);engSA.append(socialHeading);var count=$('<span>',{'class':"altmet_overview_count",'text':" - "+socialActText});socialHeading.append(count);options.socialHeadingContainer=socialHeading;$.fn.altMetric.buildOverviewTab.drawSocialActivity.addBubbleContent(options);var socActContainer=$('<div>',{'class':"altmet_detail_caption"});var socActCaption=$('<div>',{'class':"overview_socialActivity_caption",'text':options.labels.tabs.socialActivity.sources2()});socActContainer.append(socActCaption);engSA.append(socActContainer);var socActMedia=$('<div>',{'class':'altmet_social'});var socActMediaLstEven=$('<div>',{'class':'altmet_social_caption_even'});socActMedia.append(socActMediaLstEven);socActContainer.append(socActMedia);var socActMediaLstOdd=$('<div>',{'class':'altmet_social_caption_odd'});socActContainer.append(socActMedia);$.each(socialActivityKeys,function(index,socKey){var socValue=socialActivityBD[socKey];var socUser=users[socKey];var socActProp=options.labels.tabs.overview.socialActivity[socKey];var countDesc=typeof socActProp!=='undefined'&&(socValue>1&&socUser>1)?socActProp(socValue,socUser):typeof socActProp!=='undefined'&&(socValue>1&&socUser===1)?socActProp.singleUser(socValue,socUser):typeof socActProp!=='undefined'?socActProp.singlePost(socValue,socUser):socKey;var socActSite=$('<div>',{'class':"altmet_social_site"});var socActMediaIcn=$('<span>',{'class':"altmet_social_img "+socKey});socActSite.append(socActMediaIcn);var socActMediaTxt=$('<span>',{'class':"altmet_social_txt",'text':countDesc});socActSite.append(socActMediaTxt);if(socValue>0&&index===3){socActMedia.append(socActMediaLstOdd);}
if(socValue>0&&index<3){socActMediaLstEven.append(socActSite);}else if(socValue>0&&index>=3){socActMediaLstOdd.append(socActSite);}});if(socActProgressData>0){options.benchmarkContainer=socActContainer;var progressBarDescription=options.labels.tabs.overview.socialActivity.benchmark.activity();$.fn.altMetric.helper.benchmark(options,{socialActText:socialActText,socActProgressData:socActProgressData,socialActTotal:socialActTotal,benchIconId:"scoialBenchMark_help_icon",progressBarDesc:progressBarDescription});}
var linkContainer=$('<div>',{'class':"altmet_view_link",'style':"padding-left : 6px"});var viewDetailLink=$('<a>',{'text':options.labels.tabs.overview.socialActivity.benchmark.viewall(),'href':"#viewAllSA",'id':"viewAllSA",'title':options.labels.tabs.overview.socialActivity.benchmark.viewall()});$(viewDetailLink).on("click",viewDetailLink,$.fn.altMetric.buildOverviewTab.drawSocialActivity.viewAllSocialActivity);socActContainer.append(linkContainer);linkContainer.append(viewDetailLink);}else{$.fn.altMetric.helper.hideTab(5);}};$.fn.altMetric.buildOverviewTab.drawSocialActivity.viewAllSocialActivity=function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':5});};$.fn.altMetric.helper.benchmark=function(options,props){var compareType=options.data.altMetricData.metrics.percentiles[0].subject_description;var benchmarkType=options.data.altMetricData.metrics.percentiles[0].benchmark_type;var socActContainer=options.benchmarkContainer;var socActBenchmarkCont=$('<div>',{'class':"altmet_benchmark_caption"});var socActBenchmark=$('<div>',{'class':"altmet_benchMark_Icon",'text':options.labels.tabs.overview.socialActivity.benchmark()});var helpIconBubbleContainer=$("<span>",{"id":"bMarkHelpBubbleContainer"});var helpIcon=$('<a>',{'class':"benchmarking_help_icon",'id':props.benchIconId,'href':"#",'title':options.labels.tabs.overview.benchmark.icontooltiptext()});socActBenchmarkCont.append(socActBenchmark);socActBenchmarkCont.append(helpIconBubbleContainer.append(helpIcon));socActContainer.append(socActBenchmarkCont);options.bubbleDataId=helpIcon.attr("id");options.becnchMarkObj=helpIconBubbleContainer;if(props.progressBarDesc.indexOf("Social")>-1){$.fn.altMetric.buildOverviewTab.drawSocialActivity.addBenchMarkBubbleContent(options);}else{$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawBenchMark.addBubbleContent(options);}
var socActBenchmarkCaption=$('<div>',{'class':'altmet_benchmark_text','text':options.labels.tabs.overview.socialActivity.benchmarkCaption(props.socialActText)});socActContainer.append(socActBenchmarkCaption);var socActCompare=$('<div>',{'class':"altmet_compare_caption"});if(benchmarkType==='doctype'){socActCompare.text(options.labels.tabs.overview.socialActivity.benchmark.compare(compareType));}else if(benchmarkType==='subject'){socActCompare.text(options.labels.tabs.overview.socialActivity.benchmark.compareSub(compareType));}else{socActCompare.text(compareType);}
socActContainer.append(socActCompare);var socActActivity=$('<div>',{'class':"altmet_social_activity",'text':props.progressBarDesc});var socActBenchcnt=$('<span>',{'class':'altmet_overview_count','text':' - '+props.socialActTotal});socActContainer.append(socActActivity);socActActivity.append(socActBenchcnt);var suffixText=$.fn.altMetric.helper.ordinalSuffix(props.socActProgressData);var percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);var socActProgress=$('<div>',{'class':"altmet_socActProgress",'title':percentileTxt});$.fn.altMetric.helper.demoProgressBar(socActProgress,props.socActProgressData);socActActivity.append(socActProgress);var socActProgressLabel=$('<span>',{'class':'altmet_progress_label','html':percentileTxt});socActActivity.append(socActProgressLabel);};$.fn.altMetric.buildOverviewTab.drawSocialActivity.addBubbleContent=function(options){var container=options.socialHeadingContainer;var headingsnowballObj=container.find("#socialActBubbleContainer");var dynParams={'section':'overviewSocialActivity','title':options.labels.tabs.overview.socialActivity.heading,'dynamicSnowBubbleText':options.labels.tabs.socialActivity.headingSnowBubbleText2};var socialActdynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':socialActdynamicTextObj,'bubblePosition':'positionLeft','targetElement':headingsnowballObj,'bubbleDataTarget':"social_heading_icon"};options.params=params;$.fn.altMetric.bubble.addBubbleContent(options);};$.fn.altMetric.buildOverviewTab.drawSocialActivity.addBenchMarkBubbleContent=function(options){var benchmarkDynamicText='<span class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.overview.socialActivity.benchmarkbubbleText1()
+'</span><ul class="altmet_scholAct_benchMarkBubble"><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleListText1()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleListText2()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleListText3()
+'</li></ul><span class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.overview.socialActivity.benchmarkbubbleText2()+'</span>';var headingsnowballObj=jQuery("#bMarkHelpBubbleContainer");var dynParams={'section':'benchmarkbubble','dynamicSnowBubbleText':benchmarkDynamicText};var benchmarkDynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':benchmarkDynamicTextObj,'bubblePosition':'positionLeft','targetElement':headingsnowballObj,'bubbleDataTarget':options.bubbleDataId};options.params=params;$.fn.altMetric.bubble.addBubbleContentWithoutSnow(options);};$.fn.altMetric.buildOverviewTab.drawMassMedia.addBubbleContent=function(options){var headingsnowballObj=jQuery("#massmedia_bubbleContainer");var dynParams={'section':'oerviewMassmedia','title':options.labels.tabs.massMedia.title,'dynamicSnowBubbleText':options.labels.tabs.massMedia.headingSnowBubbleText2};var massMediadynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':massMediadynamicTextObj,'bubblePosition':'positionLeft','targetElement':headingsnowballObj,'bubbleDataTarget':"massmedia_heading_icon"};options.params=params;$.fn.altMetric.bubble.addBubbleContent(options);};$.fn.altMetric.buildOverviewTab.drawScholCommentary=function(options){var engSC=options.engScholComm;var altMetricData=options.data.altMetricData;var counts=altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var scholarcommentary=buckets.hasOwnProperty('scholar_commentary')?altMetricData.counts.buckets.scholar_commentary:[];var scholarcommentary_count=scholarcommentary.length!==0&&scholarcommentary.hasOwnProperty('total')?altMetricData.counts.buckets.scholar_commentary.total:0;var scholarcommentaryData=altMetricData.hasOwnProperty('posts')?altMetricData.posts:{};if(buckets.hasOwnProperty('scholar_commentary')){if(scholarcommentary_count>0&&scholarcommentaryData.length!==0){var headText='<span id="scholCommBubbleContainer"><a id="scholCommentary_heading_icon" class="altmet_heading_snow"'
+'title="'
+options.labels.tabs.scholarlyCommentary.snowballIconTitle()+'" href="#"></a></span>';var schHeader=$('<h4>',{'html':options.labels.tabs.scholarlyCommentary.title()});var SCHeading=$('<div>',{'class':"altmet_overview_subHeading",'html':headText});SCHeading.append(schHeader);var singular=options.labels.tabs.overview.scholarlyCommentary.countdesc();var plural=options.labels.tabs.overview.scholarlyCommentary.countdescs();engSC.append(SCHeading);var count=$('<span>',{'class':"altmet_overview_count",'text':" - "
+scholarcommentary_count
+" "
+$.fn.altMetric.helper.getSingularPlural(scholarcommentary_count,singular,plural)});SCHeading.append(count);options.ScholCommHeadingContainer=SCHeading;$.fn.altMetric.buildOverviewTab.drawScholCommentary.addBubbleContent(options);var ScholCommDetContainer=$('<div>',{'class':"altmet_detail_caption"});var ScholCommCaption=$('<div>',{'class':"altmet_overview_caption",'text':options.labels.tabs.scholarlyCommentary.scholCommCaptionText()});ScholCommDetContainer.append(ScholCommCaption);var scholdataOrder=['blogs','pubpeer','f1000','wikipedia','qa'];var dataToget;$.each(scholdataOrder,function(i,orderval){if(scholarcommentaryData.hasOwnProperty(orderval)&&scholarcommentaryData[orderval].length!==undefined){dataToget=scholarcommentaryData[orderval];return false;}});engSC.append(ScholCommDetContainer);var authName;if(scholarcommentaryData.hasOwnProperty('f1000')){authName="";}else{authName=dataToget[0].author.name;}
var streamData={'container':ScholCommDetContainer,'feedStream':{'anchor':{'content':dataToget[0].title,'titleAttr':options.labels.tabs.scholarlyCommentary.postTitleText(dataToget[0].title),'url':dataToget[0].url},'secondLineTitle':authName,'feedDetails':$.fn.altMetric.getDateString(dataToget[0].posted_on)}};$.fn.altMetric.helper.drawFeedStream(streamData);var linkContainer=$('<div>',{'class':"altmet_view_link"});var viewScholarlyCommentaryDetailLink=$('<a>',{'text':options.labels.tabs.scholarlyCommentary.viewAllText(),'href':"#viewAllSC",'title':options.labels.tabs.scholarlyCommentary.viewAllText()});$(viewScholarlyCommentaryDetailLink).on("click",$.fn.altMetric.buildOverviewTab.drawScholCommentary.viewAllScholCommentary);linkContainer.append(viewScholarlyCommentaryDetailLink);ScholCommDetContainer.append(linkContainer);}}else{$.fn.altMetric.helper.hideTab(3);}};$.fn.altMetric.buildOverviewTab.drawScholCommentary.viewAllScholCommentary=function(event){event.preventDefault();$.fn.altMetric.helper.switchTab({'oldIndex':0,'newIndex':3});};$.fn.altMetric.buildOverviewTab.drawScholCommentary.addBubbleContent=function(options){var headingsnowballObj=jQuery("#scholCommBubbleContainer");var dynParams={'section':'overviewScolCommentary','title':options.labels.tabs.scholarlyCommentary.title,'dynamicSnowBubbleText':options.labels.tabs.scholarlyCommentary.scholCommSnowBubbleText2};var scholCommdynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':scholCommdynamicTextObj,'bubblePosition':'positionLeft','targetElement':headingsnowballObj,'bubbleDataTarget':"scholCommentary_heading_icon"};options.params=params;$.fn.altMetric.bubble.addBubbleContent(options);};$.fn.altMetric.getDateString=function(isoDateString,format){var parts=isoDateString.match(/\d+/g);if(typeof format==='undefined'){format='dd MM yy';}
var isoTime=Date.UTC(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);return $.datepicker.formatDate(format,new Date(isoTime));};$.fn.altMetric.buildCitationsTab=function(options){if(!$.fn.altMetric.buildCitationsTab.hasOwnProperty("isTabDrawn")){if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_citGraph_start');}
var tabContainer=options.tabUI.newPanel;var tabContentContainer=$('<div>',{'class':"altmet_panelContent"});tabContainer.append(tabContentContainer);var contentHeader=$('<div>',{'class':"altmet_headerContainer"});var contentSources=$('<div>',{'class':"altmet_sources"});var contentCards=$('<div>',{'class':"altmet_cards"});var citedByGraph=$('<div>',{'class':"altmet_citedbygraph",'id':"altmet_citedbygraph"});var contentBenchmark=$('<div>',{'class':"altmet_citationBenchmarking"});tabContentContainer.append(contentHeader).append(contentSources).append(contentCards);tabContentContainer.append(citedByGraph);tabContentContainer.append(contentBenchmark);options.contentHeader=contentHeader;$.fn.altMetric.buildCitationsTab.drawHeader(options);options.sourcesObj=contentSources;$.fn.altMetric.buildCitationsTab.drawSources(options);options.cardsObj=contentCards;$.fn.altMetric.buildCitationsTab.drawCards(options);$.fn.altMetric.buildCitationsTab.loadCitationsGraph(options);if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_citGraph_end');$.fn.altMetric.metricValues('scr_citBM_start');}
options.benchmarkObj=contentBenchmark;$.fn.altMetric.buildCitationsTab.drawBenchMark(options);if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_citBM_end');}
$.fn.altMetric.buildCitationsTab.isTabDrawn=true;}};$.fn.altMetric.buildCitationsTab.checkCitationExclusions=function(){var excludeSelfCitationsBox=$('#excludeSelfCitationsBox');var excludeBookCitationsBox=$('#excludeBookCitationsBox');if($(excludeSelfCitationsBox).prop('checked')){$(excludeSelfCitationsBox).attr("disabled",false);$(excludeSelfCitationsBox).removeClass('boxDisabled');$(excludeBookCitationsBox).attr("disabled",true);$(excludeBookCitationsBox).addClass('boxDisabled');}else if($(excludeBookCitationsBox).prop('checked')){$(excludeSelfCitationsBox).attr("disabled",true);$(excludeSelfCitationsBox).addClass('boxDisabled');$(excludeBookCitationsBox).attr("disabled",false);$(excludeBookCitationsBox).removeClass('boxDisabled');}else{$(excludeSelfCitationsBox).attr("disabled",false);$(excludeSelfCitationsBox).removeClass('boxDisabled');$(excludeBookCitationsBox).attr("disabled",false);$(excludeBookCitationsBox).removeClass('boxDisabled');}};$.fn.altMetric.buildCitationsTab.drawCitationsGraph=function(options){if($.fn.altMetric.buildCitationsTab.hasOwnProperty("isGraphDrawn")){return;}
var container=$('#altmet_citedbygraph');var citedBy=$('<div>',{'class':"altmet_citations_graph1"});var citedByTxt=$('<h4>',{'class':"altmet_citations_subHeadTxt",'html':options.labels.tabs.citations.cards.citation.graph.citedByText()});citedBy.append(citedByTxt);container.append(citedBy);var exportDiv=$('<div>',{'class':"altmet_exportCitationContainer"});var exportCitations=$('<a>',{'html':options.labels.tabs.citations.cards.citation.graph.exportText(),'alt':options.labels.tabs.citations.cards.citation.graph.exportText(),'id':"exportCitations",'href':"/cto2/export.uri?stateKey="+stateKey
+"&amp;origin=publicationmetrics",'title':options.labels.tabs.citations.cards.citation.graph.exportToolTip()});if(options.isPreview===true){exportCitations.addClass("previewDisable");exportCitations.attr("disabled","disabled");exportCitations.prop("onclick",null).removeAttr("href").removeAttr("onclick").die("click").off("click");$(exportCitations).click(function(event){event.preventDefault();});}else{$(exportCitations).click($.fn.altMetric.buildCitationsTab.exportCitationsClicked);}
exportDiv.append(exportCitations);var highChartContainer=$('<div>',{'class':"floatL"});var clearObj=$('<div>',{'class':"clear"});var highChart=$('<div>',{'class':"ctoHighChart",'id':"highChart"});var ctoDateSec=$('<div>',{'class':"dateRangeCTO",'id':"ctoDateSec"});var formWrapper=$('<div>',{'id':"updateOverviewFormWrapper"});container.append(highChartContainer).append(ctoDateSec).append(clearObj);highChartContainer.append(citedBy).append(exportDiv).append(highChart);ctoDateSec.append('<div class="altmet_ctoCitationsCountText">'
+options.data.articleData.citedbyCount
+' '
+options.labels.tabs.citations.cards.citation.graph.citedByCountsText()+'</div>');ctoDateSec.append(formWrapper);var updateOverviewForm=$('<form>',{'id':"updateOverviewForm"});formWrapper.append(updateOverviewForm);var ctoDateRange=$('<div>',{'class':"ctoDateRange"});updateOverviewForm.append(ctoDateRange);ctoDateRange.append('<span class="verticalAlignMiddle dateRangeCTOFYear">'
+'<label for="startYear">'
+options.labels.tabs.citations.cards.citation.graph.dateRangeText()+'</label></span>');var selectFromWrapper=$('<span>',{'class':"verticalAlignMiddle posRelative inlineBlk ddlFieldLimit ddlSect ui-front"});ctoDateRange.append(selectFromWrapper);var selectFrom=$('<select>',{'class':"verticalAlignMiddle ddlFields selectMenu ctoStartYearSelect",'name':"startYear",'id':"startYear",'alt':options.labels.tabs.citations.cards.citation.graph.citationGraphStart()});selectFromWrapper.append(selectFrom);$.fn.altMetric.buildCitationsTab.populateYearSelector(selectFrom,'1970',options.citationData.endYear);$(selectFrom).val(options.citationData.startYear);ctoDateRange.append('<span class="verticalAlignMiddle altmet_ToYearTx"><label for="endYear">'
+' '
+options.labels.tabs.citations.cards.citation.graph.dateRangeToText()+'</label></span>');var selectToWrapper=$('<span>',{'class':"verticalAlignMiddle posRelative inlineBlk ddlFieldLimit ddlSect ui-front"});ctoDateRange.append(selectToWrapper);var selectTo=$('<select>',{'class':"verticalAlignMiddle ddlFields selectMenu ctoStartYearSelect",'name':"endYear",'id':"endYear",'alt':options.labels.tabs.citations.cards.citation.graph.citationGraphEnd()});selectToWrapper.append(selectTo);$.fn.altMetric.buildCitationsTab.populateYearSelector(selectTo,'1970',options.citationData.endYear);$(selectTo).val(options.citationData.endYear);var updateOverviewBox=$('<div>',{'id':"altmet_updateOverviewData",'class':"updateOverviewData"});updateOverviewForm.append(updateOverviewBox);var excludeSelfCitationsBox=$('<input>',{'type':"checkbox",'id':"excludeSelfCitationsBox",'name':"excludeSelfCitationsBox",'title':options.labels.tabs.citations.cards.citation.graph.excludeAuthorsToolTip()});var updateCheckLable=$('<div>',{'class':"updateCheckLable",'style':"display: inline-block"});var label='<span id="selfLabelText"><label for="excludeSelfCitationsBox" title="';label+=options.labels.tabs.citations.cards.citation.graph.excludeAuthorsToolTip();label+='">';label+=options.labels.tabs.citations.cards.citation.graph.excludeSelfCitationsText();label+='</label></span>';updateCheckLable.append(label);updateOverviewBox.append(buildCheckbox(excludeSelfCitationsBox));updateOverviewBox.append(updateCheckLable);updateOverviewBox.append('<br/>');var excludeBookCitationsBox=$('<input>',{'type':"checkbox",'id':"excludeBookCitationsBox",'name':"excludeBookCitationsBox",'title':options.labels.tabs.citations.cards.citation.graph.excludeBooksToolTip()});updateOverviewBox.append(buildCheckbox(excludeBookCitationsBox));$(excludeSelfCitationsBox).click($.fn.altMetric.buildCitationsTab.checkCitationExclusions);$(excludeBookCitationsBox).click($.fn.altMetric.buildCitationsTab.checkCitationExclusions);var updateCheckLable2=$('<div>',{'class':"updateCheckLable",'style':"display: inline-block"});updateOverviewBox.append(updateCheckLable2);label='<span id="selfLabelText"><label for="excludeBookCitationsBox" title="';label+=options.labels.tabs.citations.cards.citation.graph.excludeBooksToolTip();label+='">';label+=options.labels.tabs.citations.cards.citation.graph.excludeBookCitationsText();label+='</label></span>';updateCheckLable2.append(label);var actionCalls=$('<div>',{'id':"actionCalls"});updateOverviewBox.append(actionCalls);var editText=$('<div>',{'html':options.labels.tabs.citations.cards.citation.graph.updateCitationsGraphEditText()});updateOverviewBox.append(editText);var buttonOn=$('<input>',{'id':"buttonOn",'class':"altmet_CtoUpdateBtn",'type':"button",'title':options.labels.tabs.citations.cards.citation.graph.updateCitationsGraphText(),'alt':options.labels.tabs.citations.cards.citation.graph.updateCitationsGraphText(),'value':options.labels.tabs.citations.cards.citation.graph.updateCitationsGraphText()});actionCalls.append(buttonOn);$('#buttonOn').click($.fn.altMetric.buildCitationsTab.graphUpdateClicked);$('#buttonOn').keypress(function(event){if(event.which===13){$.fn.altMetric.buildCitationsTab.graphUpdateClicked();return false;}});$.fn.altMetric.buildCitationsTab.isGraphDrawn=true;};$.fn.altMetric.buildCitationsTab.exportCitationsClicked=function(){var tabObj=$(".altmet_tabs");var options=tabObj.data("options");MessageContainer.removeMessages();MessageContainer.messageType=MessageContainer.CONFIRM_MSG;MessageContainer.msgContent=options.labels.tabs.citations.cards.citation.graph.exportConfirmationText();MessageContainer.parentContainerObj=$("#container");MessageContainer.insertMsgContainer();return true;};$.fn.altMetric.buildCitationsTab.validateDateRange=function(options,startYear,endYear){if(endYear.indexOf('>')>-1){endYear=endYear.replace('>','');endYear=parseInt(endYear)+1;endYear=''+endYear;}
if(startYear.indexOf('>')>-1){startYear=startYear.replace('>','');startYear=parseInt(startYear)+1;startYear=''+startYear;}
if(parseInt(startYear)>parseInt(endYear)){MessageContainer.removeMessages();MessageContainer.messageType=MessageContainer.WARNING_MSG;MessageContainer.msgContent=options.labels.tabs.citations.cards.citation.graph.startYearGreaterThanEndYear();MessageContainer.parentContainerObj=$("#container");MessageContainer.insertMsgContainer();return false;}
if((parseInt(endYear)-parseInt(startYear))>maxYearRange){MessageContainer.removeMessages();MessageContainer.messageType=MessageContainer.WARNING_MSG;MessageContainer.msgContent=options.labels.tabs.citations.cards.citation.graph.dateRangeTooGreat(maxYearRange,maxYearRange);MessageContainer.parentContainerObj=$("#container");MessageContainer.insertMsgContainer();return false;}
return true;};$.fn.altMetric.buildCitationsTab.graphUpdateClicked=function(){var tabObj=$(".altmet_tabs");var options=tabObj.data("options");var startYear=$('#startYear').val();var endYear=$('#endYear').val();if(!$.fn.altMetric.buildCitationsTab.validateDateRange(options,startYear,endYear)){return;}
var excludeAuthors=$('#excludeSelfCitationsBox').prop('checked');var excludeBooks=$('#excludeBookCitationsBox').prop('checked');var citationData=jQuery.get(options.externalConfigurations.citationDataURL+'?eid='
+options.data.eid+'&startYear='+startYear
+'&endYear='+endYear+'&excludeAuthors='
+excludeAuthors+'&excludeBooks='+excludeBooks);citationData.done($.fn.altMetric.buildCitationsTab.citationDataResponse);var message=null;if(excludeAuthors){message=options.labels.tabs.citations.cards.citation.graph.authorsExcludedConfirmation();}else if(excludeBooks){message=options.labels.tabs.citations.cards.citation.graph.booksExcludedConfirmation();}
MessageContainer.removeMessages();if(message!=null){MessageContainer.messageType=MessageContainer.CONFIRM_MSG;MessageContainer.msgContent=message;MessageContainer.parentContainerObj=$("#container");MessageContainer.insertMsgContainer();}};$.fn.altMetric.buildCitationsTab.drawBenchMark=function(options){var benchmarkContainerObj=options.benchmarkObj;var header=options.labels.tabs.scholarlyActivity.headingBenchmark();var headDetail=options.labels.tabs.citations.benchmarkCaption();var title=$("<div>",{'class':"altmet_citations_subHeading"});var subcontainer=$("<span>",{'class':"altmet_benchMark_Icon",});var subcontainerTxt=$("<h4>",{'class':"altmet_citations_subHeadTxt","text":header});subcontainer.append(subcontainerTxt);var helpIconBubbleContainer=$("<span>",{"id":"citationbMarkHelpBubbleContainer"});var helpIcon=$("<a>",{'class':"benchmarking_help_icon","id":"citation_benchmarking_help_icon","href":"#",'title':options.labels.tabs.overview.benchmark.icontooltiptext()});var benchDetail=$("<div>",{'class':"altmet_ben_detail"});var subtitle=$("<div>",{'class':"altmet_citations_caption","text":headDetail});benchmarkContainerObj.append(title);title.append(subcontainer);title.append(helpIconBubbleContainer.append(helpIcon));options.becnchMarkObj=helpIconBubbleContainer;options.bubbleDataId=helpIcon.attr("id");$.fn.altMetric.buildCitationsTab.drawBenchMark.addBubbleContent(options);benchmarkContainerObj.append(benchDetail);benchDetail.append(subtitle);var altMetricData=options.data.altMetricData;var data=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var optionsJsonOutput={};var optionsType={};options.benchmarkType=optionsType;for(var j=0;j<data.length;j++){var inpObj=data[j];var subjDesc=inpObj["subject_description"];var benType=inpObj["benchmark_type"];var progressBarCnt=inpObj["context_for_score"];optionsJsonOutput[subjDesc]=progressBarCnt;optionsType[subjDesc]=benType;}
var optionsTypeKeys=$.fn.altMetric.helper.getKeys(optionsType);var listRow;if(data.length!==0){if(optionsType[optionsTypeKeys[0]]==='doctype'){listRow=$("<div>",{'class':"altmet_ben_overview_caption",'html':options.labels.tabs.scholarlyActivity.benchmarkCompareToDoctype("<span></span>")});}else{listRow=$("<div>",{'class':"altmet_ben_overview_caption",'html':options.labels.tabs.scholarlyActivity.benchmarkCompareTo("<span></span>")});}
options.listRow=listRow;benchDetail.append(listRow);}
var citeProgContainer=$('<div>',{'class':'altmet_citation_barContent'});var citeTitleCter=$('<div>',{'class':'altmet_allTitleCter','text':options.labels.tabs.citations.allCiteText()});var citeProgBar=$("<div>",{'class':"altmet_citBenProgress"});var selectBox=$("<select>",{'class':"altmet_citationCombo"});var inSuffData=options.labels.tabs.scholarlyActivity.progressbar.insuffDataText();data=$.fn.altMetric.helper.getKeys(optionsJsonOutput);var allCitationsProgProgressLabel;var i=0;var counts=options.data.altMetricData.hasOwnProperty('counts')?options.data.altMetricData.counts:{};var buckets=counts.hasOwnProperty('buckets')?options.data.altMetricData.counts.buckets:{};var scholar_activity=buckets.hasOwnProperty('scholar_activity')?options.data.altMetricData.counts.buckets.scholar_activity:{};var schBreakdown=scholar_activity.hasOwnProperty('break_down')?options.data.altMetricData.counts.buckets.scholar_activity.break_down:{};var citeCount=schBreakdown.hasOwnProperty('citeulike')?schBreakdown.citeulike:0;if(data.length>1){listRow.find("span:first-child").append(selectBox);}
var citeBenchOptions=[];if(data.length===0){$(citeProgBar).progressbar({'value':0}).attr('title',inSuffData);allCitationsProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"allCitationProgProgressLabel",'html':inSuffData});citeProgContainer.append(citeTitleCter);citeProgContainer.append(citeProgBar);citeProgContainer.append(allCitationsProgProgressLabel);benchDetail.append(citeProgContainer);}
$.each(data,function(index,item){if(data.length>1){var selectOptions="<option value='"+item
+"'>"+item+"</option>";selectBox.append(selectOptions);citeBenchOptions.push(selectOptions);}else{listRow.find("span:first-child").append(subjDesc);}
if(i===0){options.subjectTxt=options.labels.tabs.scholarlyActivity.benchmarkCompareTo("<span></span>");options.docTxt=options.labels.tabs.scholarlyActivity.benchmarkCompareToDoctype("<span></span>");if(typeof citeCount!=="undefined"){var undef=false;var citePercent=optionsJsonOutput[item].citations;var citeText;if(typeof citePercent==="undefined"){citeText="Insufficent data";undef=true;}else{citeText=options.labels.tabs.overview.benchmarkPercentile(citePercent);}
var suffixText=$.fn.altMetric.helper.ordinalSuffix(citePercent);var percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);var perTooltipTxt=percentileTxt;if(citePercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(citeProgBar).progressbar({'value':citePercent}).attr('title',perTooltipTxt);allCitationsProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"allCitationProgProgressLabel",'html':percentileTxt});citeProgContainer.append(citeTitleCter);citeProgContainer.append(citeProgBar);citeProgContainer.append(allCitationsProgProgressLabel);benchDetail.append(citeProgContainer);}}
i++;});options.citeBenchOptions=citeBenchOptions;$(document.body).on('change','.altmet_citationCombo',options,function(event){$.fn.altMetric.helper.toggleLoadingIcon({isShow:true,loadContainer:benchmarkContainerObj});var options=event.data;var title=this.value;var citePercent=optionsJsonOutput[title].citations;var citeProgToolTxt;$(citeProgBar).progressbar("option","value",0);$('#allCitationProgProgressLabel').html('');setTimeout(function(){if(typeof citePercent==="undefined"){$('#allCitationProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());citeProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();citePercent=0;}else{var suffixText=$.fn.altMetric.helper.ordinalSuffix(citePercent);var percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);citeProgToolTxt=percentileTxt;$('#allCitationProgProgressLabel').html(percentileTxt);}
$(citeProgBar).progressbar({'value':citePercent}).attr('title',citeProgToolTxt);$.fn.altMetric.helper.toggleLoadingIcon({isShow:false,loadContainer:benchmarkContainerObj});},500);var listRow=options.listRow;var selectBox=["<select class='altmet_citationCombo'>",options.citeBenchOptions.join(''),"</select>"].join('');var selectedIndex=$(this).find(":selected").index();var optionsType=options.benchmarkType;if(optionsType[title]==="subject"){if(!options.hasOwnProperty("docTxt")){options.docTxt=listRow.html();}
listRow.html(options.subjectTxt);listRow.find("span:first-child").append(selectBox);listRow.find("select").get(0).selectedIndex=selectedIndex;}else{if(!options.hasOwnProperty("subjectTxt")){options.subjectTxt=listRow.html();}
listRow.html(options.docTxt);listRow.find("span:first-child").append(selectBox);listRow.find("select").get(0).selectedIndex=selectedIndex;}});};$.fn.altMetric.buildCitationsTab.drawBenchMark.addBubbleContent=function(options){var benchmarkDynamicText='<span class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleText1()
+'</span><ul class="altmet_scholAct_benchMarkBubble"><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleListText1()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleListText2()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleListText3()
+'</li></ul><span class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleText2()
+'</span>';var headingsnowballObj=jQuery("#citationbMarkHelpBubbleContainer");var dynParams={'section':'benchmarkbubble','dynamicSnowBubbleText':benchmarkDynamicText};var benchmarkDynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':benchmarkDynamicTextObj,'bubblePosition':'positionLeft','targetElement':headingsnowballObj,'bubbleDataTarget':options.bubbleDataId};options.params=params;$.fn.altMetric.bubble.addBubbleContentWithoutSnow(options);};$.fn.altMetric.buildCitationsTab.populateYearSelector=function(selector,min,max){$(selector).append('<option value=">'+max+'">>'+max+'</option>');for(var i=max;i>=min;i--){$(selector).append('<option value="'+i+'">'+i+'</option>');}};$.fn.altMetric.buildCitationsTab.citationDataResponse=function(response){var tabObj=$(".altmet_tabs");var options=tabObj.data("options");options.citationData=response;ctoId=options.citationData.ctoId;stateKey=options.citationData.stateKey;$('#exportCitations').attr('href',"/cto2/export.uri?stateKey="+stateKey
+"&amp;origin=publicationmetrics");maxYearRange=options.citationData.maxYearRange;$.fn.altMetric.buildCitationsTab.drawCitationsGraph(options);$.fn.altMetric.buildCitationsTab.drawHighChart(options);$.fn.altMetric.buildCitationsTab.loadCitationsGraph.isGraphLoaded=true;};$.fn.altMetric.buildCitationsTab.loadCitationsGraph=function(options){if($.fn.altMetric.buildCitationsTab.loadCitationsGraph.hasOwnProperty("isGraphLoaded")){return;}
var citationData=jQuery.get(options.externalConfigurations.citationDataURL+'?eid='
+options.data.eid);citationData.done($.fn.altMetric.buildCitationsTab.citationDataResponse);};$.fn.altMetric.buildCitationsTab.drawHighChart=function(options){var chartArray=[];for(var x=0;x<options.citationData.highChartData.length;x++){chartArray.push(options.citationData.highChartData[x]);}
jQuery('#highChart').highcharts({title:{text:'',style:{'display':'none'}},yAxis:{min:0,title:{text:options.labels.tabs.citations.cards.citation.graph.highChartYTitle(),style:{"fontWeight":"bold"},offset:50},labels:{formatter:function(){return this.value;},align:'left'}},xAxis:{categories:['abc'],title:{text:options.labels.tabs.citations.cards.citation.graph.highChartXTitle(),style:{"fontWeight":"bold"}},tickInterval:1,labels:{formatter:function(){return this.value;}}},chart:{type:'line',height:150,marginLeft:75},tooltip:{formatter:function(){var s=this.x;var bgColor=this.points[0].series.color;jQuery.each(this.points,function(i,point){s='<div style="border-color:'
+bgColor
+';" class="chartTooltipWraper"><div class="primInfoToolTip">'
+s
+'</div><div class="secInfoToolTip">'
+point.y
+' '
+options.labels.tabs.citations.cards.citation.graph.highChartYTitle()
+'</div>'
+'<div class="clktoViewTooltip">'
+options.labels.tabs.citations.cards.citation.graph.chartDataToolTip()
+'</div></div>';});return s;},shared:true,shadow:false,useHTML:true,borderWidth:0,backgroundColor:null,style:{padding:0}},exporting:{enabled:false},series:[{data:chartArray,point:{events:{click:function(){var someURL=this.options.url;if(options.isPreview===true){return false;}else if(someURL&&this.y!==0){window.open(someURL,"_self");}}}},color:'#496C92'}],credits:{enabled:false},legend:{enabled:false}});};$.fn.altMetric.buildCitationsTab.drawHeader=function(options){var contentRow1=options.contentHeader;var content=options.labels.tabs.citations.title();var headerContainerObj=$("<div>",{'class':"altmet_tab_heading"});var headerObj=$("<h3>",{"html":content});contentRow1.append(headerContainerObj);headerContainerObj.append(headerObj);};$.fn.altMetric.buildCitationsTab.drawSources=function(options){var citationscount=options.data.articleData.citedbyCount;var contentRow2=options.sourcesObj;var sourcesContainerObj=$("<div>",{'class':"altmet_source_count"});var sourcesObj1=$("<div>",{'class':"altmet_citations_sources1","text":options.labels.tabs.citations.sources1(citationscount)});var alertIconObj=$("<span>",{'class':"altmet_citationalert_iconLink posRelative"});var alertTextObj=$("<a>",{"href":"#","class":"altmet_citationalert_icon altmet_citationalert_saveAsAlert","id":"saveAsAlert",'aria-haspopup':'true',"text":options.labels.tabs.citations.alert(),"title":options.labels.tabs.citations.alert.title()});var alertSetAlertPopUpObj=$("<div>",{"class":"bubble-source-data","id":"saveAsAlert-data"});contentRow2.append(sourcesContainerObj);sourcesContainerObj.append(sourcesObj1.append(alertIconObj.append(alertTextObj).append(alertSetAlertPopUpObj)));if(options.isPreview===true){alertTextObj.addClass("previewDisable");alertIconObj.addClass("previewDisable");alertTextObj.addClass("altmet_citationalert_saveAsAlertDisabled");alertTextObj.removeClass("altmet_citationalert_saveAsAlert");alertTextObj.prop("onclick",null).removeAttr("href").removeAttr("onclick").die("click").off("click");}};$.fn.altMetric.buildCitationsTab.drawCards=function(options){var cardContainerObj=$("<div>",{'class':"altmet_citations_cards"});options.cardsObj.append(cardContainerObj);var cardObj=$("<div>",{"class":"altmet_cardContainer"});options.params={'container':cardContainerObj,'section':'citations'};$.fn.altMetric.aboutSnowBall(options);var articleData=options.data.articleData;var metrics=options.data.altMetricData.metrics;var citationCardRow=$('<div>',{'class':"altmet_cardRow altmet_largeCard"});cardContainerObj.append(cardObj.append(citationCardRow));if(articleData.hasOwnProperty('citedbyCount')){var snowBallContainer=$('<span>',{'id':'citationSnowBallContainer','class':"altmet_card_snowBallContainer",'html':'<a id="citation_heading_icon" aria-haspopup="true" class="altmet_card_snow" title="'
+options.labels.tabs.citations.cards.citation.snowballIconTitle()
+'" href="#"></a>'});var snowBallBubbleContainer=$('<span>',{'id':'citationSnowBallBubbleContainer','style':'display: block'});var citationCard=$.fn.altMetric.helper.drawCards({source:'citation',count:articleData.citedbyCount,container:citationCardRow,cards:0,header:options.labels.tabs.citations.cards.citation.header(),countDesc:options.labels.tabs.citations.cards.citation.desc(),snowBallContainer:snowBallContainer});citationCard.addClass('citationCard');var snowballBubbleHeader=$("<div>",{'class':"altmet_snowBallBubbleHeader","text":options.labels.tabs.citations.cards.citation.snowballBubbleHeader()});var snowballBubbleText=$("<span>",{'class':"altmet_snowBallBubbleText","text":options.labels.tabs.citations.cards.citation.snowballBubbleText()});snowBallBubbleContainer.append(snowballBubbleHeader).append(snowballBubbleText);var params={'dynamicTextObj':snowBallBubbleContainer,'bubblePosition':'positionRight','targetElement':snowBallContainer,'bubbleDataTarget':"citation_heading_icon"};options.params=params;$.fn.altMetric.bubble.addBubbleContent(options);};if(metrics.hasOwnProperty('fwci')){var fwciSnowBallContainer=$('<span>',{'id':'fwciSnowBallContainer','class':"altmet_card_snowBallContainer",'html':'<a id="fwci_heading_icon" aria-haspopup="true" class="altmet_card_snow" title="'
+options.labels.tabs.citations.cards.fwci.snowballIconTitle()
+'" href="#"></a>'});var fwciSnowBallBubbleContainer=$('<span>',{'id':'fwciSnowBallBubbleContainer','style':'display: block'});var fwciCard=$.fn.altMetric.helper.drawCards({source:'fwci',count:metrics.fwci.toFixed(2),container:citationCardRow,cards:0,header:options.labels.tabs.citations.cards.fwci.header(),snowBallContainer:fwciSnowBallContainer});var fwciSnowballBubbleHeader=$("<div>",{'class':"altmet_snowBallBubbleHeader","text":options.labels.tabs.citations.cards.fwci.snowballBubbleHeader()});var fwciSnowballBubbleText=$("<span>",{'class':"altmet_snowBallBubbleText","text":options.labels.tabs.citations.cards.fwci.snowballBubbleText()});var fwciobjUL=$('<ul>',{'class':"altmet_snowBallBubbleText altmet_snowBallBubbleListText"});var fwciobjLI1=$('<li>',{'text':options.labels.tabs.citations.cards.fwci.snowballBubbleListText1()});fwciobjUL.append(fwciobjLI1);var fwciobjLI2=$('<li>',{'text':options.labels.tabs.citations.cards.fwci.snowballBubbleListText2()});fwciobjUL.append(fwciobjLI2);var fwciobjLI3=$('<li>',{'text':options.labels.tabs.citations.cards.fwci.snowballBubbleListText3()});fwciobjUL.append(fwciobjLI3);var fwciSnowballBubbleAddlText=$("<span>",{'class':"altmet_snowBallBubbleText","text":options.labels.tabs.citations.cards.fwci.snowballBubbleAddlText()});fwciSnowBallBubbleContainer.append(fwciSnowballBubbleHeader).append(fwciSnowballBubbleText).append(fwciobjUL).append(fwciSnowballBubbleAddlText);var fwciparams={'dynamicTextObj':fwciSnowBallBubbleContainer,'bubblePosition':'positionRight','targetElement':fwciSnowBallContainer,'bubbleDataTarget':"fwci_heading_icon"};options.params=fwciparams;$.fn.altMetric.bubble.addBubbleContent(options);};var percentiles=options.data.altMetricData.hasOwnProperty('metrics')&&options.data.altMetricData.metrics.hasOwnProperty('percentiles')?options.data.altMetricData.metrics.percentiles:[];var benchmarkType=percentiles.length>0&&percentiles[0].hasOwnProperty('benchmark_type')?percentiles[0].benchmark_type:'';var contextForScore=percentiles.length>0&&percentiles[0].hasOwnProperty('context_for_score')?percentiles[0].context_for_score:{};var citBenchMark=contextForScore.hasOwnProperty('citations')?contextForScore.citations:0;var compareType=percentiles.length>0&&percentiles[0].hasOwnProperty('subject_description')?percentiles[0].subject_description:'';var countDesc=benchmarkType==='doctype'?options.labels.tabs.overview.cards.citationBenchMark.docDesc(compareType):options.labels.tabs.overview.cards.citationBenchMark.articleDesc(compareType);var citationHelpIconBubbleContainer=$("<span>",{"id":"citationMarkHelpIconBubbleContainer",'html':'<a id="citationMarking_help_icon"  aria-haspopup="true" class= "citationCard_helpIcon" title="'
+options.labels.tabs.overview.benchmark.icontooltiptext()+'"href="#"></a>'});var citationbMarkSnowBallBubbleContainer=$('<span>',{'id':'citationbMarkSnowBallBubbleContainer','style':'display: block'});var benchmarkingCard=$.fn.altMetric.helper.drawCards({source:"citationBenchMark",count:citBenchMark,container:citationCardRow,cards:0,header:options.labels.tabs.citations.cards.benchmark.header(),countDesc:countDesc,snowBallContainer:citationHelpIconBubbleContainer});benchmarkingCard.append(citationHelpIconBubbleContainer);var percentileText=options.labels.tabs.citations.cards.benchmark.percentile($.fn.altMetric.helper.ordinalSuffix(citBenchMark));if(citBenchMark>0){percentileText=['<span class="altmet_citBMCntTxt">',$.fn.altMetric.helper.ordinalSuffix(citBenchMark),' ',options.labels.tabs.citations.cards.benchmark.percentile(),'</span>'];}else{percentileText=['<span class="altmet_insuffDataTxt">',options.labels.tabs.scholarlyActivity.progressbar.insuffDataText(),'</span>'];}
var citationBenchBubbleHeader=$("<div>",{'class':"altmet_citation_HelpIconText","text":options.labels.tabs.overview.citationbenchmarkcardheader()});var citationDynamicText=$('<span>',{'class':"altmet_citationBench_BubbleText",'text':options.labels.tabs.citations.benchmarkBubbleText1()});var citationObjUL=$('<ul>',{'class':"altmet_citationBench_BubbleText altmet_snowBallBubbleListText "});var citationObjLI1=$('<li>',{'text':options.labels.tabs.citations.benchmarkHelpIconText1()});citationObjUL.append(citationObjLI1);var citationObjLI2=$('<li>',{'text':options.labels.tabs.citations.benchmarkHelpIconText2()});citationObjUL.append(citationObjLI2);var citationObjLI3=$('<li>',{'text':options.labels.tabs.citations.benchmarkHelpIconText3()});citationObjUL.append(citationObjLI3);var citationText=$('<span>',{'class':"altmet_citationBench_BubbleText",'text':options.labels.tabs.citations.benchmarkBubbleText2()});citationbMarkSnowBallBubbleContainer.append(citationBenchBubbleHeader).append(citationDynamicText).append(citationObjUL).append(citationText);var params={'dynamicTextObj':citationbMarkSnowBallBubbleContainer,'bubblePosition':'positionRightLeft','targetElement':citationHelpIconBubbleContainer,'bubbleDataTarget':"citationMarking_help_icon"};options.params=params;$.fn.altMetric.bubble.addBubbleContentWithoutSnow(options);var progressbarContainer=$('<div>',{'class':"altmet_progressbarContainer citationBenchMark"});$.fn.altMetric.helper.demoProgressBar(progressbarContainer,citBenchMark);benchmarkingCard.find(".altmet_cardCount").html(percentileText.join('')).after(progressbarContainer);};$.fn.altMetric.buildTab.buildScholarlyActivityTab=function(options){if(!$.fn.altMetric.buildTab.buildScholarlyActivityTab.hasOwnProperty("isTabDrawn")){var tabContainer=options.tabUI.newPanel;var tabContentContainer=$('<div>',{'class':"altmet_panelContent scholarlyActivity"});tabContainer.append(tabContentContainer);var contentHeader=$('<div>',{'class':"altmet_headerContainer"});var contentSources=$('<div>',{'class':"altmet_sources"});var contentCards=$('<div>',{'class':"altmet_cards"});var contentMedMap=$('<div>',{'class':"altmet_medleyMap"});var contentBenchmark=$('<div>',{'class':"altmet_benchmark"});tabContentContainer.append(contentHeader).append(contentSources).append(contentCards).append(contentMedMap).append(contentBenchmark);var contentDemographics=$('<div>',{'class':"altmet_demographics"});var contentMap=$('<div>',{'class':"altmet_map"});contentMedMap.append(contentDemographics);contentMedMap.append(contentMap);options.contentHeader=contentHeader;$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawHeader(options);options.sourcesObj=contentSources;if(options.notInISSNListPreview!==true){$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawSources(options);}
options.cardsObj=contentCards;options.params={'container':contentSources,'section':'scholAct'};$.fn.altMetric.aboutSnowBall(options);$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawCard(options);var totalCount=options.data.altMetricData.counts;var scholActiveContent=totalCount.buckets.scholar_activity.break_down;if(scholActiveContent.hasOwnProperty('mendeley')){options.demographicsObj=contentDemographics;$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawDemographics(options);options.mapContainer=contentMap;var data=options.data.altMetricData;if(totalCount.hasOwnProperty('countries')&&totalCount.countries.hasOwnProperty('mendeley')&&!$.fn.altMetric.helper.isOnlyHK(data,'mendeley')){$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawMap(options);}}
if(options.data.altMetricData.metrics.hasOwnProperty('percentiles')){options.contentBenchmark=contentBenchmark;$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawBenchMark(options);if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_schrAct_end');}}
$.fn.altMetric.buildTab.buildScholarlyActivityTab.isTabDrawn=true;}};$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawHeader=function(options){var contentRow1=options.contentHeader;var content="<span id='headingScholActBubbleContainer'><a id='altmet_heading_snow' aria-haspopup='true' class='altmet_heading_snow' href='#' "
+"title='"
+options.labels.tabs.scholarlyActivity.snowballIconTitle()
+"'></a></span>";contentRow1.append(content).addClass('hasSnowBall');var params={'container':contentRow1,'content':options.labels.tabs.scholarlyActivity.title()};$.fn.altMetric.tabContentHeader(params);var headingsnowballObj=jQuery("#headingScholActBubbleContainer");var dynParams={'section':'ScholActivityHeader','title':options.labels.tabs.scholarlyActivity.title,'dynamicSnowBubbleText':options.labels.tabs.scholarlyActivity.headingSnowBubbleText2};var ScholActHeaderdynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var scholActHeaderparams={'dynamicTextObj':ScholActHeaderdynamicTextObj,'bubblePosition':'positionLeft','targetElement':headingsnowballObj,'bubbleDataTarget':"altmet_heading_snow"};options.params=scholActHeaderparams;$.fn.altMetric.bubble.addBubbleContent(options);};$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawSources=function(options){var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.length!==0&&altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var buckets=counts.length!==0&&counts.hasOwnProperty("buckets")?counts.buckets:{};var scholar_activityCount=buckets.length!==0&&buckets.hasOwnProperty("scholar_activity")&&buckets.scholar_activity.hasOwnProperty('total')?buckets.scholar_activity.total:0;if(scholar_activityCount>0){var sourcesCount=$.fn.altMetric.helper.getKeys(options.data.altMetricData.counts.buckets.scholar_activity.break_down).length;var contentRow2=options.sourcesObj;var sourcesObj1=$("<div>",{'class':"altmet_source_count","text":$.fn.altMetric.helper.getReaderSource(scholar_activityCount,sourcesCount,options)});var sourcesObj2=$("<div>",{'class':"altmet_source_caption","text":options.labels.tabs.scholarlyActivity.sources2()});contentRow2.append(sourcesObj1).append(sourcesObj2);}};$.fn.altMetric.aboutSnowBall=function(options){var params=options.params;var snowballCommonLabels=options.labels.common.snowballBubble;var snowballObj=$("<div>",{'class':"altmet_headerContainer_snowball "+params.section,'id':"altmet_aboutsnowball_bubbleContainer"});var snowballIconObj=$("<a>",{'id':"altmet_"+params.section+"_snowBallIcon",'class':"altmet_scholAct_snowBallIcon altmet_headerContainer_snowBallText",'href':"#snowBall",'aria-haspopup':'true','title':snowballCommonLabels.snowballMetricsTitle(),"text":snowballCommonLabels.snowballMetricsLabel()});var snowballIconId=snowballIconObj.attr("id");params.container.append(snowballObj.append(snowballIconObj));var dynamicTextObj=$("<div>",{'class':"altmet_snowBallBubbleHeader",'text':snowballCommonLabels.snowballMetricsText()});var aboutSnowBallparams={'dynamicTextObj':dynamicTextObj,'bubblePosition':'positionRightLeft','targetElement':snowballObj,'bubbleDataTarget':snowballIconId};options.params=aboutSnowBallparams;$.fn.altMetric.bubble.addBubbleContent(options);return snowballObj;};$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawCard=function(options){var cardObj=$("<div>",{"class":"altmet_cardContainer"});options.cardsObj.append(cardObj);var cardRowObj=$("<div>",{"class":"altmet_cardRow"});cardObj.append(cardRowObj);var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.length!==0&&altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var buckets=counts.length!==0&&counts.hasOwnProperty("buckets")?counts.buckets:{};var scholar_activityCount=buckets.length!==0&&buckets.hasOwnProperty("scholar_activity")&&buckets.scholar_activity.hasOwnProperty('total')?buckets.scholar_activity.total:0;if(scholar_activityCount>0){var readersCount=options.data.altMetricData.counts.buckets.scholar_activity.break_down;var cardLabels=options.labels.tabs.scholarlyActivity.card;var mendeleyPresent=false;var mendelyLabel=cardLabels["mendeley"];var menTitle=options.labels.tabs.overview.scholarlyActivity.mendeleyLinkToolTxt();var mendeleyTxt=options.labels.tabs.overview.scholarlyActivity.MendeleyLink();var countText;var citeuLikecard;var isPreviewflag=false;$.each(readersCount,function(source,count){if(source==='mendeley'){mendeleyPresent=true;countText=(count===0||count>1)?options.labels.tabs.scholarlyActivity.card.mendeley.countdesc():options.labels.tabs.scholarlyActivity.card.mendeley.countdesc.single();if(options.isPreview===true){isPreviewflag=true;}
$.fn.altMetric.helper.drawCards({source:source,count:count,container:cardRowObj,cards:3,header:mendelyLabel.header(),countDesc:countText,isPrepend:true,isMendeley:true,mendeleyTitle:menTitle,mendeleyTxt:mendeleyTxt,isPreview:isPreviewflag});}else{if(count>0){var otherLabel=cardLabels[source];if(typeof otherLabel==='undefined'){otherLabel={header:function(){return source;}};}
countText=count>1?options.labels.tabs.scholarlyActivity.card.citeulike.countdesc():options.labels.tabs.scholarlyActivity.card.citeulike.countdesc.single();citeuLikecard=$.fn.altMetric.helper.drawCards({source:source,count:count,container:cardRowObj,cards:3,header:otherLabel.header(),countDesc:countText});if(options.notInISSNListPreview===true){citeuLikecard.remove();}}}});if(!mendeleyPresent){$.fn.altMetric.helper.drawCards({source:'mendeley',count:0,container:cardRowObj,cards:3,header:mendelyLabel.header(),countDesc:options.labels.tabs.scholarlyActivity.card.mendeley.countdesc.single(),isPrepend:true,isMendeley:true,mendeleyTitle:menTitle,mendeleyTxt:mendeleyTxt});}}};$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawDemographics=function(options){var contentRow3Col1=options.demographicsObj;var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.length!==0&&altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var discipline=counts.hasOwnProperty("discipline")?counts.discipline:{};var dispList=discipline.hasOwnProperty("mendeley")?discipline.mendeley:{};var sources=counts.hasOwnProperty("sources")?counts.sources:{};var status=counts.hasOwnProperty("status")?counts.status:{};var countries=counts.hasOwnProperty("countries")?counts.countries:{};var mendCount=sources.hasOwnProperty("mendeley")?sources.mendeley:0;var meta=altMetricData.hasOwnProperty("meta")?altMetricData.meta:{};var mendeley_uri=meta.hasOwnProperty("mendeley_uri")?meta.mendeley_uri:{};var demoUl;var sortList;var demographicsHeading=$('<div>',{'class':"altmet_demographics_mainHeading"});var mendeleyLink=$("<a>",{'href':mendeley_uri,'target':'_blank','class':'mendeleyView','title':options.labels.tabs.scholarlyActivity.mendelyLink.mendeleyTooltip(),'text':options.labels.tabs.scholarlyActivity.mendelyLink()});var openHidden=$('<span>',{'class':"hidden-label",'text':"opens in new window"});contentRow3Col1.append(demographicsHeading);contentRow3Col1.append(mendeleyLink);contentRow3Col1.append(openHidden);var demoProgressHeader=$('<h4>',{'text':options.labels.tabs.scholarlyActivity.demographicsHeading()});demographicsHeading.append(demoProgressHeader);if(options.data.altMetricData.counts.hasOwnProperty('discipline')){var demographicsDiscipHeading=$('<div>',{'class':"altmet_demographics_subHeading",'text':options.labels.tabs.scholarlyActivity.disciplineHeading()});contentRow3Col1.append(demographicsDiscipHeading);dispList=discipline.hasOwnProperty("mendeley")?discipline.mendeley:{};sortList=$.fn.altMetric.helper.sortByDesc(dispList,mendCount,true);demoUl=$("<ul>",{'class':'altmet_demoList'});contentRow3Col1.append(demoUl);$.fn.altMetric.processDemoGrap(options,demoUl,sortList);}
if(options.data.altMetricData.counts.hasOwnProperty('status')){var demographicsAcademicHeading=$('<div>',{'class':"altmet_demographics_subHeading",'text':options.labels.tabs.scholarlyActivity.academicsHeading()});contentRow3Col1.append(demographicsAcademicHeading);var statusList=status.hasOwnProperty("mendeley")?status.mendeley:{};sortList=$.fn.altMetric.helper.sortByDesc(statusList,mendCount,true);demoUl=$("<ul>",{'class':'altmet_demoAcademyList'});contentRow3Col1.append(demoUl);$.fn.altMetric.processDemoGrap(options,demoUl,sortList);}
if(options.data.altMetricData.counts.hasOwnProperty('countries')&&options.data.altMetricData.counts.countries.hasOwnProperty('mendeley')){var demographicsCountryHeading=$('<div>',{'class':"altmet_demographics_subHeading",'text':options.labels.tabs.scholarlyActivity.countryHeading});contentRow3Col1.append(demographicsCountryHeading);var countryData=countries.hasOwnProperty("mendeley")?countries.mendeley:{};var countryList={};for(code in countryData){countryList[$.fn.altMetric.helper.getCountryName(code)]=countryData[code];}
sortList=$.fn.altMetric.helper.sortByDesc(countryList,mendCount,true);demoUl=$("<ul>",{'class':'altmet_demoCountryList'});contentRow3Col1.append(demoUl);$.fn.altMetric.processDemoGrap(options,demoUl,sortList);}};$.fn.altMetric.processDemoGrap=function(options,demoUl,sortList){var demoUlList=demoUl[0].className;var contentRow3Col1=$(".altmet_demographics");var i=0;var validCount=0;var x=3;var demoDiscip;for(i in sortList){if(sortList[i].number>0){var dispText=sortList[i].demoGraphData.replace(/_/g,' ');var demoGraObj=$("<li>",{'class':'altmet_demoData'});var demoProgress=$("<div>",{'class':'altmet_demoProgress'});$.fn.altMetric.helper.demoProgressBar(demoProgress,sortList[i].number);var demoNum=$("<span>",{'class':'altmet_demoNum','text':sortList[i].number});demoDiscip=$("<span>",{'class':'altmet_demoDiscip','text':dispText});demoUl.append(demoGraObj);demoGraObj.append(demoProgress);demoGraObj.append(demoNum);demoNum.append("%");demoGraObj.append(demoDiscip);validCount++;}}
if(validCount>x){$('.'+demoUlList+' li:lt('+x+')').show();var viewObj=$('<div>',{'class':"altmet_demographics_view"});contentRow3Col1.append(viewObj);var demoTitle=showTheTitle(demoUlList,options);var viewLink=$("<a>",{'href':'#view','class':demoUlList+'_view','title':demoTitle,'text':options.labels.tabs.scholarlyActivity.viewAll()});viewObj.append(viewLink);viewLink.click(function(event){event.preventDefault();x=2;if(viewLink.hasClass('viewLess')){x=3;$('.'+demoUlList+' li').not(':lt('+x+')').hide();$('.'+demoUlList+'_view').text(options.labels.tabs.scholarlyActivity.viewAll()).removeClass('viewLess');$('.'+demoUlList+'_view').attr('title',demoTitle);}else{$('.'+demoUlList+' li:gt('+x+')').show();$('.'+demoUlList+'_view').text(options.labels.tabs.scholarlyActivity.viewLess()).addClass('viewLess');$('.'+demoUlList+'_view').attr('title',options.labels.tabs.scholarlyActivity.viewLess());}});}else{$('.'+demoUlList+' li:lt('+x+')').show();}};function showTheTitle(type,options){var viewAllTitle={altmet_demoAcademyList:options.labels.tabs.scholarlyActivity.title.viewAll.academy(),altmet_demoList:options.labels.tabs.scholarlyActivity.title.viewAll.discipline(),altmet_demoCountryList:options.labels.tabs.scholarlyActivity.title.viewAll.country()};return viewAllTitle[type];}
$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawMap=function(options){options=$.fn.altMetric.helper.processMapData(options,"Mendeley");var mapData=options.mapData;var mapMin=options.mapDataExtreams.min;var mapMax=options.mapDataExtreams.max;var maxValLabelPlural=options.labels.tabs.overview.scholarlyActivity.mendeleyCountText1(mapMax.value);var maxValLabelSingular=options.labels.tabs.overview.scholarlyActivity.mendeleyCountText2(mapMax.value);var minValLabelPlural=options.labels.tabs.overview.scholarlyActivity.mendeleyCountText1(mapMin.value);var minValLabelSingular=options.labels.tabs.overview.scholarlyActivity.mendeleyCountText2(mapMin.value);var maxValLabel=$.fn.altMetric.helper.getSingularPlural(mapMax.value,maxValLabelSingular,maxValLabelPlural);var minValLabel=$.fn.altMetric.helper.getSingularPlural(mapMin.value,minValLabelSingular,minValLabelPlural);var mapObject=$(options.mapContainer).highcharts('Map',{title:false,exporting:{enabled:false},credits:{enabled:false},legend:{enabled:true,align:'right',verticalAlign:'bottom',itemMarginTop:4,floating:true,title:{text:options.labels.tabs.highmap.legend.title(),style:{color:'#5c5c5c',fontSize:'14px',fontWeight:'bold',fontFamily:'"Arial-BoldMT","Arial Bold","Arial"'}},useHTML:true,x:-85},tooltip:{formatter:function(){return $.fn.altMetric.helper.drawTooltip(this,"Mendeley",options);},shared:false,shadow:false,useHTML:true,borderWidth:0,backgroundColor:null,style:{padding:0}},subtitle:false,colorAxis:{min:mapMin.percentage,max:mapMax.percentage,minColor:'#f5e6e8',maxColor:'#9C0520',tickPositions:[(mapMin.percentage-.001),mapMax.percentage],tickLength:-10,labels:{step:1,y:344,x:295,useHTML:true,style:{color:'#191919',fontSize:'14px',fontFamily:'"ArialMT","Arial"'},formatter:function(){if(this.value<=mapMin.percentage){return minValLabel;}
if(this.value>=mapMax.percentage){return maxValLabel;}}}},series:[{data:mapData,mapData:Highcharts.maps['custom/world'],joinBy:'hc-key',name:'Country',nullColor:"#ffffff",states:{hover:{color:'#88C3BF'}}}]});$.fn.altMetric.scholarlyActivityMap=mapObject;mapObject.find(".highcharts-legend-title text").attr("x",'-70');if(mapObject.find(".highcharts-axis-labels.highcharts-coloraxis-labels > span").length>1){mapObject.find(".highcharts-axis-labels.highcharts-coloraxis-labels > span:last-child").addClass('highchartsLegendMaxLabel');}};$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawMap.processMapData=function(options){var data=options.data.altMetricData;if(data.hasOwnProperty('counts')&&data.counts.hasOwnProperty('countries')&&data.counts.countries.hasOwnProperty('mendeley')&&data.counts.hasOwnProperty('sources')&&data.counts.sources.hasOwnProperty('mendeley')){var countryValues=data.counts.countries.mendeley;var mendCount=data.counts.sources.mendeley;var mapData=[];$.each(countryValues,function(key,value){var percentage=$.fn.altMetric.helper.getPercentile(value,mendCount);if(percentage>0){var countryData={"hc-key":key.toLowerCase(),"value":percentage,'count':value};mapData.push(countryData);}});options.mapData=mapData;}
return options;};$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawBenchMark=function(options){var header=options.labels.tabs.scholarlyActivity.headingBenchmark();var headDetail=options.labels.tabs.scholarlyActivity.benchmarkCaption();var title=$("<div>",{'class':"altmet_overview_subHeading"});var subcontainer=$("<h4>",{'class':"altmet_benchMark_Icon","text":header});var subtitle=$("<div>",{'class':"altmet_overview_caption","text":headDetail});var helpIconBubbleContainer=$("<span>",{"id":"scholActbMarkHelpBubbleContainer"});var helpIcon=$("<a>",{'class':"benchmarking_help_icon","id":"scholBenchmarking_help_icon","href":"#",'title':options.labels.tabs.overview.benchmark.icontooltiptext()});var benDetail=$("<div>",{'class':"altmet_ben_detail"});var container=options.contentBenchmark;container.append(title);title.append(subcontainer);title.append(helpIconBubbleContainer.append(helpIcon));options.becnchMarkObj=helpIconBubbleContainer;options.bubbleDataId=helpIcon.attr("id");$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawBenchMark.addBubbleContent(options);benDetail.append(subtitle);var altMetricData=options.data.altMetricData;var data=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var optionsJsonOutput={};var optionsType={};options.benchmarkType=optionsType;for(var k=0;k<data.length;k++){var inpObj=data[k];var subjDesc=inpObj["subject_description"];var benType=inpObj["benchmark_type"];var progressBarCnt=inpObj["context_for_score"];optionsJsonOutput[subjDesc]=progressBarCnt;optionsType[subjDesc]=benType;}
var optionsTypeKeys=$.fn.altMetric.helper.getKeys(optionsType);var compareRow;if(options.notInISSNListPreview!==true){if(optionsType[optionsTypeKeys[0]]==='doctype'){compareRow=$("<div>",{'class':"altmet_ben_overview_caption",'html':options.labels.tabs.scholarlyActivity.benchmarkCompareToDoctype("<span></span>")});}else{compareRow=$("<div>",{'class':"altmet_ben_overview_caption",'html':options.labels.tabs.scholarlyActivity.benchmarkCompareTo("<span></span>")});}
options.compareRow=compareRow;}
var selectBox=$("<select>",{'class':"altmet_combo"});var saList=$("<ul>",{'class':"altmet_list"});var menLi=$("<li>",{'class':"altmet_item"});var citeLi=$("<li>",{'class':"altmet_item"});var metricsContainer=$('<div>',{'class':'altmet_scholar_activity'});var allTitleCter=$('<div>',{'class':'altmet_allTitleCter','text':options.labels.tabs.overview.scholarlyActivity.benchMarkScholarText()});var allProgBar=$("<div>",{'class':"altmet_scBenProgress"});var menProgContainer=$('<div>',{'class':'altmet_scholar_activity_item'});var menTitleCter=$('<div>',{'class':'altmet_barTitleCter','text':options.labels.tabs.overview.cards.mendeley.header()});var menProgBar=$("<div>",{'class':"altmet_scMenProgress"});var citeProgContainer=$('<div>',{'class':'altmet_scholar_activity_item'});var citeTitleCter=$('<div>',{'class':'altmet_barTitleCter','text':options.labels.tabs.scholarlyActivity.card.citeulike.header()});var citeProgBar=$("<div>",{'class':"altmet_scCiteProgress"});benDetail.append(compareRow);container.append(benDetail);var inSuffData=options.labels.tabs.scholarlyActivity.progressbar.insuffDataText();data=$.fn.altMetric.helper.getKeys(optionsJsonOutput);var allProgProgressLabel;var menProgProgressLabel;var citeProgProgressLabel;var i=0;var allCount=options.data.altMetricData.counts.buckets.scholar_activity.total;var menCount=options.data.altMetricData.counts.buckets.scholar_activity.break_down.mendeley;var citeCount=options.data.altMetricData.counts.buckets.scholar_activity.break_down.citeulike;if(data.length>1&&typeof compareRow!=="undefined"){compareRow.find("span:first-child").append(selectBox);}
var scoActBenchOptions=[];$.each(data,function(index,item){if(typeof compareRow!=="undefined"){if(data.length>1){var selectOptions="<option value='"
+item+"'>"+item+"</option>";selectBox.append(selectOptions);scoActBenchOptions.push(selectOptions);}else{compareRow.find("span:first-child").append(subjDesc);}}
if(i===0){options.subjectTxt=options.labels.tabs.scholarlyActivity.benchmarkCompareTo("<span></span>");options.docTxt=options.labels.tabs.scholarlyActivity.benchmarkCompareToDoctype("<span></span>");var saPercent=optionsJsonOutput[item].scholar_activity;var suffixText;var percentileTxt;var perTooltipTxt;if(typeof allCount!=="undefined"&&options.notInISSNListPreview!==true){suffixText=$.fn.altMetric.helper.ordinalSuffix(saPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(saPercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(allProgBar).progressbar({'value':saPercent}).attr('title',perTooltipTxt);allProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"allProgProgressLabel",'html':percentileTxt});var allCnt=$('<span>',{'class':"altmet_overview_count",'text':" - "+allCount});allTitleCter.append(allCnt);metricsContainer.append(allTitleCter);metricsContainer.append(allProgBar);metricsContainer.append(allProgProgressLabel);benDetail.append(metricsContainer);container.append(benDetail);}
if(typeof menCount!=="undefined"&&options.notInISSNListPreview!==false){var menPercent=optionsJsonOutput[item].mendeley;suffixText=$.fn.altMetric.helper.ordinalSuffix(menPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(menPercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(menProgBar).progressbar({'value':menPercent}).attr('title',perTooltipTxt);menProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"menProgProgressLabel",'html':percentileTxt});menCount=$('<span>',{'class':"altmet_overview_count",'text':" - "+menCount});menTitleCter.append(menCount);menProgContainer.append(menTitleCter);menProgContainer.append(menProgBar);menProgContainer.append(menProgProgressLabel);menLi.append(menProgContainer);saList.append(menLi);benDetail.append(saList);container.append(benDetail);}
if(typeof citeCount!=="undefined"&&options.notInISSNListPreview!==true){var undef=false;var citePercent=optionsJsonOutput[item].citeulike;var citeText;if(typeof citePercent==="undefined"){citeText="Insufficent data";undef=true;}else{citeText=options.labels.tabs.overview.benchmarkPercentile(citePercent);}
suffixText=$.fn.altMetric.helper.ordinalSuffix(citePercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(citePercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(citeProgBar).progressbar({'value':citePercent}).attr('title',perTooltipTxt);citeProgProgressLabel=$('<span>',{'class':"altmet_progress_label",'id':"citeProgProgressLabel",'html':percentileTxt});citeCount=$('<span>',{'class':"altmet_overview_count",'text':" - "+citeCount});citeTitleCter.append(citeCount);citeProgContainer.append(citeTitleCter);citeProgContainer.append(citeProgBar);citeProgContainer.append(citeProgProgressLabel);citeLi.append(citeProgContainer);saList.append(citeLi);benDetail.append(saList);container.append(benDetail);}}
i++;});options.scoActBenchOptions=scoActBenchOptions;if(options.notInISSNListPreview!==true){$(document.body).on('change','.altmet_combo',options,function(event){$.fn.altMetric.helper.toggleLoadingIcon({isShow:true,loadContainer:container});var options=event.data;var title=this.value;var percent=optionsJsonOutput[title].scholar_activity;var menPercent=optionsJsonOutput[title].mendeley;var citePercent=optionsJsonOutput[title].citeulike;var allProgToolTxt;var citeProgToolTxt;var menProgToolTxt;var suffixText;var percentileTxt;$(allProgBar).progressbar("option","value",0);$(menProgBar).progressbar("option","value",0);if(typeof citeCount!=="undefined"&&$(citeProgBar)&&$(citeProgBar).length){$(citeProgBar).progressbar("option","value",0);}
$('#allProgProgressLabel').html('');$('#menProgProgressLabel').html('');$('#citeProgProgressLabel').html('');setTimeout(function(){if(typeof citePercent==="undefined"&&options.notInISSNListPreview!==true){$('#citeProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());citeProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();citePercent=0;}else{suffixText=$.fn.altMetric.helper.ordinalSuffix(citePercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);citeProgToolTxt=percentileTxt;$('#citeProgProgressLabel').html(percentileTxt);}
if(typeof menPercent==="undefined"&&options.notInISSNListPreview!==false){$('#menProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());menProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();menPercent=0;}else{$(menProgBar).progressbar("option","value",0);$('#menProgProgressLabel').html('');suffixText=$.fn.altMetric.helper.ordinalSuffix(menPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);$('#menProgProgressLabel').html(percentileTxt);menProgToolTxt=percentileTxt;}
if(typeof percent==="undefined"&&options.notInISSNListPreview!==true){$('#allProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());allProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();percent=0;}else{suffixText=$.fn.altMetric.helper.ordinalSuffix(percent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);$('#allProgProgressLabel').html(percentileTxt);allProgToolTxt=percentileTxt;}
$(allProgBar).progressbar({'value':percent}).attr('title',allProgToolTxt);allProgProgressLabel=$('<span>',{'class':'altmet_progress_label','html':percentileTxt});percent=optionsJsonOutput[title].mendeley;$(menProgBar).progressbar({'value':menPercent}).attr('title',menProgToolTxt);$(citeProgBar).progressbar({'value':citePercent}).attr('title',citeProgToolTxt);$.fn.altMetric.helper.toggleLoadingIcon({isShow:false,loadContainer:container});},500);var compareRow=options.compareRow;var selectBox=["<select class='altmet_combo'>",options.scoActBenchOptions.join(''),"</select>"].join('');var selectedIndex=$(this).find(":selected").index();var optionsType=options.benchmarkType;if(optionsType[title]==="subject"){if(!options.hasOwnProperty("docTxt")){options.docTxt=compareRow.html();}
compareRow.html(options.subjectTxt);compareRow.find("span:first-child").append(selectBox);compareRow.find("select").get(0).selectedIndex=selectedIndex;}else{if(!options.hasOwnProperty("subjectTxt")){options.subjectTxt=compareRow.html();}
compareRow.html(options.docTxt);compareRow.find("span:first-child").append(selectBox);compareRow.find("select").get(0).selectedIndex=selectedIndex;}});}};$.fn.altMetric.buildTab.buildScholarlyActivityTab.drawBenchMark.addBubbleContent=function(options){var benchmarkDynamicText='<span class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.overview.ScholarlyActivity.benchmarkbubbleText1()
+'</span><ul class="altmet_scholAct_benchMarkBubble"><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.overview.ScholarlyActivity.benchmarkbubbleliText1()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.overview.ScholarlyActivity.benchmarkbubbleliText2()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.overview.ScholarlyActivity.benchmarkbubbleliText3()
+'</li></ul><span class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.overview.ScholarlyActivity.benchmarkbubbleText2()+'</span>';var headingsnowballObj=jQuery("#bMarkHelpBubbleContainer");var dynParams={'section':'benchmarkbubble','dynamicSnowBubbleText':benchmarkDynamicText};var benchmarkDynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':benchmarkDynamicTextObj,'bubblePosition':'positionLeft','targetElement':headingsnowballObj,'bubbleDataTarget':options.bubbleDataId};options.params=params;$.fn.altMetric.bubble.addBubbleContentWithoutSnow(options);};$.fn.altMetric.buildScholarlyCommentaryTab=function(options){if(!$.fn.altMetric.buildScholarlyCommentaryTab.hasOwnProperty("isTabDrawn")){if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_schCom_start');}
var tabContainer=options.tabUI.newPanel;var tabContentContainer=$('<div>',{'class':"altmet_panelContent scholarlyCommentary"});tabContainer.append(tabContentContainer);var contentHeader=$('<div>',{'class':"altmet_headerContainer hasSnowBall"});var contentSources=$('<div>',{'class':"altmet_sources"});var ScholarlyCommentarycontent=$('<div>',{'class':"altmet_streamContent"});tabContentContainer.append(contentHeader).append(contentSources).append(ScholarlyCommentarycontent);var dynParams={'section':'schCommentry','title':options.labels.tabs.scholarlyCommentary.title,'dynamicSnowBubbleText':options.labels.tabs.scholarlyCommentary.scholCommSnowBubbleText2};var schCommentrydynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'container':contentHeader,'content':options.labels.tabs.scholarlyCommentary.title(),'hasSnowFlakes':true,'source':'scholar_commentary','snowballIconTitle':options.labels.tabs.scholarlyCommentary.snowballIconTitle,'labels':options.labels,'dynamicTextObj':schCommentrydynamicTextObj};$.fn.altMetric.tabContentHeader(params);options.params={'container':ScholarlyCommentarycontent,'section':'scholar_commentary'};$.fn.altMetric.aboutSnowBall(options);var itemsCount=options.data.altMetricData.counts.buckets.scholar_commentary.total;var headerDescription;if(itemsCount>1){headerDescription=options.labels.tabs.scholarlyCommentary.headerCountTxt1(itemsCount);}else{headerDescription=options.labels.tabs.scholarlyCommentary.headerCountTxt2(itemsCount);}
var countContainer=$('<div>',{'class':"altmet_source_count",'text':headerDescription});var massCaption=$('<div>',{'class':"altmet_source_caption",'text':options.labels.tabs.scholarlyCommentary.headerCount.explanationTxt()});contentSources.append(countContainer).append(massCaption);var displaySchArray=['blogs','review','wikipedia','qa'];var publicationReview=['f1000','pubpeer','publons'];var orderArr=[];var publicationReviewObj;var schComItems=options.data.altMetricData.counts.buckets.scholar_commentary.break_down;var index=0;$.each(schComItems,function(key,value){index++;var title,className;var streamContent=$('<div>',{'class':"altmet_streamContent"});options.contentSources=streamContent;var refIndex=displaySchArray.indexOf(key);if(refIndex!==-1){orderArr[refIndex]=streamContent;}
if(publicationReview.indexOf(key)!==-1){title=options.labels.tabs.scholarlyCommentary.postPublication.title();if(typeof publicationReviewObj==='undefined'){var reviewMainTitle=$('<h3>',{'text':title});var logo=$('<span>',{'class':"altmet_schol_comment"}).addClass('reviews');publicationReviewHeader=$('<div>',{'class':"altmet_overview_subHeading"}).append(logo).append(reviewMainTitle);publicationReviewObj=$('<div>',{'class':"altmet_reviewContainer altmet_streamContent"}).append(publicationReviewHeader);orderArr[1]=publicationReviewObj;}
publicationReviewObj.append(streamContent);}
if(key==="qa"){title=options.labels.tabs.scholarlyCommentary.qa.title();className="qa";}else if(key==="f1000"){title=options.labels.tabs.scholarlyCommentary.f1000.title();className=key;}else{title=key;className=key;}
streamContent.addClass(className);var heading=$('<div>',{'class':"altmet_overview_subHeading"});var subTitle;if(publicationReview.indexOf(key)!==-1){subTitle=$('<h4>',{'text':title});}else{subTitle=$('<h3>',{'text':title});}
var logo1=$('<span>',{'class':"altmet_schol_comment "}).addClass(className);heading.append(logo1);streamContent.append(heading);heading.append(subTitle);if(publicationReview.indexOf(key)===1||publicationReview.indexOf(key)===2){var itemsCount=options.data.altMetricData.counts.sources[key];var stream=options.data.altMetricData.posts[key][0];var url;title=options.labels.tabs.scholarlyCommentary.postPublication[key].title;if(publicationReview.indexOf(key)===1){url=stream.pubpeer_publication_url;}else if(publicationReview.indexOf(key)===2){url=stream.publons_article_url;}
var text=options.labels.tabs.scholarlyCommentary.postPublication[key].hideStramTxt(itemsCount);if(itemsCount===1){text=options.labels.tabs.scholarlyCommentary.postPublication[key].hideStramTxSingt();}
var verticalLine=$('<div>',{'class':"altmet_engage_line"});title=$('<a>',{'class':"altmet_overview_post_title",'text':text,'title':title,'target':"_blank",'href':url});options.contentSources.append(verticalLine.append(title));}else{var anchorTitle=options.labels.tabs.scholarlyCommentary.postTitleText;$.fn.altMetric.helper.drawFullFeedStream({'stream':options.data.altMetricData.posts[key],'anchorTitle':anchorTitle,'container':options.contentSources,'section':'scholar_commentary '
+key,'viewMore':options.labels.tabs.stream.viewMore,'viewLess':options.labels.tabs.stream.viewLess,'defaultDisplayCount':10,'totalFeedCount':value,'getNextPage':options.externalConfigurations.getNextPage,'timeStampTitle':options.labels.tabs.socialActivity.feedLink.title(),'source':key});}});if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_schCom_end');}
if(orderArr.length){var orderedItems=$.map(orderArr,function(n){if(typeof n!=='undefined'){return n;}});tabContentContainer.append(orderedItems);}
$.fn.altMetric.buildScholarlyCommentaryTab.isTabDrawn=true;}};$.fn.altMetric.buildMassMediaTab=function(options){if(!$.fn.altMetric.buildMassMediaTab.hasOwnProperty("isTabDrawn")){if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_massMed_start');}
var tabContainer=options.tabUI.newPanel;var tabContentContainer=$('<div>',{'class':"altmet_panelContent massMedia"});tabContainer.append(tabContentContainer);var contentHeader=$('<div>',{'class':"altmet_headerContainer hasSnowBall"});var contentSources=$('<div>',{'class':"altmet_sources"});var massMediacontent=$('<div>',{'class':"altmet_streamContent"});tabContentContainer.append(contentHeader).append(contentSources).append(massMediacontent);var dynParams={'section':'massmedia','title':options.labels.tabs.massMedia.title,'dynamicSnowBubbleText':options.labels.tabs.massMedia.headingSnowBubbleText2};var massMediadynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'container':contentHeader,'content':options.labels.tabs.massMedia.title(),'hasSnowFlakes':true,'source':'mass_media','snowballIconTitle':options.labels.tabs.massMedia.snowballIconTitle,'labels':options.labels,'dynamicTextObj':massMediadynamicTextObj};$.fn.altMetric.tabContentHeader(params);options.params={'container':massMediacontent,'section':'massMedia'};$.fn.altMetric.aboutSnowBall(options);var itemsCount=options.data.altMetricData.counts.sources.news;var sourceCount=options.data.altMetricData.counts.users.news;var headerDescription;if(itemsCount>1&&sourceCount>1){headerDescription=options.labels.tabs.massMedia.countdesc1;}else if(itemsCount>1){headerDescription=options.labels.tabs.massMedia.countdesc2;}else{headerDescription=options.labels.tabs.massMedia.countdesc3;}
var countContainer=$('<div>',{'class':"altmet_source_count",'text':headerDescription(itemsCount,sourceCount)});var massCaption=$('<div>',{'class':"altmet_source_caption",'text':options.labels.tabs.overview.massMedia.captionText()});contentSources.append(countContainer).append(massCaption);options.contentSources=massMediacontent;options.massMediaFeedCount=itemsCount;$.fn.altMetric.buildMassMediaTab.drawStreamingContent(options);var stream=options.data.altMetricData.posts.news;if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_massMed_end');}
$.fn.altMetric.buildMassMediaTab.isTabDrawn=true;}};$.fn.altMetric.buildMassMediaTab.drawStreamingContent=function(options){var stream=options.data.altMetricData.posts.news;var count=options.massMediaFeedCount;var anchorTitle=options.labels.tabs.scholarlyCommentary.postTitleText;$.fn.altMetric.helper.drawFullFeedStream({'stream':stream,'anchorTitle':anchorTitle,'container':options.contentSources,'section':'mass_media','viewMore':options.labels.tabs.stream.viewMore,'viewLess':options.labels.tabs.stream.viewLess,'totalFeedCount':count,'getNextPage':options.externalConfigurations.getNextPage,'timeStampTitle':options.labels.tabs.socialActivity.feedLink.title(),'source':'news'});};$.fn.altMetric.buildSocialActivityTab=function(options){if(!$.fn.altMetric.buildSocialActivityTab.hasOwnProperty("isTabDrawn")){if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_socBM_start');}
var tabContainer=options.tabUI.newPanel;var tabContentContainer=$('<div>',{'class':"altmet_panelContent socialActivity"});tabContainer.append(tabContentContainer);var contentHeader=$('<div>',{'class':"altmet_headerContainer"});var contentSources=$('<div>',{'class':"altmet_sources"});var streamContent=$('<div>',{'class':"altmet_streamContent"});var contentCards=$('<div>',{'class':"altmet_cardContainer"});var contentbenchmark=$('<div>',{'class':"altmet_benchmark"});var contentDemoMap=$('<div>',{'class':"altmet_demoMap"});var contentdemograph=$('<div>',{'class':"altmet_demograph"});var contentMap=$('<div>',{'class':"altmet_twitterMap"});var clearObj=$('<div>',{'class':"clear"});contentDemoMap.append(contentdemograph).append(contentMap).append(clearObj);tabContentContainer.append(contentHeader).append(contentSources).append(contentCards).append(streamContent).append(contentbenchmark).append(contentDemoMap);options.contentHeader=contentHeader;$.fn.altMetric.buildSocialActivityTab.drawHeader(options);options.sourcesObj=contentSources;$.fn.altMetric.buildSocialActivityTab.drawSources(options);options.cardContainer=contentCards;$.fn.altMetric.buildSocialActivityTab.drawCard(options);options.streamContent=streamContent;$.fn.altMetric.buildSocialActivityTab.drawStreamingContent(options);options.contentbenchmark=contentbenchmark;if(options.data.altMetricData.metrics.hasOwnProperty('percentiles')){$.fn.altMetric.buildSocialActivityTab.drawBenchMark(options);}
options.contentdemograph=contentdemograph;var totalCount=options.data.altMetricData.counts;if(totalCount.hasOwnProperty('countries')&&totalCount.countries.hasOwnProperty('twitter')){options.mapContainer=contentMap;var data=options.data.altMetricData;if(!$.fn.altMetric.helper.isOnlyHK(data,'twitter')){$.fn.altMetric.buildSocialActivityTab.drawMap(options);$.fn.altMetric.buildSocialActivityTab.drawDemograph(options);}}
options.params={'container':contentSources,'section':'socialAct'};$.fn.altMetric.aboutSnowBall(options);if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_socBM_end');}
$.fn.altMetric.buildSocialActivityTab.isTabDrawn=true;}};$.fn.altMetric.buildSocialActivityTab.drawDemograph=function(options){var socAct_DemographContainer=options.contentdemograph;var demographicsHeading=$('<div>',{'class':"altmet_demographics_mainHeading"});var demoProgressHeader=$('<h3>',{'text':options.labels.tabs.socialActivity.demographics.twitter()});demographicsHeading.append(demoProgressHeader);socAct_DemographContainer.append(demographicsHeading);var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.length!==0&&altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var countries=counts.hasOwnProperty("countries")?counts.countries:{};var sources=counts.hasOwnProperty("sources")?counts.sources:{};var twitterdata=countries.hasOwnProperty("twitter")?countries.twitter:{};var twitCount=sources.hasOwnProperty("twitter")?sources.twitter:0;var sortList=$.fn.altMetric.helper.sortByDesc(twitterdata,twitCount,false);var validCount=0;var x=6;var demoUl=$("<ul>",{'class':'altmet_SocialActivity_demoCountryList'});for(i in sortList){if(sortList[i].number>0){var demoGraObj=$("<li>",{'class':'altmet_demoData'});var demoProgress=$("<div>",{'class':'altmet_demoProgress'});$.fn.altMetric.helper.demoProgressBar(demoProgress,sortList[i].number);var demoNum=$("<span>",{'class':'altmet_demoNum','text':sortList[i].number});var demoCountry=$.fn.altMetric.helper.getCountryName(sortList[i].demoGraphData);var demoDiscip=$("<span>",{'class':'altmet_demoDiscip','text':demoCountry});demoUl.append(demoGraObj);demoGraObj.append(demoProgress);demoGraObj.append(demoNum);demoNum.append("%");demoGraObj.append(demoDiscip);validCount++;}}
socAct_DemographContainer.append(demoUl);if(validCount>x){$('.altmet_SocialActivity_demoCountryList li:lt('+x+')').show();var viewObj=$('<div>',{'class':"altmet_demographics_view"});socAct_DemographContainer.append(viewObj);var viewLink=$("<a>",{'href':'#view','class':'altmet_SocialActivity_demoCountryList_view','title':options.labels.tabs.socialActivity.demographics.twitter.viewall.title(),'text':options.labels.tabs.scholarlyActivity.viewAll()});viewObj.append(viewLink);viewLink.click(function(event){event.preventDefault();x=5;if(viewLink.hasClass('viewLess')){x=6;$('.altmet_SocialActivity_demoCountryList li').not(':lt('+x+')').hide();$('.altmet_SocialActivity_demoCountryList_view').text(options.labels.tabs.scholarlyActivity.viewAll()).removeClass('viewLess');$('.altmet_SocialActivity_demoCountryList_view').attr('title',options.labels.tabs.socialActivity.demographics.twitter.viewall.title());}else{$('.altmet_SocialActivity_demoCountryList li:gt('
+x+')').show();$('.altmet_SocialActivity_demoCountryList_view').text(options.labels.tabs.scholarlyActivity.viewLess()).addClass('viewLess');$('.altmet_SocialActivity_demoCountryList_view').attr('title',options.labels.tabs.socialActivity.demographics.twitter.viewless.title());}});}else{$('.altmet_SocialActivity_demoCountryList li:lt('+x+')').show();}};$.fn.altMetric.buildSocialActivityTab.drawBenchMark=function(options){var socAct_benchmarkcontainer=options.contentbenchmark;var title=$("<div>",{'class':"altmet_overview_subHeading"});var subcontainer=$("<h3>",{'class':"altmet_benchMark_Icon","text":options.labels.tabs.scholarlyActivity.headingBenchmark()});var subtitle=$("<div>",{'class':"altmet_overview_caption","text":options.labels.tabs.socialActivity.benchmarkCaption()});var helpIconBubbleContainer=$("<span>",{"id":"SocAct_bMarkHelpBubbleContainer"});var helpIcon=$("<a>",{'class':"SocAct_benchmarking_help_icon","id":"SocAct_benchmarking_help_icon","href":"#",'title':options.labels.tabs.socialActivity.benchmark.icontooltiptext()});var socAct_benDetail=$("<div>",{'class':"altmet_socAct_benDetail"});socAct_benchmarkcontainer.append(title);title.append(subcontainer);title.append(helpIconBubbleContainer.append(helpIcon));$.fn.altMetric.buildSocialActivityTab.drawBenchMark.addBubbleContent(options);socAct_benDetail.append(subtitle);var altMetricData=options.data.altMetricData;var data=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var optionsJsonOutput={};var optionsType={};options.socAct_benchmarkType=optionsType;for(var j=0;j<data.length;j++){var inpObj=data[j];var subjDesc=inpObj["subject_description"];var benType=inpObj["benchmark_type"];var progressBarCnt=inpObj["context_for_score"];optionsJsonOutput[subjDesc]=progressBarCnt;optionsType[subjDesc]=benType;}
var optionsTypeKeys=$.fn.altMetric.helper.getKeys(optionsType);var compareRow;if(optionsType[optionsTypeKeys[0]]==='subject'){compareRow=$("<div>",{'class':"altmet_ben_overview_caption",'html':options.labels.tabs.scholarlyActivity.benchmarkCompareTo("<span></span>")});}else if(optionsType[optionsTypeKeys[0]]==='doctype'){compareRow=$("<div>",{'class':"altmet_ben_overview_caption",'html':options.labels.tabs.scholarlyActivity.benchmarkCompareToDoctype("<span></span>")});}
options.socAct_compareRow=compareRow;var selectBox=$("<select>",{'class':"altmet_socAct_combo"});var socAct_List=$("<ul>",{'class':"altmet_list"});var twitLi=$("<li>",{'class':"altmet_item"});var fbLi=$("<li>",{'class':"altmet_item"});var gpLi=$("<li>",{'class':"altmet_item"});var swLi=$("<li>",{'class':"altmet_item"});var reditLi=$("<li>",{'class':"altmet_item"});var pintLi=$("<li>",{'class':"altmet_item"});var linkdLi=$("<li>",{'class':"altmet_item"});var socAct_metricsContainer=$('<div>',{'class':'altmet_scholar_activity'});var socAct_allTitleCter=$('<div>',{'class':'altmet_allTitleCter','text':options.labels.tabs.overview.socialActivity.benchmark.activity()});var socAct_allProgBar=$("<div>",{'class':"altmet_scBenProgress"});var twitProgContainer=$('<div>',{'class':'altmet_scholar_activity_item'});var twitTitleCter=$('<div>',{'class':'altmet_barTitleCter','text':options.labels.tabs.overview.cards.twitter.header()});var twitProgBar=$("<div>",{'class':"altmet_scMenProgress"});var fbProgContainer=$('<div>',{'class':'altmet_scholar_activity_item'});var fbTitleCter=$('<div>',{'class':'altmet_barTitleCter','text':options.labels.tabs.overview.cards.facebook.header()});var fbProgBar=$("<div>",{'class':"altmet_scCiteProgress"});var gpProgContainer=$('<div>',{'class':'altmet_scholar_activity_item'});var gpTitleCter=$('<div>',{'class':'altmet_barTitleCter','text':options.labels.tabs.overview.cards.googleplus.header()});var gpProgBar=$("<div>",{'class':"altmet_scCiteProgress"});var swProgContainer=$('<div>',{'class':'altmet_scholar_activity_item'});var swTitleCter=$('<div>',{'class':'altmet_barTitleCter','text':options.labels.tabs.overview.cards.weibo.header()});var swProgBar=$("<div>",{'class':"altmet_scCiteProgress"});var reditProgContainer=$('<div>',{'class':'altmet_scholar_activity_item'});var reditTitleCter=$('<div>',{'class':'altmet_barTitleCter','text':options.labels.tabs.overview.cards.reddit.header()});var reditProgBar=$("<div>",{'class':"altmet_scCiteProgress"});var pintProgContainer=$('<div>',{'class':'altmet_scholar_activity_item'});var pintTitleCter=$('<div>',{'class':'altmet_barTitleCter','text':options.labels.tabs.overview.cards.pinterest.header()});var pintProgBar=$("<div>",{'class':"altmet_scCiteProgress"});var linkdProgContainer=$('<div>',{'class':'altmet_scholar_activity_item'});var linkdTitleCter=$('<div>',{'class':'altmet_barTitleCter','text':options.labels.tabs.overview.cards.linkedin.header()});var linkdProgBar=$("<div>",{'class':"altmet_scCiteProgress"});socAct_benDetail.append(compareRow);socAct_benchmarkcontainer.append(socAct_benDetail);var inSuffData=options.labels.tabs.scholarlyActivity.progressbar.insuffDataText();data=$.fn.altMetric.helper.getKeys(optionsJsonOutput);var socAct_allProgProgressLabel;var twitProgProgressLabel;var fbProgProgressLabel;var gpProgProgressLabel;var swProgProgressLabel;var reditProgProgressLabel;var pintProgProgressLabel;var linkdProgProgressLabel;var i=0;var counts=altMetricData.length!==0&&altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var buckets=counts.length!==0&&counts.hasOwnProperty('buckets')?counts.buckets:{};var social_activity_count=buckets.length!==0&&buckets.hasOwnProperty('social_activity')?buckets.social_activity:{};var break_down_data=social_activity_count.length!==0&&social_activity_count.hasOwnProperty('break_down')?social_activity_count.break_down:{};var allCount=social_activity_count.total;var twitterCount=break_down_data.twitter;var fbCount=break_down_data.facebook;var gpCount=break_down_data.googleplus;var swCount=break_down_data.weibo;var reditCount=break_down_data.reddit;var pintCount=break_down_data.pinterest;var linkdCount=break_down_data.linkedin;if(data.length>1){compareRow.find("span:first-child").append(selectBox);}
var socAct_BenchOptions=[];$.each(data,function(index,item){if(data.length>1){var selectOptions="<option value='"+item
+"'>"+item+"</option>";selectBox.append(selectOptions);socAct_BenchOptions.push(selectOptions);}else{compareRow.find("span:first-child").append(subjDesc);}
if(i===0){options.socAct_subjectTxt=options.labels.tabs.scholarlyActivity.benchmarkCompareTo("<span></span>");options.socAct_docTxt=options.labels.tabs.scholarlyActivity.benchmarkCompareToDoctype("<span></span>");var saPercent=optionsJsonOutput[item].social_activity;var suffixText;var percentileTxt;var perTooltipTxt;if(typeof allCount!=="undefined"){suffixText=$.fn.altMetric.helper.ordinalSuffix(saPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(saPercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(socAct_allProgBar).progressbar({'value':saPercent}).attr('title',perTooltipTxt);var twitterPercent=optionsJsonOutput[item].twitter;socAct_allProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"socAct_allProgProgressLabel",'html':percentileTxt});var allCnt=$('<span>',{'class':"altmet_overview_count",'text':" - "+allCount});socAct_allTitleCter.append(allCnt);socAct_metricsContainer.append(socAct_allTitleCter);socAct_metricsContainer.append(socAct_allProgBar);socAct_metricsContainer.append(socAct_allProgProgressLabel);socAct_benDetail.append(socAct_metricsContainer);socAct_benchmarkcontainer.append(socAct_benDetail);}
if(typeof twitterCount!=="undefined"){suffixText=$.fn.altMetric.helper.ordinalSuffix(twitterPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(twitterPercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(twitProgBar).progressbar({'value':twitterPercent}).attr('title',perTooltipTxt);twitProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"twitProgProgressLabel",'html':percentileTxt});twitterCount=$('<span>',{'class':"altmet_overview_count",'text':" - "+twitterCount});twitTitleCter.append(twitterCount);twitProgContainer.append(twitTitleCter);twitProgContainer.append(twitProgBar);twitProgContainer.append(twitProgProgressLabel);twitLi.append(twitProgContainer);socAct_List.append(twitLi);socAct_benDetail.append(socAct_List);socAct_benchmarkcontainer.append(socAct_benDetail);}
if(typeof fbCount!=="undefined"){var undef=false;var fbPercent=optionsJsonOutput[item].facebook;var fbText;if(typeof fbPercent==="undefined"){fbText="Insufficent data";undef=true;}else{fbText=options.labels.tabs.overview.benchmarkPercentile(fbPercent);}
suffixText=$.fn.altMetric.helper.ordinalSuffix(fbPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(fbPercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(fbProgBar).progressbar({'value':fbPercent}).attr('title',perTooltipTxt);fbProgProgressLabel=$('<span>',{'class':"altmet_progress_label",'id':"fbProgProgressLabel",'html':percentileTxt});fbCount=$('<span>',{'class':"altmet_overview_count",'text':" - "+fbCount});fbTitleCter.append(fbCount);fbProgContainer.append(fbTitleCter);fbProgContainer.append(fbProgBar);fbProgContainer.append(fbProgProgressLabel);fbLi.append(fbProgContainer);socAct_List.append(fbLi);socAct_benDetail.append(socAct_List);socAct_benchmarkcontainer.append(socAct_benDetail);}
if(typeof gpCount!=="undefined"){var gpPercent=optionsJsonOutput[item].googleplus;suffixText=$.fn.altMetric.helper.ordinalSuffix(gpPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(gpPercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(gpProgBar).progressbar({'value':gpPercent}).attr('title',perTooltipTxt);gpProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"gpProgProgressLabel",'html':percentileTxt});gpCount=$('<span>',{'class':"altmet_overview_count",'text':" - "+gpCount});gpTitleCter.append(gpCount);gpProgContainer.append(gpTitleCter);gpProgContainer.append(gpProgBar);gpProgContainer.append(gpProgProgressLabel);gpLi.append(gpProgContainer);socAct_List.append(gpLi);socAct_benDetail.append(socAct_List);socAct_benchmarkcontainer.append(socAct_benDetail);}
if(typeof swCount!=="undefined"){var swPercent=optionsJsonOutput[item].weibo;suffixText=$.fn.altMetric.helper.ordinalSuffix(swPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(swPercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(swProgBar).progressbar({'value':swPercent}).attr('title',perTooltipTxt);swProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"swProgProgressLabel",'html':percentileTxt});swCount=$('<span>',{'class':"altmet_overview_count",'text':" - "+swCount});swTitleCter.append(swCount);swProgContainer.append(swTitleCter);swProgContainer.append(swProgBar);swProgContainer.append(swProgProgressLabel);swLi.append(swProgContainer);socAct_List.append(swLi);socAct_benDetail.append(socAct_List);socAct_benchmarkcontainer.append(socAct_benDetail);}
if(typeof reditCount!=="undefined"){var reditPercent=optionsJsonOutput[item].reddit;suffixText=$.fn.altMetric.helper.ordinalSuffix(reditPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(reditPercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(reditProgBar).progressbar({'value':reditPercent}).attr('title',perTooltipTxt);reditProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"reditProgProgressLabel",'html':percentileTxt});reditCount=$('<span>',{'class':"altmet_overview_count",'text':" - "+reditCount});reditTitleCter.append(reditCount);reditProgContainer.append(reditTitleCter);reditProgContainer.append(reditProgBar);reditProgContainer.append(reditProgProgressLabel);reditLi.append(reditProgContainer);socAct_List.append(reditLi);socAct_benDetail.append(socAct_List);socAct_benchmarkcontainer.append(socAct_benDetail);}
if(typeof pintCount!=="undefined"){var pintPercent=optionsJsonOutput[item].pinterest;suffixText=$.fn.altMetric.helper.ordinalSuffix(pintPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(pintPercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(pintProgBar).progressbar({'value':pintPercent}).attr('title',perTooltipTxt);pintProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"pintProgProgressLabel",'html':percentileTxt});pintCount=$('<span>',{'class':"altmet_overview_count",'text':" - "+pintCount});pintTitleCter.append(pintCount);pintProgContainer.append(pintTitleCter);pintProgContainer.append(pintProgBar);pintProgContainer.append(pintProgProgressLabel);pintLi.append(pintProgContainer);socAct_List.append(pintLi);socAct_benDetail.append(socAct_List);socAct_benchmarkcontainer.append(socAct_benDetail);}
if(typeof linkdCount!=="undefined"){var linkdPercent=optionsJsonOutput[item].linkedin;suffixText=$.fn.altMetric.helper.ordinalSuffix(linkdPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);perTooltipTxt=percentileTxt;if(linkdPercent===undefined){percentileTxt=inSuffData;perTooltipTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();}
$(linkdProgBar).progressbar({'value':linkdPercent}).attr('title',perTooltipTxt);linkdProgProgressLabel=$('<span>',{'class':'altmet_progress_label','id':"linkdInProgProgressLabel",'html':percentileTxt});linkdCount=$('<span>',{'class':"altmet_overview_count",'text':" - "+linkdCount});linkdTitleCter.append(linkdCount);linkdProgContainer.append(linkdTitleCter);linkdProgContainer.append(linkdProgBar);linkdProgContainer.append(linkdProgProgressLabel);linkdLi.append(linkdProgContainer);socAct_List.append(linkdLi);socAct_benDetail.append(socAct_List);socAct_benchmarkcontainer.append(socAct_benDetail);}}
i++;});options.socAct_BenchOptions=socAct_BenchOptions;$(document.body).on('change','.altmet_socAct_combo',options,function(event){var options=event.data;var title=this.value;var percent=optionsJsonOutput[title].social_activity;var twitterPercent=optionsJsonOutput[title].twitter;var fbPercent=optionsJsonOutput[title].facebook;var gpPercent=optionsJsonOutput[title].googleplus;var swPercent=optionsJsonOutput[title].weibo;var reditPercent=optionsJsonOutput[title].reddit;var pintPercent=optionsJsonOutput[title].pinterest;var linkdPercent=optionsJsonOutput[title].linkedin;var allProgToolTxt;var fbProgToolTxt;var twitProgToolTxt;var gpProgToolTxt;var swProgToolTxt;var reditProgToolTxt;var pintProgToolTxt;var linkdProgToolTxt;var percentileTxt;var suffixText;if(typeof fbPercent==="undefined"){$('#fbProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());fbProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();fbPercent=0;}else{suffixText=$.fn.altMetric.helper.ordinalSuffix(fbPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);fbProgToolTxt=percentileTxt;$('#fbProgProgressLabel').html(percentileTxt);}
if(typeof twitterPercent==="undefined"){$('#twitProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());twitProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();twitterPercent=0;}else{suffixText=$.fn.altMetric.helper.ordinalSuffix(twitterPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);$('#twitProgProgressLabel').html(percentileTxt);twitProgToolTxt=percentileTxt;}
if(typeof gpPercent==="undefined"){$('#gpProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());gpProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();gpPercent=0;}else{suffixText=$.fn.altMetric.helper.ordinalSuffix(gpPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);$('#gpProgProgressLabel').html(percentileTxt);gpProgToolTxt=percentileTxt;}
if(typeof swPercent==="undefined"){$('#swProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());swProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();swPercent=0;}else{suffixText=$.fn.altMetric.helper.ordinalSuffix(swPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);$('#swProgProgressLabel').html(percentileTxt);gpProgToolTxt=percentileTxt;}
if(typeof reditPercent==="undefined"){$('#reditProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());reditProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();reditPercent=0;}else{suffixText=$.fn.altMetric.helper.ordinalSuffix(reditPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);$('#reditProgProgressLabel').html(percentileTxt);reditProgToolTxt=percentileTxt;}
if(typeof pintPercent==="undefined"){$('#pintProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());pintProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();pintPercent=0;}else{suffixText=$.fn.altMetric.helper.ordinalSuffix(pintPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);$('#pintProgProgressLabel').html(percentileTxt);pintProgToolTxt=percentileTxt;}
if(typeof linkdPercent==="undefined"){$('#linkdProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());linkdProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();linkdPercent=0;}else{suffixText=$.fn.altMetric.helper.ordinalSuffix(pintPercent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);$('#linkdProgProgressLabel').html(percentileTxt);linkdProgToolTxt=percentileTxt;}
if(typeof percent==="undefined"){$('#socAct_allProgProgressLabel').html(options.labels.tabs.scholarlyActivity.progressbar.insuffDataText());allProgToolTxt=options.labels.tabs.scholarlyActivity.progressbar.insuftooltipText();percent=0;}else{suffixText=$.fn.altMetric.helper.ordinalSuffix(percent);percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);$('#socAct_allProgProgressLabel').html(percentileTxt);allProgToolTxt=percentileTxt;}
$(socAct_allProgBar).progressbar({'value':percent}).attr('title',allProgToolTxt);socAct_allProgProgressLabel=$('<span>',{'class':'altmet_progress_label','html':percentileTxt});percent=optionsJsonOutput[title].twitter;$(twitProgBar).progressbar({'value':twitterPercent}).attr('title',twitProgToolTxt);$(fbProgBar).progressbar({'value':fbPercent}).attr('title',fbProgToolTxt);$(gpProgBar).progressbar({'value':gpPercent}).attr('title',gpProgToolTxt);$(swProgBar).progressbar({'value':swPercent}).attr('title',swProgToolTxt);$(reditProgBar).progressbar({'value':reditPercent}).attr('title',reditProgToolTxt);$(pintProgBar).progressbar({'value':pintPercent}).attr('title',pintProgToolTxt);$(linkdProgBar).progressbar({'value':linkdPercent}).attr('title',linkdProgToolTxt);var compareRow=options.socAct_compareRow;var selectBox=["<select class='altmet_socAct_combo'>",options.socAct_BenchOptions.join(''),"</select>"].join('');var selectedIndex=$(this).find(":selected").index();var optionsType=options.socAct_benchmarkType;if(optionsType[title]==="subject"){if(!options.hasOwnProperty("socAct_docTxt")){options.socAct_docTxt=compareRow.html();}
compareRow.html(options.socAct_subjectTxt);compareRow.find("span:first-child").append(selectBox);compareRow.find("select").get(0).selectedIndex=selectedIndex;}else if(optionsType[title]==="doctype"){if(!options.hasOwnProperty("socAct_subjectTxt")){options.socAct_subjectTxt=compareRow.html();}
compareRow.html(options.socAct_docTxt);compareRow.find("span:first-child").append(selectBox);compareRow.find("select").get(0).selectedIndex=selectedIndex;}});};$.fn.altMetric.buildSocialActivityTab.drawBenchMark.addBubbleContent=function(options){var SocAct_benchmarkHelpBubbleDynamicText='<span class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.overview.socialActivity.benchmarkbubbleText1()
+'</span><ul class="altmet_scholAct_benchMarkBubble"><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleListText1()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleListText2()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.citations.benchmarkBubbleListText3()
+'</li></ul><span class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.tabs.overview.socialActivity.benchmarkbubbleText2()+'</span>';var headingsnowballObj=jQuery("#SocAct_bMarkHelpBubbleContainer");var dynParams={'section':'benchmarkbubble','dynamicSnowBubbleText':SocAct_benchmarkHelpBubbleDynamicText};var SocAct_benchmarkHelpBubbleDynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':SocAct_benchmarkHelpBubbleDynamicTextObj,'bubblePosition':'positionLeft','targetElement':headingsnowballObj,'bubbleDataTarget':"SocAct_benchmarking_help_icon"};options.params=params;$.fn.altMetric.bubble.addBubbleContentWithoutSnow(options);};$.fn.altMetric.buildSocialActivityTab.drawStreamingContent=function(options){var altMetricData=options.hasOwnProperty('data')&&options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var sourcesData=counts.hasOwnProperty('sources')?counts.sources:{};var accountData=counts.hasOwnProperty('users')?counts.users:{};var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var socialActivity=buckets.hasOwnProperty("social_activity")?buckets.social_activity:{};var socialActivityBD=(!$.isEmptyObject(socialActivity)&&socialActivity.hasOwnProperty("break_down"))?socialActivity.break_down:{};var orderSocialArray=['twitter','facebook','googleplus','reddit','pinterest','linkedin'];var streamSourceArray=[];var leftItems=[];var anchorTitle=options.labels.tabs.scholarlyCommentary.postTitleText;var index=0;$.each(socialActivityBD,function(source){index++;var streamData=options.data.altMetricData.posts[source];var streamSourceContainer=$('<div>',{'class':"altmet_streamSource"});var streamAnchor=$('<a>',{'name':source});streamSourceContainer.append(streamAnchor);var streamSourceHeaderContainer=$('<div>',{'class':"altmet_overview_subHeading"});var streamSourceIcon=$('<span>',{'class':"altmet_social_img"}).addClass(source);var sourceHeading=options.labels.tabs.overview.cards.hasOwnProperty(source)?options.labels.tabs.overview.cards[source].header:source;var streamSourceHeading=$('<h3>',{'text':sourceHeading});streamSourceHeaderContainer.append(streamSourceIcon).append(streamSourceHeading);streamSourceContainer.append(streamSourceHeaderContainer);var sourcesCount=sourcesData[source];var accountCount=accountData[source];var feedHeaderDesc=options.labels.tabs.socialActivity.feedHeader;if(source==='twitter'){feedHeaderDesc=feedHeaderDesc.twitter;}
var countDescription;if(sourcesCount>1&&accountCount>1){countDescription=feedHeaderDesc.description1(sourcesCount,accountCount);}else if(sourcesCount>1){countDescription=feedHeaderDesc.description2(sourcesCount);}else{countDescription=feedHeaderDesc.description3();}
var streamSourceHeaderDesc=$('<span>',{'class':"altmet_overview_count",'html':' &#8211; '+countDescription});streamSourceHeaderContainer.append(streamSourceHeaderDesc);var sourceIndex=orderSocialArray.indexOf(source);if(sourceIndex!==-1){streamSourceArray[sourceIndex]=streamSourceContainer;}else{leftItems.push(streamSourceContainer);}
var timeStampTitle=source==='twitter'?options.labels.tabs.socialActivity.feedLink.twitter.title:options.labels.tabs.socialActivity.feedLink.title;$.fn.altMetric.helper.drawFullFeedStream({'stream':streamData,'anchorTitle':anchorTitle,'container':streamSourceContainer,'section':'SocialActivity','viewMore':options.labels.tabs.stream.viewMore,'viewLess':options.labels.tabs.stream.viewLess,'defaultDisplayCount':4,'totalFeedCount':sourcesCount,'getNextPage':options.externalConfigurations.getNextPage,'timeStampTitle':timeStampTitle,'source':source,'isSocial':true});});var clearObj=$('<div>',{'class':"clear"});if(leftItems.length){$.merge(streamSourceArray,leftItems);}
if(streamSourceArray.length){var streamSourceObj=$.map(streamSourceArray,function(n){if(typeof n!=='undefined'){return n;}});options.streamContent.append(streamSourceObj).append(clearObj);options.streamContent.find('.altmet_streamSource:even').addClass('even');options.streamContent.find('.altmet_streamSource:odd').addClass('odd');}
if($.fn.altMetric.hasOwnProperty('metricValues')){$.fn.altMetric.metricValues('scr_socStr_end');}};$.fn.altMetric.buildSocialActivityTab.drawHeader=function(options){var contentRow1=options.contentHeader;var content="<span id='headingSocialActBubbleContainer'><a id='altmet_socact_heading' aria-haspopup='true' class='altmet_heading_snow' href='#' "
+"title='"
+options.labels.tabs.socialActivity.snowballIconTitle()
+"'> </a></span>";contentRow1.append(content).addClass('hasSnowBall');var params={'container':options.contentHeader,'content':options.labels.tabs.socialActivity.title()};$.fn.altMetric.tabContentHeader(params);var headingsnowballObj=$("#headingSocialActBubbleContainer");var headingsnowBallBubbleText1Obj=$("<div>",{'class':"altmet_scholAct_snowBallBubbleText1",'text':'Social Activity'});var headingsnowBallBubbleText2Obj=$("<span>",{'class':"altmet_scholAct_snowBallBubbleText2","text":options.labels.tabs.socialActivity.headingSnowBubbleText2()});var socialActivitydynamicTextObj=$("<span>",{'id':"ScholActdynamicTextObj",'style':'display: block'});socialActivitydynamicTextObj.append(headingsnowBallBubbleText1Obj).append(headingsnowBallBubbleText2Obj);var socialActivityparams={'dynamicTextObj':socialActivitydynamicTextObj,'bubblePosition':'positionLeft','targetElement':headingsnowballObj,'bubbleDataTarget':'altmet_socact_heading'};options.params=socialActivityparams;$.fn.altMetric.bubble.addBubbleContent(options);};$.fn.altMetric.buildSocialActivityTab.drawSources=function(options){var mentionscount=0;var sourcescount=0;var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:[];var counts=altMetricData.counts;var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var socialActivity=buckets.hasOwnProperty("social_activity")?buckets.social_activity:{};var socialActivityBD=(!$.isEmptyObject(socialActivity)&&socialActivity.hasOwnProperty("break_down"))?socialActivity.break_down:{};var socialActTotal=(!$.isEmptyObject(socialActivity)&&socialActivity.hasOwnProperty("total"))?socialActivity.total:0;if(socialActivity){mentionscount=socialActTotal;sourcescount=$.fn.altMetric.helper.getKeys(socialActivityBD).length;}
var contentRow2=options.sourcesObj;var sourcesObj1=$("<div>",{'class':"altmet_source_count","text":options.labels.tabs.socialActivity.sources1.plural(mentionscount,sourcescount)});var sourcesObj2=$("<div>",{'class':"altmet_source_caption","text":options.labels.tabs.socialActivity.sources2()});if(sourcescount===1){sourcesObj1.text(options.labels.tabs.socialActivity.sources1.singular(mentionscount,sourcescount));}else{sourcesObj1.text(options.labels.tabs.socialActivity.sources1.plural(mentionscount,sourcescount));}
contentRow2.append(sourcesObj1).append(sourcesObj2);};$.fn.altMetric.buildSocialActivityTab.drawCard=function(options){var cardContainer=options.cardContainer;var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:[];var smallCardRow=$('<div>',{'class':"altmet_cardRow"});cardContainer.append(smallCardRow);var maxCards=6;var hasOtherSourceCard=false;var defaultSocialArray=['twitter','facebook','googleplus','reddit','pinterest','linkedin'];if(!$.isEmptyObject(altMetricData)&&altMetricData.hasOwnProperty("counts")){var counts=altMetricData.counts;var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var socialActivity=buckets.hasOwnProperty("social_activity")?buckets.social_activity:{};var socialActivityBD=(!$.isEmptyObject(socialActivity)&&socialActivity.hasOwnProperty("break_down"))?socialActivity.break_down:{};var socialActivityKeys=$.isEmptyObject(socialActivityBD)?[]:$.fn.altMetric.helper.getKeys(socialActivityBD);var socialActivityCount=socialActivityKeys.length;socialActivityKeys=$.fn.altMetric.helper.sortArrayWithArray(defaultSocialArray,socialActivityKeys);var smallCardContainer=smallCardRow;var totalCards=socialActivityCount;hasOtherSourceCard=totalCards>maxCards;var cardsCount=totalCards>6?6:totalCards<3?3:totalCards;var otherSourceBubbleObj=[];options.otherSourceCard={'source':'otherCard','count':0,'container':smallCardContainer,cards:cardsCount,'header':options.labels.tabs.overview.cards.other.header(),'countDesc':options.labels.tabs.overview.cards.wikipedia.countdesc(),'sources':0};if(maxCards>0){tabName=options.labels.tabs.overview.cards.smallCard.activity.social_activity();$.each(socialActivityKeys,function(index,key){var value=socialActivityBD[key];var smallCardProp=options.labels.tabs.overview.cards[key];var header=typeof smallCardProp!=='undefined'?smallCardProp.header():key;if(maxCards<=1&&hasOtherSourceCard){options.otherSourceCard.count=options.otherSourceCard.count
+value;options.otherSourceCard.sources++;var otherSocCountObj=$('<li>',{'class':'altmet_otherSrc_title'}).addClass(key);var otherSocAnchorObj=$('<a>',{'class':'altmet_anchor','data-count':value,'href':'#'+key,'title':options.labels.tabs.overview.cards.other.anchor.soaTitle(value,header),'text':value+' '
+header});otherSourceBubbleObj.push(otherSocCountObj.append(otherSocAnchorObj));}else{var countDesc;if(value>1){countDesc=typeof smallCardProp!=='undefined'?smallCardProp.countdesc():key;}else{countDesc=typeof smallCardProp!=='undefined'?smallCardProp.countdesc.single():key;}
options.smallCard={'source':key,'count':value,'container':smallCardContainer,cards:cardsCount,'header':header,'countDesc':countDesc,'isAnchor':false};var socialCard=$.fn.altMetric.buildOverviewTab.buildCards.drawSmallCards.buildSmallCard(options);lastCard=socialCard;}
maxCards--;});};if(hasOtherSourceCard){var otherSourceCount=options.otherSourceCard.sources;var otherMentionCount=options.otherSourceCard.count;options.otherSourceCard.header=options.otherSourceCard.sources
+" "+options.otherSourceCard.header;lastCard=$.fn.altMetric.buildOverviewTab.buildCards.drawSmallCards.buildOtherSourceCard(options);lastCard.attr("title",options.labels.tabs.overview.cards.other.subTitle(otherMentionCount));lastCard.attr("id","altmetSocial_otherSources");var otherItemContainer=$("<div>",{'id':'altmetSocial_otherSources-data',"class":"bubble-source-data"});var otherSrcTxt=$('<span>',{'class':'altmet_additionalSourcesTxt','text':options.labels.tabs.overview.cards.other.header()});var popupText=['<span class="altmet_addlMen_txt">',otherMentionCount,'&nbsp;',options.labels.recordpage.sidebar.otherSource.text(otherSourceCount,''),'</span>'];otherSrcTxt.append(popupText.join(''));otherSourceBubbleObj.sort(function(i,j){var count1=i.find('a').attr('data-count');var count2=j.find('a').attr('data-count');return count2-count1;});if(otherSourceBubbleObj.length){var otherSourceObj=$.map(otherSourceBubbleObj,function(n){if(typeof n!=='undefined'){return n;}});}
var otherItemObj=$('<ul>',{'class':'altmet_otherSource_list'}).append(otherSourceObj);otherSrcTxt.append(otherItemObj);otherItemContainer.append(otherSrcTxt);$('#altmetSocial_otherSources').append(otherItemContainer);$("#altmetSocial_otherSources").unbind("click.addnlsrcBubble").bind("click.addnlsrcBubble",{position:Bubble['positionLeft']},Bubble.showBubble);$('.altmet_cards6').bind("mouseleave",{'elementId':"altmetSocial_otherSources"},$.fn.altMetric.bubble.hideBubble);};lastCard.addClass('lastCard');};};$.fn.altMetric.buildSocialActivityTab.drawCard.showBubble=function(event){event.data.target=$('#altmetSocial_otherSources')[0];Bubble.show(event.data);if(jQuery.isFunction(event.preventDefault)){event.preventDefault();}};$.fn.altMetric.buildSocialActivityTab.drawMap=function(options){options=$.fn.altMetric.helper.processMapData(options,"twitter");var mapData=options.mapData;var mapMin=options.mapDataExtreams.min;var mapMax=options.mapDataExtreams.max;var plural=options.labels.sidebar.socialAct.twitter.plural();var singular=options.labels.sidebar.socialAct.twitter.singular();var maxValLabel=$.fn.altMetric.helper.getSingularPlural(mapMax.value,singular,plural);var minValLabel=$.fn.altMetric.helper.getSingularPlural(mapMin.value,singular,plural);var mapObject=$(options.mapContainer).highcharts('Map',{title:false,exporting:{enabled:false},credits:{enabled:false},legend:{enabled:true,align:'right',verticalAlign:'bottom',floating:true,itemMarginTop:4,title:{text:options.labels.tabs.highmap.legend.title(),style:{color:'#5c5c5c',fontSize:'14px',fontWeight:'bold',fontFamily:'"Arial-BoldMT","Arial Bold","Arial"'}},useHTML:true,x:-80},tooltip:{formatter:function(){return $.fn.altMetric.helper.drawTooltip(this,"twitter",options);},shared:false,shadow:false,useHTML:true,borderWidth:0,backgroundColor:null,style:{padding:0}},subtitle:false,colorAxis:{max:mapMax.percentage,minColor:'#eef7fd',maxColor:'#55ACEE',tickPositions:[(mapMin.percentage-.001),mapMax.percentage],tickLength:-10,labels:{step:1,y:344,x:295,useHTML:true,style:{color:'#191919',fontSize:'14px',fontFamily:'"ArialMT","Arial"'},formatter:function(){if(this.value<=mapMin.percentage){return mapMin.value+" "
+minValLabel;}
if(this.value>=mapMax.percentage){return mapMax.value+" "
+maxValLabel;}}}},series:[{data:mapData,mapData:Highcharts.maps['custom/world'],joinBy:'hc-key',name:'Country',nullColor:"#ffffff",states:{hover:{color:'#88C3BF'}}}]});$.fn.altMetric.socialActivityMap=mapObject;mapObject.find(".highcharts-legend-title text").attr("x",'-70');if(mapObject.find(".highcharts-axis-labels.highcharts-coloraxis-labels > span").length>1){mapObject.find(".highcharts-axis-labels.highcharts-coloraxis-labels > span:last-child").addClass('highchartsLegendMaxLabelTwit');}};$.fn.altMetric.helper.drawCards=function(cardData){var container=cardData.container;var isPrepend=cardData.hasOwnProperty('isPrepend')&&cardData.isPrepend;var isMendeley=cardData.hasOwnProperty('isMendeley')&&cardData.isMendeley;var isPreview=cardData.hasOwnProperty('isPreview')&&cardData.isPreview;if(cardData.cards===3){if(!container.hasClass("altmet_cards3")){container.addClass("altmet_cards3");}}
else if(cardData.cards===4){if(!container.hasClass("altmet_cards4")){container.addClass("altmet_cards4");}}
else if(cardData.cards===5){if(!container.hasClass("altmet_cards5")){container.addClass("altmet_cards5");}}
else if(cardData.cards===6){if(!container.hasClass("altmet_cards6")){container.addClass("altmet_cards6");}}else{}
var card;if(cardData.hasOwnProperty('isAnchor')&&cardData.isAnchor){card=$("<a>",{"class":"altmet_card",'href':'#altmetCard'}).addClass(cardData.source);}else{card=$("<div>",{"class":"altmet_card"}).addClass(cardData.source);}
var cardRow1=$("<div>",{"class":"altmet_card_row1"});var cardHeader=$("<h4>",{"class":"altmet_card_header","text":cardData.header});var cardIcon=$("<div>",{"class":"altmet_cardIcon"}).addClass(cardData.source);var cardRow2=$("<div>",{"class":"altmet_card_row2"});var cardCount=$("<span>",{"class":"altmet_cardCount","text":cardData.count});var cardCountDesc;var countDesc;if(container.hasClass("altmet_largeCard")){cardRow1.append(cardHeader).append(cardIcon);cardRow2.append(cardCount);var cardRow3=$("<div>",{"class":"altmet_card_row3"});countDesc=cardData.count>999&&cardData.cards===6?"":cardData.countDesc;cardCountDesc=$("<span>",{"class":"altmet_cardCountDesc",text:countDesc});if(cardData.hasOwnProperty('snowBallContainer')&&cardData.snowBallContainer){cardRow3.append(cardCountDesc).append(cardData.snowBallContainer);}else{cardRow3.append(cardCountDesc);}
card.append(cardRow1).append(cardRow2).append(cardRow3);}else{countDesc=cardData.count>999&&cardData.cards===6?"":cardData.countDesc;cardCountDesc=$("<span>",{"class":"altmet_cardCountDesc",text:countDesc});cardRow1.append(cardHeader).append(cardIcon);cardRow2.append(cardCount).append(cardCountDesc);card.append(cardRow1).append(cardRow2);}
if($('#addToMendeleyEnabled').length>0&&isMendeley){var mendeleylinkCont=$('<a>',{'title':cardData.mendeleyTitle,'text':cardData.mendeleyTxt,'href':'#saveToMendely','class':'save_to_menLink'});var openHidden=["<span class='hidden-label'>(Opens in a new window )</span>"];mendeleylinkCont.append(openHidden);cardRow2.append(mendeleylinkCont);mendeleylinkCont.on('click',function(event){$.fn.altMetric.mendeleyExportOpen(event);});if(isPreview===true){mendeleylinkCont.addClass("previewDisable");}}
if(isPrepend){container.prepend(card);}else{container.append(card);}
return card;};$.fn.altMetric.helper.toggleLoadingIcon=function(options){if(options.isShow){var loadContainer=options.loadContainer;var scrollTop=$(window).scrollTop(),divOffset=loadContainer.position().top,paddingTop=parseInt($(loadContainer).css('paddingTop')),modalTop=(divOffset),height=$(loadContainer).height(),loadingTop=(divOffset
+(height/2)-7);if(!isNaN(paddingTop)){modalTop=modalTop+paddingTop;loadingTop=loadingTop+paddingTop;}
var modalDiv=jQuery('<div>',{'class':'ui-widget-overlay contOpacity','id':"loadingModalDiv"}).css({'height':height,'top':modalTop});var divObj=jQuery('<div>',{'class':'altmet_loadingImageAndTitle','id':'loadingContentContainer'}).css('top',loadingTop);loadContainer.append(divObj).append(modalDiv);}else{$("#loadingModalDiv").remove();$("#loadingContentContainer").remove();}};}(jQuery));if(!Array.prototype.indexOf){Array.prototype.indexOf=function(elt){var len=this.length>>>0;var from=Number(arguments[1])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}
for(;from<len;from++){if(from in this&&this[from]===elt){return from;}}
return-1;};}
function buildCheckbox(checkbox){var checkboxContainer=$('<span>',{'class':"custom-checkbox"});checkboxContainer.append(checkbox);checkboxContainer.append('<span class="box"><span class="tick"></span></span>');return checkboxContainer;}
(function($){$.fn.altMetric.buildRightModule=function(options){$.fn.altMetric.buildRightModule.drawHeader(options);$.fn.altMetric.buildRightModule.drawContent(options);};$.fn.altMetric.buildRightModule.drawHeader=function(options){var header=['<div class="rightHeaderSection">','<h2>'+options.labels.recordpage.sidebar.metricsHeaderText()+'</h2>','<span id="metrics_help_icon_bubbleContainer"><a href="#" id="metrics_help_icon"','class="benchmarking_help_icon" style="position:absolute;margin-top:6px;right:6px;"','title="'+options.labels.recordpage.sidebar.metricsHeaderTitle()+'">&nbsp;</a></span>','</div>'];options.container.append(header.join(''));$.fn.altMetric.buildRightModule.drawHeader.addBubbleContent(options);};$.fn.altMetric.buildRightModule.drawHeader.addBubbleContent=function(options){var metricsHelpBubbleDynamicText='<span class="altmet_scholAct_snowBallBubbleText2">'+options.labels.recordpage.sidebar.metricsHelpBubbleText1()+'</span><ul class="altmet_scholAct_benchMarkBubble"><li class="altmet_scholAct_snowBallBubbleText2">'+options.labels.recordpage.sidebar.metricsHelpBubbleListText1()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'+options.labels.recordpage.sidebar.metricsHelpBubbleListText2()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'+options.labels.recordpage.sidebar.metricsHelpBubbleListText3()+'</li></ul>';var headingsnowballObj=jQuery("#metrics_help_icon_bubbleContainer");var dynParams={'section':'RecordPageRightSectionMetricHeader','dynamicSnowBubbleText':metricsHelpBubbleDynamicText}
var metricsHelpBubbleDynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':metricsHelpBubbleDynamicTextObj,'bubblePosition':'positionRightLeft','targetElement':headingsnowballObj,'bubbleDataTarget':"metrics_help_icon",'setDataBack':true,}
options.params=params;$.fn.altMetric.bubble.addBubbleContent(options);};$.fn.altMetric.buildRightModule.drawContent=function(options){var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var contentContainer=$("<div>",{'class':'altmet_rightContent'});var firstSection=$("<div>",{'class':'altmet_rightFirstSection'});var secondSection=$("<div>",{'class':'altmet_rightSecondSection'});var linkSection=$("<div>",{'class':'altmet_rightLinkSection'});var eid=options.data.eid;var viewAllUrl=options.metricpageURL+'?eid='+eid+'&origin=recordpage';var viewAlllink=$("<a>",{'class':'altmet_rightLinkSection_viewAllIcon altmet_rightLinkSection_viewAlllink','text':options.labels.recordpage.sidebar.viewAllLinkText,'href':'#','title':options.labels.recordpage.sidebar.viewAllLinkTitle});linkSection.append(viewAlllink);contentContainer.append(firstSection).append(secondSection).append(linkSection);options.contentContainer=contentContainer;options.firstSection=firstSection;options.secondSection=secondSection;options.linkSection=linkSection;options.container.append(contentContainer);$.fn.altMetric.buildRightModule.drawCitation(options);$.fn.altMetric.buildRightModule.drawFWCISection(options);var usedSources={};if(buckets.hasOwnProperty('scholar_activity')){usedSources['scholar_activity']=$.fn.altMetric.buildRightModule.drawscholarlyactivity(options);}
if(buckets.hasOwnProperty('scholar_commentary')){usedSources['scholar_commentary']=$.fn.altMetric.buildRightModule.drawscholarlycommentary(options);}
if(buckets.hasOwnProperty('social_activity')){usedSources['social_activity']=$.fn.altMetric.buildRightModule.drawsocialactivity(options);}
if(buckets.hasOwnProperty('mass_media')){$.fn.altMetric.buildRightModule.drawmassmedia(options);}
options.usedSources=usedSources;$.fn.altMetric.buildRightModule.drawOtherSources(options);contentContainer.append(linkSection);if(secondSection.html()===''){secondSection.remove();}
else{if(buckets.hasOwnProperty('scholar_commentary')||buckets.hasOwnProperty('social_activity')||buckets.hasOwnProperty('mass_media')){options.objDivTabCnt=secondSection;$.fn.altMetric.helper.providedByText(options);}}
if(firstSection.html()===''){firstSection.remove();}
var articlePageURL=$.fn.altMetric.helper.removeUrlParam(window.location.href,"origin");var formInnerHtml=['<input type="hidden" name="articlePageURL" value="',articlePageURL,'" />']
linkSection.on("click.submit",function(event){event.preventDefault();var targetObj=$(this.target);$('<form>',{"id":"showPublicationMetricPage","html":formInnerHtml.join(''),'method':'post',"action":viewAllUrl}).appendTo(document.body).submit();});};$.fn.altMetric.buildRightModule.drawCitation=function(options){var citeimgTypeName="citation";options.contentContainer=options.firstSection;var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var percentiles=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var citationTotalCount=options.data.hasOwnProperty('articleData')&&options.data.articleData.hasOwnProperty('citedCount')?options.data.articleData.citedCount:0;var contextScoreCheck=percentiles.length>0&&percentiles[0].hasOwnProperty('context_for_score')?percentiles[0].context_for_score:{};var citePercentData=(!$.isEmptyObject(contextScoreCheck)&&contextScoreCheck.hasOwnProperty("citations"))?contextScoreCheck.citations:0;if(citationTotalCount>1){citeimageType=options.labels.sidebar.citation.plural();}
else{citeimageType=options.labels.sidebar.citation.singular();}
$.fn.altMetric.buildRightModule.drawMetricsContainer(options,{imageType:citeimgTypeName,mainContainerId:"metrics_cite_cnt",totalCount:citationTotalCount,imgTypeName:citeimageType,percentCount:citePercentData});};$.fn.altMetric.buildRightModule.drawsocialactivity=function(options){var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var socialActivity=buckets.hasOwnProperty("social_activity")?buckets.social_activity:{};var socialActivityBreakdown=(socialActivity.hasOwnProperty("break_down"))?socialActivity.break_down:{};delete socialActivityBreakdown['weibo'];var percentiles=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var contextScoreCheck=percentiles.length>0&&percentiles[0].hasOwnProperty('context_for_score')?percentiles[0].context_for_score:{};var scomainContainerId="metrics_Social_Act";var scoimageType="";var scototalCount=0;var percentileData=0;var scoimageType1="";var scototalCount1=0;var percentileData1=0;var socdataOrder=["twitter","facebook","googleplus","weibo","reddit","pinterest","linkedin"];var scoimgTypeName;var scoimgTypeName1;var socActItems=$.fn.altMetric.helper.getKeys(socialActivityBreakdown);var socActItemsCount=socActItems.length;var socialactlabels=options.labels.sidebar.socialAct;$.each(socdataOrder,function(i,orderval){if(socialActivityBreakdown[orderval]!==undefined){scototalCount=socialActivityBreakdown[orderval];scoimageType=orderval;if(contextScoreCheck[orderval]!==undefined){percentileData=contextScoreCheck[orderval];}
if(scototalCount>1){scoimgTypeName=socialactlabels[orderval].plural();}
else{scoimgTypeName=socialactlabels[orderval].singular();}
return false;}});options.contentContainer=options.secondSection;$.fn.altMetric.buildRightModule.drawMetricsContainer(options,{imageType:scoimageType,mainContainerId:scomainContainerId,totalCount:scototalCount,imgTypeName:scoimgTypeName,percentCount:percentileData});if(socActItemsCount==2){$.each(socdataOrder,function(i,orderval){if(socialActivityBreakdown[orderval]!==undefined){scototalCount1=socialActivityBreakdown[orderval];scoimageType1=orderval;if(contextScoreCheck[orderval]!==undefined){percentileData1=contextScoreCheck[orderval];}
if(scototalCount1>1){scoimgTypeName1=socialactlabels[orderval].plural();}
else{scoimgTypeName1=socialactlabels[orderval].singular();}}});return{'type':scoimageType,'count':scototalCount,'break_down':socialActivityBreakdown,imageType:scoimageType1,mainContainerId:scomainContainerId,totalCount:scototalCount1,imgTypeName:scoimgTypeName1,percentCount:percentileData1};}
return{'type':scoimageType,'count':scototalCount,'break_down':socialActivityBreakdown};};$.fn.altMetric.buildRightModule.drawmassmedia=function(options){var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.hasOwnProperty('counts')?altMetricData.counts:{};var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var massMedia=buckets.hasOwnProperty("mass_media")?buckets.mass_media:{};var massMediaTotal=(!$.isEmptyObject(massMedia)&&massMedia.hasOwnProperty("total"))?massMedia.total:0;var massmainContainerId="metrics_Mass_Media";var massimageType="massmedia";var massimgTypeName;var percentileData="0";if(massMediaTotal>1){massimgTypeName=options.labels.sidebar.massmedia.plural();}
else{massimgTypeName=options.labels.sidebar.massmedia.singular();}
options.contentContainer=options.secondSection;$.fn.altMetric.buildRightModule.drawMetricsContainer(options,{imageType:massimageType,mainContainerId:massmainContainerId,totalCount:massMediaTotal,imgTypeName:massimgTypeName,percentCount:percentileData});};$.fn.altMetric.buildRightModule.drawOtherSources=function(options){var sources=['scholar_activity','scholar_commentary','social_activity'];var otherSourceOrder=['citeulike','pubpeer','wikipedia','youtube','qa','facebook','googleplus','weibo','reddit','pinterest','linkedin'];var otherSourceCount=0;var noOfSources=0;var otherSources=[];var leftItems=[];var sourceNames=options.labels.recordpage.sidebar.otherSource.sourceName;var leftItemContainer=$("<div>",{'id':'altmet_additionalSources-data',"class":"bubble-source-data"});var mainContainerId1;var imageType1;var totalCount1;var imgTypeName1;var percentileData1;$.each(sources,function(index,source){if(options.usedSources.hasOwnProperty(source)){var sourceData=options.usedSources[source];var sourceBreakDown=sourceData.break_down;mainContainerId1=sourceData.mainContainerId;imageType1=sourceData.imageType;totalCount1=sourceData.totalCount;imgTypeName1=sourceData.imgTypeName;percentileData1=sourceData.percentCount;var sourceItems=$.fn.altMetric.helper.getKeys(sourceBreakDown);$.each(sourceItems,function(index,sourceItem){if(sourceItem!==sourceData.type){sourceItemCount=sourceBreakDown[sourceItem];otherSourceCount+=sourceItemCount;var sourceName=sourceNames.hasOwnProperty(sourceItem)?sourceNames[sourceItem]():sourceItem;var leftCountObj=$('<span>',{'class':'altmet_side_cnt','text':sourceItemCount});var leftSourceObj=$('<span>',{'class':'altmet_sideBar_title','text':sourceName});var leftItemObj=$('<span>',{'class':'altmet_otherSource'}).addClass(sourceItem).append(leftCountObj).append(leftSourceObj);var indexValueOfArray=otherSourceOrder.indexOf(sourceItem);if(indexValueOfArray!==-1){otherSources[indexValueOfArray]=leftItemObj.clone();}
else{leftItems.push(leftItemObj.clone());}
noOfSources++;}});}});if(leftItems.length){$.merge(otherSources,leftItems);}
if(noOfSources==1){var metricsContainer=$.fn.altMetric.buildRightModule.drawMetricsContainer(options,{imageType:imageType1,mainContainerId:mainContainerId1,totalCount:totalCount1,imgTypeName:imgTypeName1,percentCount:percentileData1});}
if(noOfSources>1&&otherSourceCount>0){var otherSourceObj=$.map(otherSources,function(n){if(typeof n!=='undefined'){return n;}});leftItemContainer.append(otherSourceObj);options.contentContainer=options.secondSection;var title=options.labels.recordpage.sidebar.otherSource.title();var text=options.labels.recordpage.sidebar.otherSource.text('<a id="altmet_additionalSources" href="#otherSources" class="alrmet_otherSources" title="'+title+'">'+noOfSources,'</a>');var metricsContainer=$.fn.altMetric.buildRightModule.drawMetricsContainer(options,{imageType:'otherSources',mainContainerId:"metrics_other_sources",totalCount:otherSourceCount,imgTypeName:text,percentCount:0});var popupText=['<span class="altmet_additionalSourcesTxt">',otherSourceCount,'&nbsp;',options.labels.recordpage.sidebar.otherSource.text(noOfSources,''),'</span>'];leftItemContainer.prepend(popupText.join(''));metricsContainer.append(leftItemContainer);$("#altmet_additionalSources").unbind("click.addnlsrcBubble").bind("click.addnlsrcBubble",{position:Bubble['positionLeftDown'],setDataBack:true},Bubble.showBubble);metricsContainer.bind("mouseleave",{'elementId':"altmet_additionalSources"},$.fn.altMetric.bubble.hideBubble);}};$.fn.altMetric.buildRightModule.drawMetricsContainer=function(options,props){var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var percentiles=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var benchmarkType=percentiles.length>0&&percentiles[0].hasOwnProperty('benchmark_type')?percentiles[0].benchmark_type:{};if(props.totalCount>0){var metricMainCont=options.contentContainer;var metricSubContainer=$('<div>',{'class':"altmet_sidebar_mainContainer",'id':props.mainContainerId});var metricSubCountCont=$('<span>',{'class':"altmet_side_cnt altmet_side_count",'text':props.totalCount});var altTxt=(props.imageType!=='otherSources')?options.labels.sidebar.images[props.imageType].tooltip():" ";var metricSubImageCont=$('<span>',{'class':"almet_sidebar_imageCont altmet_social_img "+' '+props.imageType,'text':altTxt});var metricImgCountContainer=$('<div>',{'class':"altmet_sidebar_content"});metricImgCountContainer.append(metricSubImageCont);metricImgCountContainer.append(metricSubCountCont);metricSubContainer.append(metricImgCountContainer);var suffixText=$.fn.altMetric.helper.ordinalSuffix(props.percentCount);var percentileTxt=options.labels.recordpage.sidebar.percentileText(suffixText);var metricProgressBarCont=$('<div>',{'class':"altmet_sidebar_content side_bar_position"});var metricDescCont=$('<div>',{'class':"metricDescContainer"});var metricDescText=$('<span>',{'class':"altmet_sideBar_title",'html':props.imgTypeName});if(props.percentCount>0&&benchmarkType==='doctype'){var metricProgressLabel=$('<span>',{'class':'altmet_side_pro_label','html':percentileTxt});var progressBarHolder=$('<div>',{'class':"altmet_side_progress_bar",'title':percentileTxt});$.fn.altMetric.helper.demoProgressBar(progressBarHolder,props.percentCount);}
metricDescCont.append(metricDescText);if(props.percentCount>0){metricDescCont.append(metricProgressLabel);}
metricProgressBarCont.append(metricDescCont);if(props.percentCount>0){metricProgressBarCont.append(progressBarHolder);}
metricSubContainer.append(metricProgressBarCont);metricMainCont.append(metricSubContainer);return metricSubContainer;}};$.fn.altMetric.buildRightModule.drawFWCISection=function(options){var firstSection=options.firstSection;var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var fwci=altMetricData.hasOwnProperty('metrics')?altMetricData.metrics.fwci:0;var fwciContainer=$('<div>',{'class':"altmet_sidebar_mainContainer"});if(fwci>0){var decfwci=fwci.toFixed(2);var snowballBubbleContainer=$("<span>",{'id':'FWCIsnowballBubbleContainer'});var snowballIcon=$("<a>",{'href':"#",'id':'FWCIsnowballIcon','class':'altmet_social_img fwciSnowball','title':options.labels.recordpage.sidebar.FWCIsnowballIconTitle()});var FWCIData=$("<span>",{'class':'altmet_side_cnt altmet_side_count','text':decfwci});var FWCIText=$("<span>",{'class':'altmet_sideBar_title','text':options.labels.recordpage.sidebar.FWCIsnowballText()});snowballBubbleContainer.append(snowballIcon);firstSection.append(fwciContainer);fwciContainer.append(snowballBubbleContainer).append(FWCIData).append(FWCIText);options.FWCIsnowballIcon=snowballIcon;options.FWCISnowballBubbleContainer=snowballBubbleContainer;$.fn.altMetric.buildRightModule.drawFWCISection.addBubbleContent(options);}}
$.fn.altMetric.buildRightModule.drawFWCISection.addBubbleContent=function(options){var FWCIsnowballBubbleContainerObj=options.FWCISnowballBubbleContainer;var FWCIsnowballBubbleDynamicText='<span class="altmet_scholAct_snowBallBubbleText2">'+options.labels.recordpage.sidebar.FWCIsnowballBubbleText2()
+'</span><ul class="altmet_scholAct_benchMarkBubble"><li class="altmet_scholAct_snowBallBubbleText2">'+options.labels.recordpage.sidebar.fwci.snowballBubbleListText1()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'+options.labels.recordpage.sidebar.fwci.snowballBubbleListText2()
+'</li><li class="altmet_scholAct_snowBallBubbleText2">'+options.labels.recordpage.sidebar.metricsHelpBubbleListText3()+'</li></ul><span class="altmet_scholAct_snowBallBubbleText2">'
+options.labels.recordpage.sidebar.FWCIsnowballBubbleText4()+'</span>'
var dynParams={'section':'RecordPageRightSectionFWCI','title':options.labels.recordpage.sidebar.FWCIsnowballBubbleText1,'dynamicSnowBubbleText':FWCIsnowballBubbleDynamicText}
var FWCIsnowballBubbleDynamicTextObj=$.fn.altMetric.getDynamicBubbleContent(dynParams);var params={'dynamicTextObj':FWCIsnowballBubbleDynamicTextObj,'bubblePosition':'positionRightLeft','targetElement':FWCIsnowballBubbleContainerObj,'bubbleDataTarget':"FWCIsnowballIcon"}
options.params=params;$.fn.altMetric.bubble.addBubbleContent(options);};$.fn.altMetric.buildRightModule.drawscholarlyactivity=function(options){var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.counts;var buckets=counts.hasOwnProperty("buckets")?counts.buckets:{};var scholarActivity=buckets.hasOwnProperty("scholar_activity")?buckets.scholar_activity:{};var mendeleyCount=(scholarActivity.hasOwnProperty("break_down")&&scholarActivity.break_down.hasOwnProperty("mendeley"))?scholarActivity.break_down.mendeley:0;var percentiles=altMetricData.hasOwnProperty('metrics')&&altMetricData.metrics.hasOwnProperty('percentiles')?altMetricData.metrics.percentiles:[];var contextScoreCheck=percentiles.length>0&&percentiles[0].hasOwnProperty('context_for_score')?percentiles[0].context_for_score:{};var schActProgressData=(!$.isEmptyObject(contextScoreCheck)&&contextScoreCheck.hasOwnProperty("mendeley"))?contextScoreCheck.mendeley:0;var medeleyImageType='mendeley';var medmainContainerId='metrics_mendeley_Readers';var medimgTypeName;if(mendeleyCount>1){medimgTypeName=options.labels.sidebar.mendeleyReaders.mendeleyText.plural();}
else{medimgTypeName=options.labels.sidebar.mendeleyReaders.mendeleyText.singular();}
options.contentContainer=options.secondSection;$.fn.altMetric.buildRightModule.drawMetricsContainer(options,{imageType:medeleyImageType,mainContainerId:medmainContainerId,totalCount:mendeleyCount,imgTypeName:medimgTypeName,percentCount:schActProgressData});return{'type':medeleyImageType,'count':mendeleyCount,'break_down':scholarActivity.break_down};};$.fn.altMetric.buildRightModule.drawscholarlycommentary=function(options){var altMetricData=options.data.hasOwnProperty('altMetricData')?options.data.altMetricData:{};var counts=altMetricData.counts;var scholarcommentary=counts.hasOwnProperty('buckets')&&counts.buckets.hasOwnProperty('scholar_commentary')?altMetricData.counts.buckets.scholar_commentary:[];var scholCommBreakdown=scholarcommentary.hasOwnProperty("break_down")?scholarcommentary.break_down:{};var scholCommItems=$.fn.altMetric.helper.getKeys(scholCommBreakdown);var scholCommItemsCount=scholCommItems.length;var blogsCount=(scholarcommentary.hasOwnProperty("break_down")&&scholarcommentary.break_down.hasOwnProperty("blogs"))?scholarcommentary.break_down.blogs:0;var reviewsCount=(scholarcommentary.hasOwnProperty("break_down")&&scholarcommentary.break_down.hasOwnProperty("f1000"))?scholarcommentary.break_down.f1000:0;if(!reviewsCount>0){reviewsCount=(scholarcommentary.hasOwnProperty("break_down")&&scholarcommentary.break_down.hasOwnProperty("pubpeer"))?scholarcommentary.break_down.pubpeer:0;}
var wikipediaCount=(scholarcommentary.hasOwnProperty("break_down")&&scholarcommentary.break_down.hasOwnProperty("wikipedia"))?scholarcommentary.break_down.wikipedia:0;var schCommMainContainerId='sch_comm_metrics';var schCommtotalCount=0;var scholarlyCommentaryType="";var schCommtotalCount1=0;var scholarlyCommentaryType1="";var schCommImgTypeName1;var schcommentrylabel=options.labels.sidebar.schcomment;if(blogsCount>0||reviewsCount>0||wikipediaCount>0){var schCommImgTypeName;if(blogsCount>0){scholarlyCommentaryType="blogs";schCommtotalCount=blogsCount;}
else if(reviewsCount>0){scholarlyCommentaryType="reviews";schCommtotalCount=reviewsCount;}
else if(wikipediaCount>0){scholarlyCommentaryType="wikipedia";schCommtotalCount=wikipediaCount;}
if(schCommtotalCount>1){schCommImgTypeName=schcommentrylabel[scholarlyCommentaryType].plural();}
else{schCommImgTypeName=schcommentrylabel[scholarlyCommentaryType].singular();}
$.fn.altMetric.buildRightModule.drawMetricsContainer(options,{imageType:scholarlyCommentaryType,mainContainerId:schCommMainContainerId,totalCount:schCommtotalCount,imgTypeName:schCommImgTypeName,percentCount:0});}
var scholdataOrder=['blogs','pubpeer','f1000','wikipedia','qa'];if(scholCommItemsCount==2){$.each(scholdataOrder,function(i,orderval){if(scholCommBreakdown[orderval]!==undefined){if(orderval=='blogs'){scholarlyCommentaryType1="blogs";schCommtotalCount1=blogsCount;}
else if(orderval=='pubpeer'){scholarlyCommentaryType1="reviews";schCommtotalCount1=reviewsCount;}
else if(orderval=='wikipedia'){scholarlyCommentaryType1="wikipedia";schCommtotalCount1=wikipediaCount;}
if(schCommtotalCount1>1){schCommImgTypeName1=schcommentrylabel[scholarlyCommentaryType].plural();}
else{schCommImgTypeName1=schcommentrylabel[scholarlyCommentaryType].singular();}}});return{'type':scholarlyCommentaryType,'count':schCommtotalCount,'break_down':scholarcommentary.break_down,imageType:scholarlyCommentaryType1,mainContainerId:schCommMainContainerId,totalCount:schCommtotalCount1,imgTypeName:schCommImgTypeName1,percentCount:0};}
return{'type':scholarlyCommentaryType,'count':schCommtotalCount,'break_down':scholarcommentary.break_down};};})(jQuery)
var ScopusAltMetric={'metricURL':"pubMetDataAjax.uri",'citationDataURL':"pubmetrixCitationsAjax.uri",'paramData':{'data':{"requestType":"","eid":"","isPreview":"",'sourceIssnArray':[],}},"externalConfigurations":{'citationDataURL':"pubmetrixCitationsAjax.uri",'backToArticleURL':"display.uri",'backToArticleLinkOrigin':"publicationMetricPage",'helpPageIds':{'overview':5564,'citations':5566,'scholarlyActivity':5567,'scholarlyCommentary':5569,'massMedia':5570,'socialActivity':5571,'FWCI':5518,'aboutAltMet':5416,'dataProvidedBy':5815}},"configurations":{"overview":{"isDefault":true},"citations":{},"scholarlyActivity":{},"scholarlyCommentary":{},"massMedia":{},'socialActivity':{}}};ScopusAltMetric.getMetrics=function(page){ScopusAltMetric.externalConfigurations.getNextPage=ScopusAltMetric.getNextPageData;ScopusAltMetric.externalConfigurations.openGlobalhelp=ScopusAltMetric.openGlobalhelp;ScopusAltMetric.externalConfigurations.addKeyevent=ScopusAltMetric.addKeyevent;ScopusAltMetric.externalConfigurations.metricValues=ScopusAltMetric.metricValues;var parameter={"configurations":ScopusAltMetric.configurations,"externalConfigurations":ScopusAltMetric.externalConfigurations};if(ScopusAltMetric.paramData.hasOwnProperty('isRight')&&ScopusAltMetric.paramData.isRight){parameter.isRight=ScopusAltMetric.paramData.isRight;parameter.container="";parameter.metricpageURL="pubmetrics.uri";}
var metricData=jQuery.get(ScopusAltMetric.metricURL,{jsonData:JSON.stringify(ScopusAltMetric.paramData)});metricData.done(function(response){parameter.data=response;if(response.apiResponseIssue===true){if(page==='altMetric'){$(".altMetric-Container").append('<div id="errorMessageContainer" role="alert"><span>'+altMetric.labels.common.errorMessage()+'</span></div>');}
else{$("#profilerightinside .altMetric-Container").hide();}}
else{$(".altMetric-Container").altMetric(parameter);}}).always(function(response,status){if(typeof console!=="undefined"){console.log("Metric retrieval status: "+status);}});};function hideBubbleAll(){jQuery(document).on("keyup",function(e){var code=e.keyCode||e.which;if(code===27){Bubble.forceHideAll(e);ScopusLoginShowHideOptionalLeft.removeBubbleMargin('altmetricCnt');}});}
var setBubbleCnt={buildSetAlertBubble:function(e){e.preventDefault();var param={"loadingText1":alertProp.alert.setup.loading.text(),"loadingText2":alertProp.alert.setup.loading.text(),"loadDivContainer":"outerWrapper"};var datasetAlertURL=jQuery('.altMetric-Container').attr('data-alertUrl');scopusTab.showHideLoadingContainer(param);MessageContainer.removeMsgContatiner();retrieveAlertPop(datasetAlertURL,e);},buildBubble:function(id,data,e,hideCallback){e.preventDefault();var alertContainer="#"+id+"-data";jQuery(alertContainer).html(data);e["data"]={position:Bubble.positionRightLeft,setDataBack:false};if(id==='loginRegPopup'||id==='saveRegPopup'){var bubleData={position:Bubble.positionRightLeft,setDataBack:false};bubleData.target=$('#'+id);Bubble.show(bubleData);}else{Bubble.showBubble(e);}
if(jQuery('#bubble-'+id).length){ScopusLoginShowHideOptionalLeft.buidConatinerLeft('altmetricCnt',id);}
if(jQuery.isFunction(hideCallback)&&id==='loginRegPopup'){e["data"].hideCallback=loginRegReset();}else if(jQuery.isFunction(hideCallback)&&id==='saveRegPopup'){e["data"].hideCallback=saveRegReset();}}};jQuery('div#altmetricCnt').on('click','#btnAlertSubmit',function(){submitAlert.alertConfirmationMessage=alertProp.alert.message.document.newalert(),submitAlert.alertIdentifier='saveAsAlert',submitAlert.alertType='documentAlert',submitAlert.alertFornName='DocumentAlertValidatedForm',submitAlert.checkforDuplicateNames()});function retrieveAlertPop(alertUrl,e){jQuery.ajax({type:"POST",url:alertUrl,dataType:"html",success:function(data){setBubbleCnt.buildBubble('saveAsAlert',data,e,'');setinitialValuesonTextArea();e.preventDefault();setFrequency('');jQuery('#frequency').bind('change',function(){setFrequency('change');});scopusTab.hideLoadingOverlay();submitAlert.setEllipsisQuery();}});};ScopusAltMetric.getNextPageData=function(pageNo,postType,successCallback,failureCallBack){var param=ScopusAltMetric.paramData;param.data.requestType='paginate';param.data.postType=postType;param.data.offset=(pageNo)*30;param.data.size=30;var metricData=jQuery.get(ScopusAltMetric.metricURL,{jsonData:JSON.stringify(param)});metricData.done(function(response){if(response.apiResponseIssue===true){if(typeof failureCallBack==='function'){failureCallBack(response);}}
else{if(typeof successCallback==='function'){successCallback(response);}}});};ScopusAltMetric.setMenuNavPos=function(){jQuery(window).scroll(function(){if(jQuery('.mainNavSect').length&&jQuery(window).scrollTop()>jQuery('.mainNavSect').offset().top){if(!jQuery('#mainNav').hasClass('mainNavFxd')){jQuery('#mainNav').addClass('mainNavFxd');}}
else{jQuery('#mainNav').removeClass('mainNavFxd');}});};ScopusAltMetric.buildHelpMenuBubble=function(obj){Bubble.setRight=function(data){var element=data.$element.get(0);var top=jQuery(element).position().top+data.$element.outerHeight();var bubbleWidth=data.$bubble.outerWidth();var right=jQuery(element).position().left-(bubbleWidth-(data.$element.width()));data.$bubbleArrow.addClass("bubble-arrow-right");if(jQuery(element).attr('id')==='helpMenuLnk'){data.$bubbleArrow.css({left:(bubbleWidth-31)+"px"});data.$bubble.css({top:top+"px",left:(right+25)+"px"});}
else{data.$bubbleArrow.css({left:(bubbleWidth-32)+"px"});data.$bubble.css({top:top+"px",left:right+"px"});}};obj.click(function(e){e["data"]={position:Bubble.positionRight,setDataBack:true};if(jQuery('#bubble-helpMenuLnk').is(':visible')){Bubble.forceHideAll(e);}
else{Bubble.showBubble(e);}
e.preventDefault();});};ScopusAltMetric.openGlobalhelp=function(helpId){openGlobalhelp('/standard/help.uri?zone=TopNavBar&origin=searchbasic&topic='+helpId,'altmetHelp',760,570,0);}
ScopusAltMetric.addKeyevent=function(eid,previousTab,newTab){var redirectUrl='/record/pubmetrics/keyevent.uri?eid='+eid
+'&previousTab='+previousTab
+'&newTab='+newTab
+'&origin=publicationMetricsPage';jQuery.ajax({type:"GET",url:redirectUrl,success:function(){}});}
ScopusAltMetric.metricValues=function(value){if(typeof prs!=="undefined"){prs.rt(value);}}
ScopusAltMetric.loadIssnData=function(){var sourceIssnArray=[];jQuery.getJSON("bundles/issnJson.js",function(json){jQuery.each(json.ISSNData,function(index,data){sourceIssnArray.push(data.ISSN);});ScopusAltMetric.paramData.data.sourceIssnArray=sourceIssnArray;});}
ScopusAltMetric.init=function(){var container=jQuery(".altMetric-Container");var page=(typeof container!=='undefined'&&container.attr("data-page")!=="")?container.attr("data-page"):"recordPage";ScopusAltMetric.paramData.data.isPreview=container.attr("data-isPreview");if(page==='altMetric'){var eid=container.attr("data-eid");var title=container.attr("data-title");if(typeof eid!=="undefined"&&eid!==""){ScopusAltMetric.paramData.data.eid=eid;}
if(typeof title!=="undefined"&&title!==""){ScopusAltMetric.paramData.data.title=title;}
var articleURL=container.attr("data-articleURL");if(typeof articleURL!=="undefined"&&articleURL!==""){ScopusAltMetric.externalConfigurations.backToArticleURL=articleURL;}
if(!(articleURL.indexOf("eid=")>-1)){ScopusAltMetric.externalConfigurations.backToArticleURL+='?eid='+ScopusAltMetric.paramData.data.eid;}
ScopusAltMetric.setMenuNavPos();jQuery('body').die("click").on('click',function(e){if(!jQuery(e.target).closest('#exportTrigger')[0]){Bubble.hideAll(e);}
if(!jQuery(e.target).closest('#bubbleContent-saveAsAlert')[0]){ScopusLoginShowHideOptionalLeft.removeBubbleMargin('altmetricCnt');}});var userStatus=jQuery('#loggedinUserStatus');if(userStatus.length>0){jQuery('#altmetricCnt').on("click","#saveAsAlert",setBubbleCnt.buildSetAlertBubble);}else{jQuery('#altmetricCnt').on("click","#saveAsAlert",function(e){e.preventDefault();jQuery('#saveAsAlert').parent().addClass('CARS_panelClass');setBubbleCnt.buildBubble('saveAsAlert',jQuery('#login_pop_container').html(),e,'');});}
hideBubbleAll();jQuery("#closeAlertPopup, #closeloginPopup").live('click',function(e){Bubble.forceHideAll(e);e.preventDefault();ScopusLoginShowHideOptionalLeft.removeBubbleMargin('altmetricCnt');});}
else if(page==='recordPage'){ScopusAltMetric.paramData.isRight=true;ScopusAltMetric.paramData.data.articleData={};ScopusAltMetric.paramData.data.articleData.citedCount=$(".altMetric-Container").attr("data-citedCount");ScopusAltMetric.paramData.data.eid=jQuery('#currentRecordPageEID').val();ScopusAltMetric.paramData.data.requestType="limitPosts";}
else{}
ScopusAltMetric.getMetrics(page);}
jQuery(document).ready(function(){ScopusAltMetric.loadIssnData();ScopusAltMetric.init();});var SDPA={endPoints:feMetricUrl.split(","),metricSent:false,init:function(){if(window.addEventListener){window.addEventListener('load',SDPA.loadEvents,false);window.addEventListener('beforeunload',SDPA.beforeUnloadEvents,false);}else{window.attachEvent('onload',SDPA.loadEvents);window.attachEvent('onbeforeunload',SDPA.beforeUnloadEvents);}},loadEvents:function(){for(i in SDPA.endPoints){endPoint=SDPA.endPoints[i];SDPA.sendIndex(endPoint);SDPA.sendPage(endPoint);}},beforeUnloadEvents:function(){for(i in SDPA.endPoints){endPoint=SDPA.endPoints[i];SDPA.pcrSend(endPoint);}},hashCode:function(stringToEncode){var encodedString=0;if(stringToEncode.length===0)
return encodedString;for(var i=0;i<stringToEncode.length;i++){var letr=stringToEncode.charCodeAt(i);encodedString=(encodedString<<5)-encodedString+letr;encodedString=encodedString&encodedString;}
return encodedString;},pcrSend:function(beaconEndpoint){if(Object.keys){if(prs&&(Object.keys(prs).length>1&&Object.keys(prs).length<17)){if(SDM.cpc){prs.cpc=SDM.cpc;}else{prs.cpc='SD';}
prs.pagetype=SDM.pageType;prs.sdsh=SDPA.hashCode(SDM.si.sds);prs.tidh=SDPA.hashCode(SDM.tid);if('performance'in window){var wpt=window.performance.timing;prs.navigationStart=wpt.navigationStart;}else{prs.navigationStart=-1;}
var queryStr='';var prsLen=Object.keys(prs).length;for(var i=1;i<prsLen;i++){var tOfV=typeof prs[Object.keys(prs)[i]];if(tOfV=='string'||tOfV=='number'){if(queryStr!==''){queryStr+='&';}
queryStr+=Object.keys(prs)[i]+'='+prs[Object.keys(prs)[i]];}}
SDPA.trackItem(beaconEndpoint+"/timers?"+queryStr);}}},sendIndex:function(beaconEndpoint){var sds=SDM.si.sds,tid=SDM.tid,sdsh=SDPA.hashCode(sds),tidh=SDPA.hashCode(tid),idxBase="",absf="",maxf="";if(SDM.cpc){idxBase+='cpc='+SDM.cpc;}else{idxBase+="cpc=SD";}
idxBase+="&pagetype="+SDM.pageType;idxBase+="&sds="+sds;idxBase+="&tid="+tid;idxBase+="&sdsh="+sdsh;idxBase+="&tidh="+tidh;if(document.documentElement.clientWidth&&document.documentElement.clientHeight){idxBase+="&winHeight="+document.documentElement.clientHeight;idxBase+="&winWidth="+document.documentElement.clientWidth;}
idxBase+="&domCount="+document.getElementsByTagName("*").length;if("optimizely"in window)
if("data"in window.optimizely&&"state"in window.optimizely.data){var n=window.optimizely.data.state.activeExperiments;var r=n.length;var i="&oexp=";for(var s=0;s<r;s++)
if(s+1<r)
i+=n[s]+"|";else
i+=n[s];idxBase+=i;}
if('ud'in SDM){idxBase+="&ud="+SDM.ud;}
SDPA.trackItem(beaconEndpoint+"/idx?"+idxBase);},sendPage:function(beaconEndpoint){if("performance"in window){if("timing"in window.performance){var navigationTiming=window.performance.timing;var pageBase="";if(SDM.cpc){pageBase+='cpc='+SDM.cpc;}else{pageBase+="cpc=SD";}
pageBase+="&pagetype="+SDM.pageType;pageBase+="&sdsh="+SDPA.hashCode(SDM.si.sds);pageBase+="&tidh="+SDPA.hashCode(SDM.tid);if(document.location.href){pageBase+="&href="+encodeURIComponent(document.location.href);}
if(navigationTiming.loadEventEnd>0){for(var timer in navigationTiming){if(typeof navigationTiming[timer]=='number'){pageBase+="&"+timer+"="+navigationTiming[timer];}}
if(typeof chrome!="undefined"){if("loadTimes"in chrome){pageBase+="&msFirstPaint="+Math.round(chrome.loadTimes().firstPaintTime*1E3);}}
for(i in SDPA.endPoints){endpoint=SDPA.endPoints[i]
SDPA.trackItem(endpoint+"/pageReport?"+pageBase);if(typeof console!=="undefined"){console.log("Page report :: "+endpoint+"/pageReport?"+pageBase);}}
SDPA.metricSent=false;}else{if(!SDPA.metricSent){SDPA.metricSent=true;setTimeout(SDPA.sendPage,100);}}}}},trackItem:function(value){var image=new Image();image.width=0;image.height=0;image.style.display='none';image.src=value;document.body.appendChild(image);},};SDPA.init();var scopusTab={isAjaxSuccess:false,firstTimeout:false,secondTimeout:false,timer:0,menuItems:[],loadDivContainer:"",loadingText1:"",loadingText2:"",buildTab:function(data,level){var objDIV=jQuery('<div >',{"class":"tabFunc"});var objUL=jQuery('<ul>',{'role':'tablist'});var objDivFrstTabCnt=jQuery('<div>');objDIV.append(objUL);jQuery.each(data,function(index,item){if(item.objTitleCount>0||item.objTitleCount==-1||item.objTitleCount==-2){var divCnt=[item.objTabTitle];if(item.objTitleCount==-2){divCnt.push('<span class="tabTitleCount">(0)</span>');}else if(item.objTitleCount!=-1){divCnt.push('<span class="tabTitleCount">(',item.objTitleCount,')</span>');}
var divObj=jQuery('<div>',{html:divCnt.join('')});var tabId=item.hasOwnProperty("reference")?item.reference:level+"-"+index;var tabToolTip=item.hasOwnProperty("toolTip")?item.toolTip:item.objTabTitle;var aObj=jQuery('<a>',{"href":"#lvl"+level+"Tab"+index,"id":"a"+tabId,"data-id":tabId,"title":tabToolTip,'role':'presentation'}).append(divObj);var objLI=jQuery('<li>',{'id':tabId,'role':'tab'}).append(aObj);objUL.append(objLI);var divfrstLvlTabCnt=jQuery('<div>',{"class":"secndLvlTabs",id:"lvl"+level+"Tab"+index,'role':'tabpanel','aria-labelledby':tabId});if(item.hasOwnProperty('objSubTabTitle')&&item.objSubTabTitle.length>0){var objSubTab=scopusTab.buildTab(item.objSubTabTitle,2);divfrstLvlTabCnt.append(objSubTab);}
divfrstLvlTabCnt.append(jQuery('#'+item.objCntHoldID));objDIV.append(divfrstLvlTabCnt);}});objDIV.append(objDivFrstTabCnt.html());objDIV.append('<div class="clear"></div>');return objDIV;},buildTotalRow:function(tableID,firstColValue,totalUrl,totalDocuments,urlTitle){var tableObj=jQuery('#'+tableID+' tr:last-child').parent('tbody');var rowObj=jQuery("<tr>");var firstCellObj=jQuery("<td>",{html:firstColValue,title:firstColValue});var secondCellObj=jQuery("<td>");var totalLinkObj=totalUrl==''?jQuery("<a>",{'html':totalDocuments,'class':'previewTxt','title':urlTitle}):jQuery("<a>",{'html':totalDocuments,'title':urlTitle,'href':totalUrl});secondCellObj.append(totalLinkObj);rowObj.append(firstCellObj);rowObj.append(secondCellObj);tableObj.append(rowObj);},buildAnchorTag:function(htmlContent,url,urlTitle){var anchorObj=["<a href='",url,"' title='",urlTitle,"'>",htmlContent,"</a>"];return anchorObj.join('');},buildPreviewAnchorTag:function(htmlContent,urlTitle){var anchorObj=["<a "];anchorObj.push(" class='previewTxt' ");anchorObj.push("title='",urlTitle,"'>",htmlContent,"</a>");return anchorObj.join('');},enableDisableTab:function(enable,tabIndexArray){if(enable){jQuery(".tabFunc").tabs({"disabled":[],active:0});scopusTab.setAriaForTab(0);}else{jQuery(".tabFunc").tabs({collapsible:true,active:-1,"disabled":tabIndexArray});}},adjustTableHead:function(){$(".tabFunc").bind('tabsshow',function(event,ui){var tableObj=$('div.dataTables_scrollBody>table:visible',ui.panel).dataTable();tableObj.fnAdjustColumnSizing(false);});},calcContHeightWithMfactor:function(mfactor){var windowWidth=jQuery(window).width();var windowHeight=jQuery(window).height();windowHeight=windowHeight<768?768:windowHeight;return(windowHeight*mfactor);},hideOnTime:function(){if(scopusTab.isAjaxSuccess){scopusTab.hideLoadingOverlay();scopusTab.loadingText1="";scopusTab.loadingText2="";}
else if(!scopusTab.firstTimeout){scopusTab.firstTimeout=true;scopusTab.loadingTimeout=setTimeout(scopusTab.hideOnTime,3000);}
else{jQuery('.loadingInnerText').html(scopusTab.loadingText2);scopusTab.secondTimeout=true;}},showLoadingOverlay:function(){var loadContainer=jQuery('#'+scopusTab.loadDivContainer);if(loadContainer.length){var scrollTop=$(window).scrollTop(),divOffset=loadContainer.offset().top,overlayTop=(divOffset-scrollTop);overlayTop=overlayTop>0?overlayTop:0;var modalDiv=jQuery('<div>',{'class':'ui-widget-overlay contOpacity','id':"loadingModalDiv",'style':'top:'+overlayTop});if(overlayTop==0){modalDiv.css("height",'100%');}
var divObj=jQuery('<div>',{'class':'loadingTableAndChart loadingImageAndTitle','id':'loadingContentContainer'});var innerTextObj=jQuery('<div>',{'class':'loadingInnerText','text':scopusTab.loadingText1});divObj.append(innerTextObj);loadContainer.append(divObj).append(modalDiv);jQuery('body').css("overflow",'hidden');}},hideLoadingOverlay:function(){jQuery('body').css("overflow",'auto');jQuery('#loadingModalDiv').remove();jQuery('#loadingContentContainer').remove();scopusTab.isAjaxSuccess=false;scopusTab.firstTimeout=false;scopusTab.secondTimeout=false;},showHideLoading:function(params){if(jQuery.type(params)!="undefined"&&scopusTab.loadingText1==""&&params.hasOwnProperty("loadingText1")){scopusTab.loadingText1=params.loadingText1;if(params.hasOwnProperty("loadingText2")){scopusTab.loadingText2=params.loadingText2;}
if(params.hasOwnProperty("loadDivContainer")){scopusTab.loadDivContainer=params.loadDivContainer;}}
if(scopusTab.secondTimeout){scopusTab.hideLoadingOverlay();scopusTab.secondTimeout=false;scopusTab.loadingText1="";scopusTab.loadingText2="";}else{var loadingContentContainer=jQuery("#loadingContentContainer");if(loadingContentContainer.length<=0){scopusTab.showLoadingOverlay();jQuery('.loadingTableAndChart').show();scopusTab.isAjaxSuccess=false;scopusTab.loadingTimeout=setTimeout(function(){scopusTab.hideOnTime();clearInterval(scopusTab.setInterval);},2000);}else{scopusTab.isAjaxSuccess=true;if(scopusTab.firstTimeout){scopusTab.hideOnTime();clearTimeout(scopusTab.loadingTimeout);}}}},showHideLoadingContainer:function(params){if(jQuery.type(params)!="undefined"&&scopusTab.loadingText1==""&&params.hasOwnProperty("loadingText1")){scopusTab.loadingText1=params.loadingText1;if(params.hasOwnProperty("loadingText2")){scopusTab.loadingText2=params.loadingText2;}
if(params.hasOwnProperty("loadDivContainer")){scopusTab.loadDivContainer=params.loadDivContainer;}}
if(scopusTab.secondTimeout){scopusTab.hideLoadingOverlay();scopusTab.secondTimeout=false;scopusTab.loadingText1="";scopusTab.loadingText2="";}else{var loadingContentContainer=jQuery("#loadingContentContainer");if(loadingContentContainer.length<=0){scopusTab.showLoadingOverlay();jQuery('.loadingTableAndChart').show().css({'top':'10%',"left":"50%"});scopusTab.isAjaxSuccess=false;scopusTab.loadingTimeout=setTimeout(function(){scopusTab.hideOnTime();clearInterval(scopusTab.setInterval);},2000);}else{scopusTab.isAjaxSuccess=true;if(scopusTab.firstTimeout){scopusTab.hideOnTime();clearTimeout(scopusTab.loadingTimeout);}}}},init:function(tableHdrWidth){var objTab=scopusTab.buildTab(scopusTab.menuItems,1);jQuery(".firstLvlTabs").append(objTab);if(tableHdrWidth){jQuery(".tabFunc").tabs({"show":function(event,ui){var oTable=jQuery('div.dataTables_scrollBody>table.display',ui.panel).dataTable();if(oTable.length>0){oTable.fnAdjustColumnSizing();}}});}
jQuery(".tabFunc").tabs({select:function(event,ui){jQuery('div.firstLvlTabs ul li a').attr('aria-selected','false');jQuery(ui.tab).attr('aria-selected','true');Bubble.hideAll(event);}});scopusTab.setAriaForTab(0);},setAriaForTab:function(tabIndex){jQuery('div.firstLvlTabs ul li a').attr('aria-selected','false');jQuery('div.firstLvlTabs ul li:nth-child('+(++tabIndex)+') a').attr('aria-selected','true');}};var chartExport={exportObjId:"export_results",hrefVal:'#exportChart',exportBubbleClose:function(e){e["data"]={elementId:this.exportObjId};Bubble.hide(e);},linkNav:[],buildExportBubble:function(){var linkNavSize=chartExport.linkNav.length;var divObj=jQuery("<div>",{"id":this.exportObjId+'-data',"class":"bubble-source-data"});var ulObj=jQuery("<ul>",{'id':'expLinkNav'});divObj.append(ulObj);for(var i=0;i<linkNavSize;i++){var navLinkClass="exportLinkNormal";var navObj=chartExport.linkNav[i];var liObj=jQuery("<li>",{"id":'row'+i});var aObj=jQuery("<a>",{"id":navObj.id,href:"#"+navObj.value,"class":navLinkClass,"title":navObj.title,"html":navObj.text,"onClick":navObj.clickFn});liObj.append(aObj);ulObj.append(liObj);}
jQuery("#"+this.exportObjId).parent().append(divObj);jQuery('body').off("click.hideExpBubble").on('click.hideExpBubble',function(e){Bubble.hideAll(e);});this.enableLink();jQuery(".exportPrintEmailLinkSec").on('focus',"#bubble-export_results",{'elementId':'export_results'},chartEmail.hideOnFocusOut);},disableLink:function(){var exportLink=jQuery("#"+this.exportObjId);var exportLinkParent=exportLink.unbind("click").bind("click",function(e){e.preventDefault();jQuery(e.target).blur();}).parent("div");if(!exportLinkParent.hasClass("lnkDisabled")){exportLinkParent.addClass("lnkDisabled");}
exportLink.removeAttr("href");},enableLink:function(){var exportLink=jQuery("#"+this.exportObjId);exportLink.parent("div").removeClass("lnkDisabled");exportLink.unbind("click").bind("click",{position:Bubble.positionCenter,setDataBack:true},Bubble.showBubble);exportLink.attr("href",chartExport.hrefVal);}};var chartEmail={emailWaterMark:"",emailTitle:"",emailUsrTitle:"",emailWaterMarkUserMail:"",emailBubbleHeader:"",emailBubbleDesc:"",emailBubbleDescUserMail:"",emailFormatLabel:"",emailFormatValue:"",sendButtonLabel:"",sendButtonTitle:"",closeButtonTitle:"",userMailId:"",emailFormatValueHTML:"",emailFormatValueTEXT:"",hrefVal:'#emailLink',loggedInUser:false,affilAuthEmailPopup:false,formAction:'',privacyPolicy:'',privacyPolicyToolTip:'',sendButtonClick:function(e){e.preventDefault();},removeEmailErrMsg:function(){jQuery('#errorMsgContainer').remove();},closeButtonClick:function(e){e.preventDefault();Bubble.hide(e);chartEmail.removeEmailErrMsg();},hideOnFocusOut:function(event){jQuery('body').die("focus.email").live('focus.email',{'elementId':event.data.elementId},chartEmail.hideBubble);},hideBubble:function(event){Bubble.hideAll(event);var elementId=event.data.elementId;if(!jQuery(event.target).closest('#'+elementId)[0]&&!jQuery(event.target).closest('#bubble-'+elementId)[0]){jQuery('body').die("focus.email");}},emailFormSubmit:function(event){event.preventDefault();jQuery('#sendButton').click();},buildEmailBubble:function(obj){var objId=jQuery(obj).attr("id");if(typeof objId=="undefined"){jQuery(obj).attr("id","emailChart");objId="emailChart";}
var divObj=jQuery("<div>",{id:objId+'-data',"class":"bubble-source-data"});var cntDivObj=jQuery("<div>",{"class":"cntEmailBubble"});var clsAncObj=jQuery("<a>",{"href":"#","alt":"","title":this.closeButtonTitle,"class":"clsEmailBubble"});var formObj=jQuery("<form>",{id:'emailForm','onsubmit':'chartEmail.emailFormSubmit(event);'});var headerDivObj=jQuery("<div>",{"class":"emailHeader","html":this.emailBubbleHeader});var desvDivObj=jQuery("<div>",{"class":"emailDesc","html":this.emailBubbleDesc});var inputDivObj=jQuery("<div>",{"class":"addBackgroundWhiteEmail"});var inputObj=jQuery("<input>",{id:'emailId',title:this.emailTitle,name:'emailId',type:'text',"class":'defaultWaterMark'});inputDivObj.append(inputObj);var userInputDivObj=jQuery("<div>",{"class":"addBackgroundWhiteEmail"});var formatDivObj=jQuery("<div>",{"class":"emailformat"});var fmtLblObj=jQuery("<label>",{"class":"emailformatLbl",html:this.emailFormatLabel});if(this.affilAuthEmailPopup){var userDescDivObj=jQuery("<div>",{"class":"emailDesc","html":this.emailBubbleDescUserMail});var userInputObj=jQuery("<input>",{id:'userEmailId',title:this.emailUsrTitle,name:'userEmailId',type:'text',"class":'defaultWaterMark'});userInputDivObj.append(userInputObj);var spanRadiobtn=jQuery("<span>",{"class":"custom-radioBtn htmlAndText"});var htmlFmtSpanObj=jQuery("<input>",{"type":"radio","id":"frmtHTML","name":"emailFrmt","title":this.emailFormatValueHTML,"checked":"checked","value":this.emailFormatValueHTML});var htmlFmtLabelObj=jQuery("<label>",{"for":"frmtHTML","id":"emailFrmtHTML","html":this.emailFormatValueHTML});var textFmtSpanObj=jQuery("<input>",{"type":"radio","id":"frmtTEXT","name":"emailFrmt","title":this.emailFormatValueTEXT,"value":this.emailFormatValueTEXT});var textFmtLabelObj=jQuery("<label>",{"for":"frmtTEXT","id":"emailFrmtTEXT","html":this.emailFormatValueTEXT});var spanRadioCircle=jQuery("<span>",{"class":"circle"});var spanRadioDot=jQuery("<span>",{"class":"dot"});var objRadioBtn=spanRadioCircle.append(spanRadioDot);var objHTMLRadio=spanRadiobtn.clone().append(htmlFmtSpanObj).append(objRadioBtn.clone());var objTEXTRadio=spanRadiobtn.clone().append(textFmtSpanObj).append(objRadioBtn.clone());formatDivObj.append(fmtLblObj).append(objHTMLRadio).append(htmlFmtLabelObj).append(objTEXTRadio).append(textFmtLabelObj);}else{var fmtSpanObj=jQuery("<span>",{"class":"emailformatSpan",html:this.emailFormatValue});formatDivObj.append(fmtLblObj).append(fmtSpanObj);}
var buttonDivObj=jQuery("<div>",{"class":"emailButtons"});var buttonObj=jQuery("<input>",{"id":"sendButton","type":"button","class":"btnEnable","disabled":"disabled","value":this.sendButtonLabel,"title":this.sendButtonTitle});buttonDivObj.append(buttonObj);if(this.affilAuthEmailPopup){var headerDivObjAuthAffil=jQuery("<div>",{"class":"emailHeader"});var objDivEmailCnt=jQuery('<div>',{"class":"emailHdrTxtPos","html":this.emailBubbleHeader});var privPolDiv=jQuery('<div>',{"class":"emailPravicyPol"});var anchPrivPol=jQuery('<a>',{"class":"txtSmaller","href":"../../https@www.elsevier.com/locate/privacypolicy","title":this.privacyPolicyToolTip,"target":"_blank","html":this.privacyPolicy});var privPolClear=jQuery('<div>',{"class":"clear"});privPolDiv.append(anchPrivPol);headerDivObjAuthAffil.append(objDivEmailCnt).append(privPolDiv).append(privPolClear);formObj.append(headerDivObjAuthAffil).append(desvDivObj).append(inputDivObj).append(userDescDivObj).append(userInputDivObj).append(formatDivObj).append(buttonDivObj);}else{formObj.append(headerDivObj).append(desvDivObj).append(inputDivObj).append(formatDivObj).append(buttonDivObj);}
var clearDivObj=jQuery("<div>",{"class":"clear"});cntDivObj.append(clsAncObj).append(formObj).append(clearDivObj);divObj.append(cntDivObj);jQuery('body').die("click").live('click',{'elementId':'emailChart'},chartEmail.hideBubble);this.enableLink(obj);obj.unbind("click").bind("click",function(e){e["data"]={position:Bubble.positionRight,setDataBack:true};Bubble.showBubble(e);jQuery('#emailId_left').remove();chartEmail.setEmailWaterMark('emailId',chartEmail.emailWaterMark);if(chartEmail.affilAuthEmailPopup){jQuery('#userEmailId_left').remove();chartEmail.setEmailWaterMark('userEmailId',chartEmail.emailWaterMarkUserMail);}
chartEmail.emailBtnEnableDisable();jQuery(".cntEmailBubble a.clsEmailBubble").bind("click",{elementId:objId},chartEmail.closeButtonClick);jQuery("#emailId").focus();if(chartEmail.loggedInUser){jQuery('#userEmailId_left').addClass('displayNone');jQuery('#userEmailId').val(chartEmail.userMailId);}
jQuery("#sendButton").bind("click",{elementId:objId},chartEmail.sendButtonClick);}).parent().append(divObj);jQuery(".exportPrintEmailLinkSec").on('blur',"#bubble-emailChart",{'elementId':'emailChart'},chartEmail.hideOnFocusOut);},setEmailWaterMark:function(inputId,waterMarkText){jQuery('#'+inputId).searchForPlaceholder({left:{enabled:true,value:waterMarkText,type:"simple",classes:"searchForTxt"},right:{enabled:false}});},emailBtnEnableDisable:function(){jQuery('.cntEmailBubble').on('keyup','#emailId',function(event){if(event.keyCode!=9||event.keyCode!=18||event.keyCode!=13){var buttonObj=jQuery(".cntEmailBubble .btnEnable");if(event.type==='keyup'&&!buttonObj.hasClass("btnTxtBgActive")&&jQuery("#emailId").val()!=""){buttonObj.addClass("btnTxtBgActive").removeAttr('disabled');}else if((jQuery("#emailId").val()=="")&&event.type==='keyup'){buttonObj.removeClass("btnTxtBgActive").attr('disabled','disabled');}}});jQuery(".cntEmailBubble").on('paste','#emailId',function(){var buttonObj=jQuery(".cntEmailBubble .btnEnable");setTimeout(function(){buttonObj.addClass("btnTxtBgActive").removeAttr('disabled');},100);});jQuery(".cntEmailBubble").on('cut','#emailId',function(){var buttonObj=jQuery(".cntEmailBubble .btnEnable");setTimeout(function(){if(jQuery("#emailId").val()==""){buttonObj.removeClass("btnTxtBgActive").attr('disabled','disabled');}},100);});jQuery(".cntEmailBubble").on('input propertychange',function(){var buttonObj=jQuery(".cntEmailBubble .btnEnable");if(jQuery("#emailId").val()!=""){buttonObj.addClass("btnTxtBgActive").removeAttr('disabled');}});},disableLink:function(obj){var emailLinkParent=obj.unbind("click").bind("click",function(e){e.preventDefault();jQuery(e.target).blur();}).parent("div");if(!emailLinkParent.hasClass("lnkDisabled")){emailLinkParent.addClass("lnkDisabled");}
obj.removeAttr("href");},enableLink:function(obj,clickCallBack){obj.parent("div").removeClass("lnkDisabled");obj.attr("href",chartEmail.hrefVal);},adjustBubblePosi:function(initialBubbleTop){var newBubbleTop=initialBubbleTop;if(jQuery('#bubble-emailChart')!=undefined){if(newBubbleTop==0){newBubbleTop=jQuery('.icon.email').position().top
+jQuery('.icon.email').height()+4;}
jQuery('#bubble-emailChart').css('top',newBubbleTop);}
return newBubbleTop;}};var MessageContainer={WARNING_MSG:"warningMsgContainer",ERROR_MSG:"errorMsgContainer",INFO_MSG:"infoMsgContainer",CONFIRM_MSG:"confirmMsgContainer",messageType:"",msgContent:"",parentContainerObj:jQuery(".contentContainer"),isReplace:false,removeMessages:function(){var confirmationMessage=jQuery('#confirmMsgContainer');if(confirmationMessage.length>0){jQuery(confirmationMessage).remove();}
var exportSettingsSaveMessage=jQuery('.txtZoneInfoMsgContainer');if(exportSettingsSaveMessage.length>0){jQuery(exportSettingsSaveMessage).remove();}
var warningMessage=jQuery('#warningMsgContainer');if(warningMessage.length>0){jQuery(warningMessage).remove();}
var warningMessageObj=jQuery('.warningMsgContainer');if(warningMessageObj.length>0){jQuery(warningMessageObj).remove();}
var errorMessage=jQuery('#errorMsgContainer');if(errorMessage.length>0){jQuery(errorMessage).remove();}},removeMsgContatiner:function(){if(MessageContainer.messageType){jQuery('#'+MessageContainer.messageType).remove();}},insertMsgContainer:function(){if(MessageContainer.msgContent){MessageContainer.removeMsgContatiner();var messageType=MessageContainer.messageType!=""?MessageContainer.messageType:MessageContainer.INFO_MSG;if(MessageContainer.messageType==MessageContainer.ERROR_MSG){var msgObj=jQuery("<div>",{'id':messageType,'html':'<span class="ariaHidden">Error message</span>','role':'alert','aria-live':'assertive'});}else if(MessageContainer.messageType==MessageContainer.WARNING_MSG){var msgObj=jQuery("<div>",{'id':messageType,'html':'<span class="ariaHidden">Warning message</span>','role':'alert','aria-live':'assertive'});}else if(MessageContainer.messageType==MessageContainer.CONFIRM_MSG){var msgObj=jQuery("<div>",{'id':messageType,'html':'<span class="ariaHidden">Confirmation message</span>','role':'alert','aria-live':'assertive'});}else if(MessageContainer.messageType==MessageContainer.INFO_MSG){var msgObj=jQuery("<div>",{'id':messageType,'html':'<span class="ariaHidden">Information message</span>','role':'alert','aria-live':'assertive'});}
msgObj.append(MessageContainer.msgContent);if(MessageContainer.isReplace){MessageContainer.parentContainerObj.html(msgObj);}else{var parentObj=MessageContainer.parentContainerObj.length>0?MessageContainer.parentContainerObj:jQuery(".contentContainer");parentObj.prepend(msgObj);}}}};var EmailValidation={emailAddressId:"emailId",parentContainerObj:jQuery(".contentContainer"),validate:function(msg){var mailformat=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;var emailAddressObj=jQuery("#"+EmailValidation.emailAddressId);var emailValue=emailAddressObj.val();var noOfAt=(emailValue.match(/@/g)||[]).length;if(!assertNotEmptyString(emailValue)||noOfAt!==1||!mailformat.test(emailValue)){MessageContainer.removeMessages();MessageContainer.messageType=MessageContainer.ERROR_MSG;MessageContainer.msgContent=msg;MessageContainer.parentContainerObj=EmailValidation.parentContainerObj;MessageContainer.insertMsgContainer();return false;}else{return true;}},validateAddr:function(msg,emailAddr){var emailId=$.trim(emailAddr);var noOfAt=(emailId.match(/@/g)||[]).length;var mailformat=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if(!assertNotEmptyString(emailId)||noOfAt!==1||!mailformat.test(emailId)){MessageContainer.removeMessages();MessageContainer.messageType=MessageContainer.ERROR_MSG;MessageContainer.msgContent=msg;MessageContainer.parentContainerObj=EmailValidation.parentContainerObj;MessageContainer.insertMsgContainer();return false;}else{return true;}},successMsg:function(msg){MessageContainer.removeMessages();var msgObj=jQuery("<div>",{'id':"confirmMsgContainer",'class':"confirmMsgContainer",'html':msg,'role':'alert'});var spanObj=jQuery("<span>");msgObj.prepend(spanObj);EmailValidation.parentContainerObj.prepend(msgObj);}};var ScopusModalEmail={width:630,emailformURL:"",emailFormContent:"",cancelObj:"",submitObj:"",buildForm:function(linkElement,content){var dialogContainer=jQuery("<div>",{id:'dialogForm',"class":"dialogForm"});dialogContainer.append(content);linkElement.parent().append(dialogContainer);$("#dialogForm").dialog({autoOpen:false,dialogClass:'dialogContainer',width:this.width,modal:true,close:function(){}});},emailClick:function(event){event.preventDefault();$("#dialogForm").dialog("open");},getEmailForm:function(linkElement){jQuery.ajax({url:this.emailformURL,dataType:'html',error:function(){},success:function(data){ScopusEmail.buildForm(linkElement,data);}});},formSubmit:function(event){},init:function(linkElement){if(this.emailformURL!=""){this.getEmailForm(linkElement);}else if(this.emailFormContent!=""){ScopusEmail.buildForm(linkElement,this.emailFormContent);}
linkElement.on("click",ScopusEmail.emailClick);}};var ScopusDataTable={fnDrawCallback:function(datatableObj){jQuery(datatableObj.nScrollHead).find('th').each(function(index){if(!jQuery(this).hasClass('sorting_disabled')){var columnName=datatableObj.aoColumns[index].columnTitle;var title=datatableObj.aoColumns[0].fnUnsortedTitle(columnName);if(!jQuery(this).hasClass('sorting')){var ariaLabel=jQuery(this).attr("aria-sort");if(ariaLabel.toLowerCase().contains("descending")){title=datatableObj.aoColumns[0].fnDescTitle(columnName);}else if(ariaLabel.toLowerCase().contains("ascending")){title=datatableObj.aoColumns[0].fnAscTitle(columnName);}}
jQuery(this).attr({title:title});}});}};var ScopusLoginShowHideOptional={buidConatiner:function(parentContainerID,bubbleID){var showOptDiv="<div id='showMoreLgnOpt' class='moreLgnOpts'><a title='"+alertProp.SETALERT_LOGIN_MORE_LOGIN_OPT()+"' href='#' id='MoreLgnOpt'>"+alertProp.SETALERT_LOGIN_MORE_LOGIN_OPT()+"</a><span class='shwColOpt'> &gt;</span></div>";var collapseOptDiv="<div id='collapseOpt' class='moreLgnOpts'><span class='shwColOpt'>&lt; </span><a title='"+alertProp.SETALERT_LOGIN_COLLAPSE_LOGIN_OPT()+"' href='#' id='collLgnOpt'>"+alertProp.SETALERT_LOGIN_COLLAPSE_LOGIN_OPT()+"</a></div>";if(jQuery('#contentWrapper').length){jQuery('#contentWrapper #login_pop_container_logform .CARS_groupTitle').append("<a title='"+alertProp.SETALERT_LOGIN_CLOSE_TOOLTIP()+"' class='closeloginPopup' role='button' href='#' id='closeloginPopup'></a>");}
else{jQuery('main #login_pop_container_logform .CARS_groupTitle').append("<a title='"+alertProp.SETALERT_LOGIN_CLOSE_TOOLTIP()+"' class='closeloginPopup' role='button' href='#' id='closeloginPopup'></a>");}
if(jQuery('#'+parentContainerID+' #showMoreLgnOpt').length){jQuery('#'+parentContainerID+' #showMoreLgnOpt').remove();}
jQuery('#'+parentContainerID+' #login_pop_container_logform #login_forgot_pass').after(showOptDiv);jQuery('#'+parentContainerID+' #MoreLgnOpt').live('click',function(e){jQuery('#'+parentContainerID+' #bubble-'+bubbleID+' #login_pop_container_socialform').css({'display':'inline-block'});jQuery('#'+parentContainerID+' #showMoreLgnOpt').hide();if(jQuery('#'+parentContainerID+' #collapseOpt').length){jQuery('#'+parentContainerID+' #collapseOpt').remove();}
if(jQuery('#'+parentContainerID+' #social_providers').length){jQuery('#'+parentContainerID+' #login_pop_container_socialform #social_providers').after(collapseOptDiv);}
else{jQuery('#'+parentContainerID+' #login_pop_container_socialform #login_remote_access').after(collapseOptDiv);}
e.preventDefault();});jQuery('#'+parentContainerID+' #collLgnOpt').live('click',function(e){jQuery('#'+parentContainerID+' #bubble-'+bubbleID+' #login_pop_container_socialform').css({'display':'none'});jQuery('#'+parentContainerID+' #showMoreLgnOpt').show();e.preventDefault();});}};var ScopusLoginShowHideOptionalLeft={buidConatinerLeft:function(parentContainerID,bubbleID){var setBubbleRightpos=165+22;jQuery('#'+parentContainerID+' .altmet_citationalert_iconLink .bubble .bubble-content').addClass('showBubbleLeft');jQuery('#'+parentContainerID+' .altmet_citationalert_iconLink .bubble .bubble-content').css({'margin-left':''});var showOptDiv="<div id='showMoreLgnOptLeft' class='moreLgnOptsLeft'><span class='shwColOpt'> &lt;</span> <a title='"+alertProp.SETALERT_LOGIN_MORE_LOGIN_OPT()+"' href='#' id='MoreLgnOptLeft'>"+alertProp.SETALERT_LOGIN_MORE_LOGIN_OPT()+"</a></div>";var collapseOptDiv="<div id='collapseOptLeft' class='moreLgnOptsLeft'><a title='"+alertProp.SETALERT_LOGIN_COLLAPSE_LOGIN_OPT()+"' href='#' id='collLgnOptLeft'>"+alertProp.SETALERT_LOGIN_COLLAPSE_LOGIN_OPT()+"</a> <span class='shwColOpt'>&gt; </span></div>";jQuery('#contentWrapper #login_pop_container_logform .CARS_groupTitle').append("<a title='"+alertProp.SETALERT_LOGIN_CLOSE_TOOLTIP()+"' class='closeloginPopup' role='button' href='#' id='closeloginPopup'></a>");if(jQuery('#'+parentContainerID+' #showMoreLgnOptLeft').length){jQuery('#'+parentContainerID+' #showMoreLgnOptLeft').remove();}
jQuery('#'+parentContainerID+' #login_pop_container_logform #login_forgot_pass').after(showOptDiv);jQuery('#'+parentContainerID+' #MoreLgnOptLeft').live('click',function(e){var popupLoginForm=jQuery('#'+parentContainerID+' #bubble-'+bubbleID+' #login_pop_container_logform');var popupSocialForm=jQuery('#'+parentContainerID+' #bubble-'+bubbleID+' #login_pop_container_socialform');var popupSocialFormCnt=popupSocialForm.outerHTML();popupSocialForm.remove();jQuery(popupLoginForm).before(popupSocialForm);popupSocialForm.css({'display':'inline-block'});jQuery('#'+parentContainerID+' .altmet_citationalert_iconLink .bubble .bubble-content').css({'margin-left':'-'+setBubbleRightpos+'px'});jQuery('#'+parentContainerID+' #showMoreLgnOptLeft').hide();if(jQuery('#'+parentContainerID+' #collapseOptLeft').length){jQuery('#'+parentContainerID+' #collapseOptLeft').remove();}
if(jQuery('#'+parentContainerID+' #social_providers').length){jQuery('#'+parentContainerID+' #login_pop_container_socialform  #social_providers').after(collapseOptDiv);}
else{jQuery('#'+parentContainerID+' #login_pop_container_socialform #login_remote_access').after(collapseOptDiv);}
e.preventDefault();});jQuery('#'+parentContainerID+' #collLgnOptLeft').live('click',function(e){jQuery('#'+parentContainerID+' #bubble-'+bubbleID+' #login_pop_container_socialform').css({'display':'none'});jQuery('#'+parentContainerID+' #showMoreLgnOptLeft').show();jQuery('#'+parentContainerID+' .altmet_citationalert_iconLink .bubble .bubble-content').css({'margin-left':'0px'});e.preventDefault();});},removeBubbleMargin:function(parentContainerID){jQuery('#'+parentContainerID+' .altmet_citationalert_iconLink .bubble .bubble-content').css({'margin-left':''});}};var submitAlert={alertConfirmationMessage:'',alertIdentifier:'',alertType:'',alertFornName:'',checkforDuplicateNames:function(pageName){var param={"loadingText1":alertProp.alert.setup.loading.text(),"loadingText2":alertProp.alert.setup.loading.text(),"loadDivContainer":"outerWrapper"};var d=new Date();var gmtOffset=-(d.getTimezoneOffset()/60);jQuery("form[name = "+submitAlert.alertFornName+"] input[name='gmtOffset']").val(gmtOffset);var emptyFldmsg=alertProp.alert.error.mandatory.setalertpopup.js();var name=jQuery('form[name = '+submitAlert.alertFornName+'] #name').val();var email=jQuery('form[name = '+submitAlert.alertFornName+'] #emailAddressTextarea').val();if(!name||!email){MessageContainer.messageType=MessageContainer.ERROR_MSG;MessageContainer.msgContent=emptyFldmsg;MessageContainer.parentContainerObj=jQuery(".alertPopupErrMsg");MessageContainer.insertMsgContainer();if(name==''){jQuery('#name').focus();}
else if(email==""){jQuery('#emailAddressTextarea').focus();}
scopusTab.hideLoadingOverlay();return false;}
else{submitAlert.ShowLoadingoverlay();if(jQuery('input:hidden[name=duplicateAlertName]').length){var previousName=jQuery('input:hidden[name=duplicateAlertName]').val();var currentName=jQuery('#name').val();if(currentName===previousName){jQuery("input:hidden[name=replaceDuplicateTitle]").val("true");}}
submitAlert.handlePopupSubmit(pageName);}},handlePopupSubmit:function(pageName){var alertFormObject=jQuery("#alertPopoutForm");var alertSubmitUrl=alertFormObject.attr("action");var serializedFormContent=alertFormObject.serialize();var alertResponse=jQuery.post(alertSubmitUrl,serializedFormContent);jQuery('input[name="alertSubmitButton"]').attr("disabled","disabled");alertResponse.done(function(response){var alertPopupJson=response;if(alertPopupJson.hasOwnProperty("confirmationMessage")){var e={data:{elementId:submitAlert.alertIdentifier}};Bubble.hide(e);MessageContainer.messageType=MessageContainer.CONFIRM_MSG;MessageContainer.msgContent=submitAlert.alertConfirmationMessage;MessageContainer.parentContainerObj=jQuery("#clusterMessages");MessageContainer.insertMsgContainer();if(jQuery('.itemListsUL.selectedBg').length){submitAlert.showHideListLnkBgOnClose();submitAlert.showHideListLnkBg();}
if(typeof pageName!='undefined'&&pageName=='jMetrics'){var confObj=jQuery('#confirmMsgContainer');confObj.append("<a title='close' aria-label='close' data-dismiss='alert' class='iconSmall close' href='#'><span class='hidden-label'>Close</span>&nbsp;</a>");confObj.addClass('alert');}}else if(alertPopupJson.hasOwnProperty("errorMessage")){MessageContainer.messageType=MessageContainer.ERROR_MSG;if(alertPopupJson.hasOwnProperty("errorCode")&&alertPopupJson.errorCode=="alert.error.popup.duplicate.exists"){jQuery(".alertPopupErrMsg").append("<input type='hidden' name='duplicateAlertName' value='"+alertPopupJson.errorMessage+"' />");MessageContainer.msgContent=alertProp.alert.error.popup.duplicate.exists();}else{MessageContainer.msgContent=alertPopupJson.errorMessage;}
MessageContainer.parentContainerObj=jQuery(".alertPopupErrMsg");MessageContainer.insertMsgContainer();}else{jQuery('#setAlertContent').html(alertPopupJson);setinitialValuesonTextArea();jQuery('#frequency').bind('change',function(){setFrequency('change');});}
jQuery('input[name="alertSubmitButton"]').removeAttr('disabled');submitAlert.ShowLoadingoverlay();scopusTab.hideLoadingOverlay();});return false;},showHideListLnkBg:function(){if(jQuery('.itemListsUL li[data-hover="false"]').hasClass('lstRowHover')){jQuery('.itemListsUL li[data-hover="false"]').removeClass('lstRowHover');jQuery('.itemListsUL li[data-hover="false"] div.listItemLinkRow').removeAttr('style');}},showHideListLnkBgOnClose:function(){if(jQuery('.itemListsUL li[data-hover="true"]').hasClass('lstRowHover')&&jQuery('.itemListsUL li[data-hover="true"] div.linkRow').css('visibility')=='visible'){jQuery('.itemListsUL li[data-hover="true"]').removeClass('listItemHover lstRowHover');jQuery('.itemListsUL li[data-hover="true"] div.listItemLinkRow').removeAttr('style');}
else if(jQuery('.itemListsUL li[data-hover="true"]').hasClass('lstRowHover')){jQuery('.itemListsUL li[data-hover="true"]').removeClass('listItemHover lstRowHover');jQuery('.itemListsUL li[data-hover="true"] div.listItemLinkRow').removeAttr('style');}},ShowLoadingoverlay:function(){var param={"loadingText1":alertProp.alert.setup.loading.text(),"loadingText2":alertProp.alert.setup.loading.text(),"loadDivContainer":"outerWrapper"};scopusTab.showHideLoadingContainer(param);var topPos=jQuery(window).height()/2;var leftPos=jQuery(window).width()/2;jQuery('.loadingTableAndChart').show().css({'top':topPos,'left':leftPos});},setEllipsisQuery:function(){var queryCntHeight=jQuery(".queryCnt").height();var queryCntFontHeight=jQuery(".queryCnt").css("font-size");var queryCntTotalHeight=Math.ceil(queryCntHeight/parseInt(queryCntFontHeight));if(queryCntTotalHeight>4){jQuery(".queryCnt").addClass('lineClamp lineClampLineNumb');}}};jQuery.fn.outerHTML=function(s){if(this.length==0)return false;var elem=this[0],name=elem.tagName.toLowerCase();if(elem.outerHTML)return elem.outerHTML;var attrs=jQuery.map(elem.attributes,function(i){return i.name+'="'+i.value+'"';});return"<"+name+(attrs.length>0?" "+attrs.join(" "):"")+">"+elem.innerHTML+"</"+name+">";};